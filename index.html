<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="logo.png">
    <title>Momotan Start</title>
    <style>
		:root {
            --themeColor: #a74e66;
			--themeColorText: #ffffff;
            --themeColorShadow: rgba(167, 78, 102, 0.8);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
			-webkit-touch-callout: none;
			-webkit-user-select: none; /* 禁止选中文本：Safari/Chrome */
  			-moz-user-select: none;    /* Firefox */
  			-ms-user-select: none;     /* IE/旧Edge */
  			user-select: none;        /* 标准 */
			scrollbar-width: none;
            transition: background-color 0.3s, color 0.3s;
        }

		*:focus-visible {
  			box-shadow: 0 0 0 2px var(--themeColorShadow);
		}

		@font-face {
            font-family: 'zenmaru';
            src: url('https://momotan.cc/zen.woff2') format('woff2');
            font-weight: bold;
            font-style: normal;
            font-display: swap; /* 控制字体加载时的显示行为 */
        }

		/* 允许输入框选中文本 */
		input, textarea {
  			-webkit-user-select: text;
  			-moz-user-select: text;
  			-ms-user-select: text;
  			user-select: text;
		}

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
			max-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #ffffff;
            color: #333333;
			background-size: cover;
            background-position: center;
            background-attachment: fixed;
			scrollbar-width: none;
			overflow: hidden;
			transition: background-size 1s ease;
        }

        body.dark-theme {
            background-color: #121212;
            color: #f0f0f0;
        }

		.background::before {
    		content: "";
    		position: absolute;
    		top: 0;
    		left: 0;
    		width: 100%;
    		height: 100%;
    		background: rgba(18, 18, 18, 0); /* 深色模式下对自定义背景的黑色遮罩 */
			z-index:-2;
			//transition: all 0.2s ease;
		}
		.dark-theme .background::before {
    		content: "";
    		position: absolute;
    		top: 0;
    		left: 0;
    		width: 100%;
    		height: 100%;
    		background: rgba(18, 18, 18, 0.3); /* 深色模式下对自定义背景的黑色遮罩 */
			z-index:-2;
			//transition: all 0.2s ease;
		}
		.dark-theme-no .background::before {
    		content: "";
    		position: absolute;
    		top: 0;
    		left: 0;
    		width: 100%;
    		height: 100%;
    		background: rgba(18, 18, 18, 0); /* 深色模式下对自定义背景的黑色遮罩 */
			z-index:-2;
		}

		.background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #ffffff center / cover no-repeat fixed;
    z-index: -2;
    filter: blur(0) brightness(1);
    transform: scale(1);
    transform-origin: center;
    opacity: 1;
	transition: all 0.2s ease;
}

.dark-theme .background {
    background: #121212 center / cover no-repeat fixed;
}

        .button, button:hover, button:active, button:visited, button:link, button:focus {
            -webkit-tap-highlight-color: transparent;
            outline: none;
            text-decoration: none;
			-webkit-user-drag: none;
			-moz-user-drag: none;
  			user-drag: none;
			-webkit-touch-callout: none;
  			touch-action: manipulation;
        }

		.a, a:hover, a:active, a:visited, a:link, a:focus {
            -webkit-tap-highlight-color: transparent;
            outline: none;
            text-decoration: none;
			-webkit-user-drag: none;
			-moz-user-drag: none;
  			user-drag: none;
			-webkit-touch-callout: none;
  			touch-action: manipulation;
        }

		.musiccard {
			position: absolute;
			bottom: 15px;
			left: 15px;
			transition: all 0.2s ease;
        }

        .header {
            display: flex;
            justify-content: flex-end;
            padding: 17px;
			box-sizing: content-box;
			transition: all 0.3s ease;
        }

		.header-box {
			position: relative;
			display: flex;
			gap:4px;
			max-widthwidth:76px;
			max-height:42px;
			border-radius: 25px;
			padding:7px 10px 7px 10px;
            margin-top: 5px;
			margin-right: 2px;
            border: none;
            cursor: pointer;
            outline: none;
			box-sizing: content-box;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
            outline: none;
            text-decoration: none;
			transition: all 0.3s ease;
        }
		.header-box-img {
			position: relative;
			display: flex;
			gap:4px;
			max-widthwidth:76px;
			max-height:42px;
			border-radius: 25px;
			padding:7px 10px 7px 10px;
            margin-top: 5px;
			margin-right: 2px;
            border: none;
            cursor: pointer;
            outline: none;
			box-sizing: content-box;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
            outline: none;
            text-decoration: none;
			transition: all 0.3s ease;
        }

		/*.header-box-img::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            background: rgba(0, 0, 0, 0.1);
			filter: blur(12px);
            border-radius: 16px;
            margin: 0px;
        }*/

		.header-box svg {
			width:25px;
			height:25px;
            //color: rgba(0, 0, 0, 0.40);
			color: var(--themeColor);
			opacity: 0.7;
			transition: all 0.3s ease;
        }
		.header-box svg:hover {
            //color: rgba(0, 0, 0, 0.55);
			color: var(--themeColor);
			opacity: 0.9;
			transform: scale(1.1);
        }

        .dark-theme .header-box svg {
            //color: rgba(255, 255, 255, 0.45);
			color: var(--themeColor);
			opacity: 0.7;
        }
		.dark-theme .header-box svg:hover {
            //color: rgba(255, 255, 255, 0.7);
			color: var(--themeColor);
			opacity: 0.9;
			transform: scale(1.1);
        }
		.header-box svg:active {
			transform: scale(0.9);
        }

		.header-box-img svg {
			width:25px;
			height:25px;
            color: rgba(255, 255, 255, 1);
			filter: drop-shadow(0 0 5px rgba(0,0,0,0.3));
			transition: all 0.3s ease;
			opacity: 0.85;
        }
		.header-box-img svg:hover {
            color: rgba(255, 255, 255, 1.00);
			transform: scale(1.1);
			opacity: 1.0;
        }

		.header-box-img svg:active {
			transform: scale(0.9);
        }

        .dark-theme .header-box-img svg {
            color: rgba(255, 255, 255, 0.7);
			opacity: 0.85;
        }
		.dark-theme .header-box-img svg:hover {
            color: rgba(255, 255, 255, 0.8);
			transform: scale(1.1);
        }
		.dark-theme .header-box-img svg:active {
			transform: scale(0.9);
			opacity: 1.0;
        }

        .main {
			position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .logo-container {
			position: absolute;
			top: calc(50vh - 270px);
            //margin-top: -206px;
            //margin-bottom: 40px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .logo {
            width: auto;
            height: 100px;
			transform-origin: center;
			font-size: 60px;
			font-weight:800;
			font-family: 'zenmaru';
			color: var(--themeColor);
            transition: all 0.3s ease;
        }
		.logo.tan {
			color: rgba(255, 255, 255, 0.65);
			-webkit-background-clip: text;
			background-clip: text;
			//mix-blend-mode: screen;
			//mix-blend-mode: multiply;
			-webkit-filter: brightness(1.4);
			filter: brightness(1.4);	
			//text-shadow: 0 3px 20px rgba(0, 0, 0, 0.08);
			text-shadow: 0 0 10px rgba(0, 0, 0, 0.23);

            transition: all 0.3s ease;
        }
		.logo:hover {
            transform: scale(1.05);
        }
		.logo:active {
            transform: scale(0.95);
        }

        .search-container {
			position: absolute;
			top: calc(50vh - 130px);
			//transform: translateY(-50%);
            width: 100%;
            max-width: 640px;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0px 20px 0px 20px;
			//z-index:2;
			transition: all 0.2s ease;
            //position: relative;
        }
		.search-container2 {
			position: absolute;
			top: calc(50vh - 80px);
            width: 100%;
            max-width: 640px;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0px 20px 0px 20px;
			transition: all 0.2s ease;
            //position: relative;
        }
		.search-container-big {
            max-width: 840px;
        }

        .search-form {
            display: flex;
            width: 100%;
			max-width: 600px;
            position: relative;
        }

        .engine-select {
			height: 32px;
			width: 65px;
            background: transparent;
            border: 1px var(--themeColor) solid;
            outline: none;
            color: var(--themeColor);
            font-size: 14px;
            cursor: pointer;
            padding: 6px 7px;
			opacity:1;
            appearance: none;
			border-radius: 6px;
			-webkit-tap-highlight-color: transparent;
			transition: all 0.3s ease;
        }
		.engine-select:hover {
            background-color: rgba(135, 135, 135, 0.08);
        }
        .dark-theme .engine-select {
            border: 1px var(--themeColor) solid;
			color: var(--themeColor);
        }

        .search-input {
			position: relative;
            width: 100%;
			max-width: 600px;
            height: 54px;
            padding: 15px 70px 15px 56px;
            border-radius: 60px;
            border: none;
			background-color: rgba(255, 255, 255, 0.65);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);		
            font-size: 16px;
            outline: none;
			box-shadow: 0 3px 20px rgba(0, 0, 0, 0.08);
			//box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .dark-theme .search-input {
            background-color: rgba(35, 35, 35, 0.60);
            border-color: #333;
            color: #f0f0f0;
			box-shadow: 0 3px 20px rgba(0, 0, 0, 0.08);
        }

        .search-input:focus {
			background-color: rgba(255, 255, 255, 1);
            box-shadow: 0 10px 32px rgba(0, 0, 0, 0.15);
        }

		.dark-theme .search-input:focus {
			background-color: rgba(40, 40, 40, 1);
        }
.search-input::-webkit-input-placeholder { /* Chrome/Safari/Opera */
  color: #666;
}
.search-input::-moz-placeholder { /* Firefox 18- */
  color: #666;
  opacity: 1;
}
.search-input:-moz-placeholder { /* Firefox 19+ */
  color: #666;
  opacity: 1;
}
.search-input:-ms-input-placeholder { /* IE 10+ */
  color: #666;
}
.search-input::placeholder {
  color: #666;
transition: all 0.3s ease;
}

.dark-theme .search-input::-webkit-input-placeholder { /* Chrome/Safari/Opera */
  color: #ccc;
}
.dark-theme .search-input::-moz-placeholder { /* Firefox 18- */
  color: #ccc;
  opacity: 1;
}
.dark-theme .search-input:-moz-placeholder { /* Firefox 19+ */
  color: #ccc;
  opacity: 1;
}
.dark-theme .search-input:-ms-input-placeholder { /* IE 10+ */
  color: #ccc;
}
.dark-theme .search-input::placeholder {
  color: #ccc;
transition: all 0.3s ease;
}


        .search-button {
            position: absolute;
            right: 7px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background-color: rgba(145, 145, 145, 0);
            color: var(--themeColor);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
			transform-origin: center center;
            transition: all 0.3s ease;
        }
		.dark-theme .search-button {
			color: var(--themeColor);
        }

        .search-button:hover {
            transform: scale(1.1) translateY(-18px);
			color: var(--themeColor);
        }

        .search-button svg {
            width: 20px;
            height: 20px;
        }

		.clear-button {
    		position: absolute;
    		right: 42px;
    		top: 50%;
    		transform: translateY(-50%);
    		cursor: pointer;
    		opacity: 0;
    		transition: opacity 0.2s;
    		display: flex;
    		align-items: center;
    		justify-content: center;
    		width: 20px;
    		height: 20px;
    		color: #666;
			-webkit-tap-highlight-color: transparent;
    		outline: none;
			z-index: 3;
			transition: all 0.2s ease;
		}
		.clear-button.show {
    		opacity: 1;
		}
		.clear-button:hover {
    		color: var(--themeColor);
		}
		
		.dark-theme .clear-button {
    		color: #ccc;
		}
		
		.dark-theme .clear-button:hover {
    		color: var(--themeColor);
		}

        /* 联想建议框和历史记录框样式 */
        .suggestions-box {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
			max-height: 0px;
            overflow-y: auto;
            background: white;
            border-radius: 26px;
            box-shadow: 0 0px 0px rgba(0, 0, 0, 0.15);
            margin-top: 18px;
            display: flex;
			flex-direction: column;
            opacity: 0;
			cursor: not-allowed;
            pointer-events: none;
            //transform: translateY(-10px);
			//transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
			transform: translateX(0px) translateY(-15px) perspective(800px) rotateX(-50deg) scale(0.95);
    		transform-origin: top;
            border: none;
            z-index:2;
			scrollbar-width: none;
			-webkit-tap-highlight-color: transparent;
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1);
        }
        
        .dark-theme .suggestions-box {
            background: rgba(40, 40, 40, 1);
            border-color: rgba(221, 178, 197, 0.15);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .suggestions-box.show {
            display: flex;
			flex-direction: column;
            opacity: 1;
			max-height: 350px;
			cursor: auto;
            pointer-events: auto;
			box-shadow: 0 10px 32px rgba(0, 0, 0, 0.15);
            //transform: translateY(0);
			transform: translateX(0px) translateY(0px) perspective(800px) rotateX(0deg) scale(1);
        }
        
        .suggestion-item {
            padding: 8px 20px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
			color: #333333;
            transition: background-color 0.2s;
			transition: all 0.2s ease;
        }
        
        .dark-theme .suggestion-item {
            color: #f0f0f0;
        }
		.suggestion-item:first-child {
  			padding: 12px 20px 8px 20px;
		}
		.suggestion-item:last-child {
  			padding: 8px 20px 12px 20px;
		}
		.suggestion-item:first-child:last-child {
    		padding: 12px 20px 12px 20px;
		}
		.suggestion-item:only-child {
    		padding: 12px 20px 12px 20px;
		}
        
        .suggestion-item:hover {
            background-color: color-mix(in srgb, var(--themeColor) 6%, transparent);
            color: var(--themeColor);
        }
        
        .suggestion-item:active {
            background-color: color-mix(in srgb, var(--themeColor) 6%, transparent);
            color: var(--themeColor);
        }
        .suggestion-icon {
            margin-right: 0px;
            font-size: 14px;
            color: #777;
        }
        
        .dark-theme .suggestion-icon {
            color: #999;
        }
        
        .suggestion-empty {
            padding: 15px 20px !important;
			max-height: 50px !important;
            color: #777;
            font-size: 14px;
            text-align: center;
			justify-content: center;
            align-items: center;
        }
		.dark-theme .suggestion-empty {
            padding: 15px 20px !important;
			max-height: 50px !important;
            color: #999;
            font-size: 14px;
            text-align: center;
			justify-content: center;
            align-items: center;
        }
        .searching {
            padding: 15px 20px !important;
			max-height: 50px !important;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #777;
			font-size: 14px;
        }
        .dark-theme .searching {
            padding: 15px 20px !important;
			max-height: 50px !important;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #999;
			font-size: 14px;
        }
        
        .spinner {
            width: 18px;
            height: 18px;
            border: 3px solid rgba(150, 150, 150, 0.2);
            border-top: 3px solid rgba(100, 100, 100, 0.8);
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
            margin-right: 10px;
        }
        
        .dark-theme .spinner {
            border: 3px solid rgba(50, 50, 50, 0.5);
            border-top: 3px solid #bbbbbb;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 历史记录特定样式 */
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 20px;
			color: #333333;
			transition: all 0.2s ease;
        }

		.dark-theme .history-item {
            color: #f0f0f0;
        }

        .history-item:hover {
            background-color: color-mix(in srgb, var(--themeColor) 6%, transparent);
            color: var(--themeColor);
        }
        .history-item:active {
            background-color: color-mix(in srgb, var(--themeColor) 6%, transparent);
            color: var(--themeColor);
        }

		.history-item:first-child {
  			padding: 12px 20px 8px 20px;
		}
		.history-item:last-child {
  			padding: 8px 20px 12px 20px;
		}
        
        .history-query {
            flex-grow: 1;
            cursor: pointer;
        }

        .history-delete {
            margin-left: 10px;
			margin-right: -5px;
            color: #888;
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 25px;
			text-align: center;
			font-size:13px;
            background: rgba(0, 0, 0, 0);
			transition: all 0.2s ease;
        }

        .dark-theme .history-delete {
            color: #999;
            background: rgba(255, 255, 255, 0);
        }

        .history-delete:hover {
			//color: #666;
			transform: scale(1.1);
			color: var(--themeColor);
        }

		.dark-theme .history-delete:hover {
			//color: #bbb;
			transform: scale(1.1);
			color: var(--themeColor);
        }

        .history-header {
            padding: 14px 20px 10px 20px;
			max-height: 44px;
            font-size: 14px;
            color: #777;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-theme .history-header {
            color: #999;
        }
        .history-header svg {
			display: inline-block;
			height:13px;            
			width:13px;
			margin-right:4px;
			transform: scale(1.1) translateY(1px);
        }

        .history-clear {
            cursor: pointer;
            font-size: 14px;
            padding: 0px 0px;
            border-radius: 25px;
            color: var(--themeColor);
            transition: all 0.2s ease;
        }

        .history-clear:hover {
			transform: scale(1.05);
        }
		.history-clear:active {
			transform: scale(0.95);
        }
        .history-clear svg {
			display: inline-block;
			height:13px;            
			width:13px;
			margin-right:4px;
			transform: scale(1.05) translateY(1px);
        }

        .footer {
			margin: 50px auto;
			margin-top: 13px;
			margin-bottom: 20px;
			width: auto;
			height: auto;
            text-align: center;
            padding: 4px 9px;
            font-size: 13px;
            color: #757575;
			background-color: rgba(255, 255, 255, 0.6);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);					
			border-radius: 25px;
			
        }
		.footer a {
            color: #757575;
        }
		.footer p {
            color: #757575;
        }

        .dark-theme .footer {
            color: #aaa;
			background-color: rgba(18, 18, 18, 0.5);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);		
        }
		.dark-theme .footer a {
            color: #aaa;
        }
		.dark-theme .footer p {
            color: #aaa;
        }

        @media (max-width: 600px) {
			.header {
            	padding: 14px;
        	}
            
            .logo {
				font-size:42px;
                //height: 70px;
            }
            
            .search-input {
                padding: 15px 65px 15px 56px;
            }

            .suggestions-box {
                margin-top: 15px;
            }
            
            .suggestion-item {
                padding: 6.7px 20px;
                font-size: 14px;
            }
			.suggestion-item:first-child {
  				padding: 10px 20px 6.7px 20px;
			}
			.suggestion-item:last-child {
  				padding: 6.7px 20px 10px 20px;
			}
            .suggestion-icon {
                margin-right: 0px;
            }
			.history-item {
                padding: 5.3px 20px;
                font-size: 14px;
            }
			.history-item:first-child {
  				padding: 10px 20px 5.3px 20px;
			}
			.history-item:last-child {
  				padding: 5.3px 20px 10px 20px;
			}
			.history-header {
            	padding: 10.9px 20px 5.3px 20px;
        	}
			.theme-toggle:hover {
            	color: #ccc;
        	}
			.dark-theme .theme-toggle:hover {
            	color: #888;
        	}
        }

		.visit-link {
			padding: 15px 20px 15px 20px !important;
			max-height: 50px !important;
            font-weight: 400;
        }
        
        .link-icon {
            color: #888;
            font-weight: bold;
            margin-right: 0px;
        }
        
        .dark-theme .link-icon {
            color: #888;
        }

		/* 更多窗口样式 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
				
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 99;
            opacity: 1;
            pointer-events: none;
            transition: all 0.35s ease;
        }

        .modal.active {
			background-color: rgba(0, 0, 0, 0.11);
            opacity: 1;
            pointer-events: auto;
        }

		.modal-blur {
			position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
			-webkit-backdrop-filter: blur(0px);
            backdrop-filter: blur(0px);
			transition: all 0.35s ease;
		}
		.modal.active .modal-blur {
			-webkit-backdrop-filter: blur(30px) saturate(150%);
			backdrop-filter: blur(30px) saturate(150%);
		}

        .modal-content {
			position: relative;
            background-color: rgba(255, 255, 255, 0.65);
			border: 0.5px rgba(255, 255, 255, 0.2) solid;
            border-radius: 28px;
            width: calc(100% - 48px);
            max-width: 740px;
			height: 80vh;
			max-height: 900px;
            overflow: hidden;
			transform: translateX(0px) translateY(35px) perspective(800px) rotateX(-70deg) scale(0.30);
    		//transform-origin: bottom;          
            display: flex;
            flex-direction: column;
			opacity: 0;
			filter: blur(20px);
			-webkit-filter: blur(20px);
			//transition: all 0.3s ease;
			transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1);
			//transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
        }
		.dark-theme .modal-content {
			border: 0.5px rgba(35, 35, 35, 0.2) solid;
            background-color: rgba(35, 35, 35, 0.65);
        }

        .modal.active .modal-content {
			opacity: 1;
			transform: translateX(0px) translateY(0px) perspective(800px) rotateX(0deg) scale(1);
			filter: none;
			-webkit-filter: none;
			transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1);
			z-index: 10;
        }

		.low {
			backdrop-filter: blur(0px) saturate(100%);
			-webkit-backdrop-filter: blur(0px) saturate(100%);          
			background: rgba(0,0,0,0);
        }
		.modal.active .low {
			backdrop-filter: blur(0px) saturate(100%);
			-webkit-backdrop-filter: blur(0px) saturate(100%);         
			background: rgba(0,0,0,0.11);
        }
		.dark-theme .low {
			backdrop-filter: blur(0px) saturate(100%);
			-webkit-backdrop-filter: blur(0px) saturate(100%);         
			background: rgba(0,0,0,0);
        }
		.dark-theme .modal.active .low {
			backdrop-filter: blur(0px) saturate(100%);
			-webkit-backdrop-filter: blur(0px) saturate(100%);         
			background: rgba(0,0,0,0.21);
        }

		.lowmodal {
			border: none;
			background-color: rgba(242, 242, 242, 1);
			filter: blur(0px);
			-webkit-filter: blur(0px);
        }
		.lowmodal.active {
			background-color: rgba(242, 242, 242, 1);
			filter: blur(0px);
			-webkit-filter: blur(0px);
        }
		.dark-theme .lowmodal {
			border: none;
			background-color: rgba(38, 38, 38, 1);
			filter: blur(0px);
			-webkit-filter: blur(0px);
        }
		.dark-theme .lowmodal.active {
			background-color: rgba(38, 38, 38, 1);
			filter: blur(0px);
			-webkit-filter: blur(0px);
        }

		.litemodal {
			transform: translateX(0px) translateY(35px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
        }
		.litemodal.active {
			transform: translateX(0px) translateY(0px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
        }
		.dark-theme .litemodal {
			transform: translateX(0px) translateY(35px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
        }
		.dark-theme .litemodal.active {
			transform: translateX(0px) translateY(0px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
        }

		.modal-header {
			position: fixed;
            top: 0;
            left: 0px;
            width: calc(100% + 0px);
			z-index: 9999;
			background: transparent;
			height: 66px;

			opacity: 1;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
			//border-radius: 28px 28px 0px 0px;
			overflow: hidden; 

            mask: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
				rgba(0,0,0,1) 80%, 
				rgba(0,0,0,0.7) 90%, 
				rgba(0,0,0,0.4) 95%, 
                rgba(0,0,0,0) 100%
            );
            -webkit-mask: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
				rgba(0,0,0,1) 80%, 
				rgba(0,0,0,0.7) 90%, 
				rgba(0,0,0,0.4) 95%, 
                rgba(0,0,0,0) 100%
            );
			transform: translate3d(0,0,0);

            padding: 16px 16px 12px 16px;
            display: flex;
            align-items: center;
            gap: 16px;
			//animation: modal-header 1s ease 3s forwards;
        }

        .modal.active .modal-header {
			position: fixed;
            top: 0;
            left: 0px;
            width: calc(100% + 0px);
			z-index: 9999;
			background: transparent;
			height: 66px;

			opacity: 1;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
			//border-radius: 28px 28px 0px 0px;
			overflow: hidden; 

            mask: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
				rgba(0,0,0,1) 80%, 
				rgba(0,0,0,0.7) 90%, 
				rgba(0,0,0,0.4) 95%, 
                rgba(0,0,0,0) 100%
            );
            -webkit-mask: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
				rgba(0,0,0,1) 80%, 
				rgba(0,0,0,0.7) 90%, 
				rgba(0,0,0,0.4) 95%, 
                rgba(0,0,0,0) 100%
            );
			transform: translate3d(0,0,0);

            padding: 16px 16px 12px 16px;
            display: flex;
            align-items: center;
            gap: 16px;
			animation: modal-header 0.12s ease 0.53s forwards;
        }

		.modal-header-low {
			mask: none;
			-webkit-mask: none;
			background: linear-gradient(to bottom, rgba(242, 242, 242,0.95), rgba(242, 242, 242,0.88),rgba(242, 242, 242,0.75), rgba(242, 242, 242,0.55), rgba(242, 242, 242,0));
			animation: none;
        }

		.modal.active .modal-header-low {
			mask: none;
			-webkit-mask: none;
			background: linear-gradient(to bottom, rgba(242, 242, 242,0.95), rgba(242, 242, 242,0.88),rgba(242, 242, 242,0.75), rgba(242, 242, 242,0.55), rgba(242, 242, 242,0));
			animation: none;
        }

		.dark-theme .modal-header-low {
			background: linear-gradient(to bottom, rgba(38, 38, 38,0.95), rgba(38, 38, 38,0.88),rgba(38, 38, 38,0.75), rgba(38, 38, 38,0.55), rgba(38, 38, 38,0));
        }

		.dark-theme .modal.active .modal-header-low {
			background: linear-gradient(to bottom, rgba(38, 38, 38,0.95), rgba(38, 38, 38,0.88),rgba(38, 38, 38,0.75), rgba(38, 38, 38,0.55), rgba(38, 38, 38,0));
        }

		@keyframes modal-header {
            0% { 
				backdrop-filter: none;
            	-webkit-backdrop-filter: none;
			}
            100% {
				backdrop-filter: blur(2.5px);
            	-webkit-backdrop-filter: blur(2.5px);
			}
        }

        .close {
            background: rgba(255, 255, 255, 0.6);
			color: #333333;
            border-radius: 50%;
            width: 38px;
            height: 38px;
			padding: 10px 10.7px 10px 9.3px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
			-webkit-tap-highlight-color: transparent;
			transition: all 0.3s ease;
        }
		.dark-theme .close {
			background: rgba(0, 0, 0, 0.22);
            color: #f0f0f0;
        }
		.close:hover {            
			transform: scale(1.1);
        }
		.close:active {            
			transform: scale(0.9);
        }

		.close svg {
            color: #333333;
        }
		.dark-theme .close svg {
            color: #f0f0f0;
        }

        .close .material-icons {
            color: var(--on-surface);
            font-size: 24px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 400;
			color: #333333;
        }

		.dark-theme .modal-title {
            font-weight: 400;
			color: #f0f0f0;
        }

		.modal-title-mini {
			color: var(--themeColor);
            font-size: 15.5px;
            font-weight: 500;
			margin-left: 16px;
			margin-top: 20px;
			margin-bottom: 8px;
        }

		.dark-theme .modal-title-mini {
			color: var(--themeColor);
        }

        .modal-body {
			position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow-y: auto;
            padding: 66px 24px 24px 24px;
            display: flex;
            flex-direction: column;
            gap: 2px;
			scrollbar-width: none;
			transition: all 0.3s ease;
        }

		.bar-item {           
			width: 100%;
			height: 100%;			
			aspect-ratio: 1/1.28;
            align-items: center;
			text-align: center;
            padding: 0px;
            transition: all 0.3s ease;
        }
		.bar-item img {
            display: flex;
			width: 100%;
			aspect-ratio: 1/1;
            align-items: center;
			text-align: center;
            padding: 26px;
            border-radius: 18px;
			border:none;			
			background-color: rgba(245, 245, 245, 0.7);
			-webkit-backdrop-filter: blur(10px);	
			backdrop-filter: blur(10px);					
            transition: all 0.3s ease;
        }
		.dark-theme .bar-item img {		
			background-color: rgba(35, 35, 35, 0.7);
            transition: all 0.3s ease;
        }
		.bar-item img:hover {
            border-radius: 50%;
        }

		.bar-item p {
			font-size:13px;
			margin-top:3px;
			padding:0px;
			color: #ffffff;
			text-shadow: 0 0 3px rgba(0, 0, 0, 0.40);
        }
		.dark-theme  .bar-item p {
			font-size:13px;
            color: #eeeeee;
			text-shadow: 0 0 3px rgba(0, 0, 0, 0.40);
        }
		.barbox-normal .bar-item p {
			font-size:13px;
			margin-top:3px;
			padding:0px;
            color: #333333;
			text-shadow: none;
        }
		.dark-theme .barbox-normal .bar-item  .bar-item p {
			font-size:13px;
            color: #eeeeee;
			text-shadow: none;
        }

		.collection-item {           
			width: 100%;
			height: 100%;			
			aspect-ratio: 1/1.24;
            align-items: center;
			text-align: center;
            padding: 0px;
            transition: all 0.3s ease;
        }
		.collection-item img {
            display: flex;
			width: 100%;
			aspect-ratio: 1/1;
            align-items: center;
			text-align: center;
            padding: 26px;
            border-radius: 18px;			
			background-color: rgba(255, 255, 255, 5);
            transition: all 0.3s ease;
        }
		.collection-item img:hover {
            border-radius: 50%;
        }
		.dark-theme .collection-item img {
			background-color: rgba(0, 0, 0, 0.5);
        }

		.collection-item p {
			font-size:13px;
			margin-top:3px;
            color: #333333;
        }
		.dark-theme  .collection-item p {
			font-size:13px;
            color: #f0f0f0;
        }	

		.collectionbox {
            padding: 0px;
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 7px;
        }
		
		@media (max-width: 700px) {
            .collectionbox {
                grid-template-columns: repeat(6, 1fr);
            }
        }
		@media (max-width: 520px) {
            .collectionbox {
                grid-template-columns: repeat(5, 1fr);
            }
        }
		@media (max-width: 355px) {
            .collectionbox {
                grid-template-columns: repeat(4, 1fr);
            }
        }
		
		@media (max-width: 300px) {
            .collectionbox {
                grid-template-columns: repeat(3, 1fr);
            }
			.bar-item {           			
				aspect-ratio: 1/1.3;
        	}
			.collection-item {           			
				aspect-ratio: 1/1.3;
        	}
        }

		.collectionbox-big {
            grid-template-columns: repeat(10, 1fr);
        }
		@media (max-width: 880px) {
            .collectionbox-big {
                grid-template-columns: repeat(9, 1fr);
            }
        }
		@media (max-width: 780px) {
            .collectionbox-big {
                grid-template-columns: repeat(8, 1fr);
            }
        }
		@media (max-width: 680px) {
            .collectionbox-big {
                grid-template-columns: repeat(7, 1fr);
            }
        }
		@media (max-width: 580px) {
            .collectionbox-big {
                grid-template-columns: repeat(6, 1fr);
            }
        }
		@media (max-width: 480px) {
            .collectionbox-big {
                grid-template-columns: repeat(5, 1fr);
            }
        }
		@media (max-width: 358px) {
            .collectionbox-big {
                grid-template-columns: repeat(4, 1fr);
            }
        }

		.collectionbox-big2 {
            grid-template-columns: repeat(8, 1fr);
        }
		@media (max-width: 790px) {
            .collectionbox-big2 {
                grid-template-columns: repeat(7, 1fr);
            }
        }
		@media (max-width: 670px) {
            .collectionbox-big2 {
                grid-template-columns: repeat(6, 1fr);
            }
        }
		@media (max-width: 520px) {
            .collectionbox-big2 {
                grid-template-columns: repeat(5, 1fr);
            }
        }
		@media (max-width: 358px) {
            .collectionbox-big2 {
                grid-template-columns: repeat(4, 1fr);
            }
        }
		

		.barbox {
            width: 100%;
			padding: 13px;
			margin-top:10px;
			margin-bottom:-120px;
			display: none;
			opacity: 1;
			transition: all 0.3s ease;
        }

		.collections {
            padding: 0px;
			align-items: center;
			text-align: center;           
			flex-shrink: 0;
            -webkit-user-drag: none;
			overflow: hidden;
            position: relative;
			-webkit-touch-callout: none;
  			touch-action: manipulation;
        }

		.setting-itemgroup {
			background: rgba(255, 255, 255, 0.6);
            padding: 4px 16px;
            display: flex;
			flex-direction: column;
            gap: 0px;
			border-radius: 25px;
			transition: all 0.3s ease;
        }

		.dark-theme .setting-itemgroup {
			background: rgba(0, 0, 0, 0.22);
        }

		.setting-itembox {
            background: rgba(255, 255, 255, 0.6);
            padding: 0px 0px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0px;
			border-radius: 25px;
        }
		.dark-theme .setting-itembox {
			background: rgba(0, 0, 0, 0.22);
        }
		@media (max-width: 600px) {
            .setting-itembox {
				padding: 4px 16px;
                grid-template-columns: repeat(1, 1fr);
            }
        }

		.setting-itembox2 {
            background: rgba(255, 255, 255, 0.6);
            padding: 0px 0px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
           	gap: 0px;
			border-radius: 25px;
        }
		.dark-theme .setting-itembox2 {
			background: rgba(0, 0, 0, 0.22);
        }
		@media (max-width: 750px) {
            .setting-itembox2 {
				padding: 4px 16px;
                grid-template-columns: repeat(1, 1fr);
            }
        }
		

        .setting-item {
            display: flex;
            align-items: center;
            padding: 12px 0px 12px 0px;
            border-radius: 0px;
			//min-height: 64px;
			//background: rgba(255, 255, 255, 0.7);
			//border-bottom: 1px rgba(150, 150, 150, 0.1) solid;
            transition: background-color 0.3s ease;
        }
		/*.dark-theme .setting-item {
    		background: color-mix(in srgb, var(--themeColor) 4%, rgba(0,0,0,0.4));
		}
		.setting-item:first-child {
    		border-radius: 25px 25px 0px 0px;
		}*/
		.setting-item:last-child {
			//border-radius: 0px 0px 25px 25px;
			border-bottom: 0px rgba(150, 150, 150, 0) solid;
		}
		.setting-item:only-child {
			//border-radius: 25px 25px 25px 25px;
			border-bottom: 0px rgba(150, 150, 150, 0) solid;
		}

		@media (min-width: 600px) {
            .setting-itembox .setting-item {
				border-bottom: 0px rgba(150, 150, 150, 0) solid;
				padding: 16px 16px 16px 16px;
			}
        }

		@media (min-width: 750px) {
            .setting-itembox2 .setting-item {
				border-bottom: 0px rgba(150, 150, 150, 0) solid;
				padding: 16px 16px 16px 16px;
			}
        }

        /*.setting-item:hover {
            background-color: rgba(135, 135, 135, 0.07);
        }*/

		.setting-item-btn {
            flex-wrap: wrap;
			gap:10px;
			padding: 16px 0px 6px 0px;
        }
		.setting-item-btn:hover {
            background-color: rgba(135, 135, 135, 0);
        }

        .item-icon {
            width: 40px;
            height: 40px;
            background: none;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
        }

        .item-content {
            flex: 1;
        }

        .item-title {
            font-size: 17px;
            font-weight: 400;
            margin-bottom: 3px;
			color: #333333;
        }

		.dark-theme .item-title {
            font-weight: 400;
            margin-bottom: 3px;
			color: #f0f0f0;
        }

        .item-description {
            font-size: 14px;
			color: #333333;
			font-weight: 350;
        }
		.item-description a {
			color: var(--themeColor);
			font-weight: 400;
        }
		.dark-theme .item-description {
			color: #f0f0f0;
			font-weight: 350;
        }
		.dark-theme .item-description a {
			color: var(--themeColor);
        }

        @media (max-width: 600px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                border-radius: 0;
				border: none;
                width: 100%;
                height: 100%;
                max-height: none;
				transform: translateX(90%);
				transition: all 0.45s cubic-bezier(0.2, 0.7, 0.2, 1);
            }
            .dark-theme .modal-content {
                border-radius: 0;
				border: none;
                width: 100%;
                height: 100%;
                max-height: none;
				transform: translateX(90%);
				transition: all 0.45s cubic-bezier(0.2, 0.7, 0.2, 1);
            }

			.modal-body {
            	padding: 66px 15px 15px 15px;
        	}
			.item-title {
            	font-size: 16.5px;
            	font-weight: 400;
            	margin-bottom: 3px;
				color: #333333;
        	}
			.item-description {
            	font-size: 13.5px;
        	}
			.modal-title {
            	font-size: 19px;
        	}
			.modal-header {
            	padding: 10px 16px 10px 16px;
            	display: flex;
            	align-items: center;
            	gap: 16px;
				height: 66px;
        	}
			.close {
            	width: 38px;
            	height: 38px;
				padding: 10px 10.7px 10px 9.3px;
        	}
        }
        @media (max-height: 380px) and (min-width: 600px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                border-radius: 0;
				border: none;
                width: 100%;
                height: 100%;
                max-height: none;
                max-width: 1000px;
				transform: translateX(120px);
				transition: all 0.32s ease;
            }
			.modal-body {
            	padding: 66px 15px 15px 15px;
        	}
        }

		/* MD3 开关样式 */
        .md-switch {
            --md-sys-color-primary: var(--themeColor);
            --md-sys-color-surface-container-highest: rgba(220, 220, 220, 0.8);
            --size: 51px;
            --handle-size: 16px;
            
            display: inline-block;
            position: relative;
            width: var(--size);
            height: calc(var(--size) / 1.65);
            background: var(--md-sys-color-surface-container-highest);
			border: 2px solid #808080;
            border-radius: 16px;
            cursor: pointer;
			-webkit-tap-highlight-color: transparent;
			display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

		.dark-theme .md-switch {
            --md-sys-color-primary: var(--themeColor);
			--md-sys-color-surface-container-highest: rgba(50, 50, 50, 0.8);
			border: 2px solid #8e8e8e;
        }
        
        .md-switch-handle {
            position: absolute;
            /* top: calc(50% - var(--handle-size)/2 + 0.4px);换成对父容器上下居中了 */
            left: calc(var(--handle-size)/4 + 1.9px);
            width: calc(var(--handle-size) - 1px);
            height: calc(var(--handle-size) - 1px);
            background-color: #808080;
            border-radius: 50%;
            /*transition: all 0.3s cubic-bezier(0.2, 0.85, 0.32, 1.2); 弹性动画，效果不好*/
			//transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1), transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
			transition: all 0.25s cubic-bezier(0.4, 0, 0.3, 1), transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }

		.dark-theme .md-switch-handle {
            background-color: #8e8e8e;
        }
        
        
        .md-switch::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--md-sys-color-primary);
            border-radius: 16px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .md-switch-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: calc(var(--handle-size)/2 + var(--handle-size)/2);
            font-size: calc(var(--handle-size) * 0.8);
            color: white;
            pointer-events: none;
            opacity: 0;
            z-index: 100;
            transition: opacity 0.2s ease;
        }
        
        .md-switch.checked {
            background: var(--md-sys-color-primary);
			border-color: var(--md-sys-color-primary);
        }
        
        .md-switch.checked .md-switch-handle {
            left: calc(100% - var(--handle-size) - var(--handle-size)/4 - 1px);
            transform: translateX(0)  scale(1.58);
			background-color: #ffffff;
        }

		.dark-theme .md-switch.checked .md-switch-handle {
			background-color: var(--themeColorText);
        }
        
        /* 焦点状态 */
        .md-switch:focus-visible {
            outline: 2px solid var(--md-sys-color-primary);
            outline-offset: 2px;
        }
        
        /* 禁用状态 */
        .md-switch.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            pointer-events: none;
        }

		@media (min-width: 600px) {
            .md-switch:active .md-switch-handle {
            	transform: translateX(0px) scale(1.4);
        	}
        }

		.md-btn {            
            display: inline-block;
            position: relative;
			font-size:13px;
			padding:10px 15px;
			margin-top:7px;
			margin-right:5px;
            background: var(--themeColor);
            border-radius: 25px;
            cursor: pointer;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
			outline: none;
			border: none;
            transition: all 0.3s ease;
        }
		.dark-theme .md-btn {            
            background: var(--themeColor);
        }

		.md-btn:hover {            
            border-radius: 12px;
        }
		.md-btn:active {            
			transform: scale(0.9);
        }

		.md-btn p {
			display: inline-block;
			font-size:13px;
			color: #ffffff;
        }
		.dark-theme .md-btn p {
			font-size:13px;
			color: var(--themeColorText);
        }

		.md-btn svg {
			display: inline-block;
			height:13px;            
			width:13px;
			margin-right:3px;
			color: #ffffff;
			transform: scale(1.2) translateY(1px);
        }
		.dark-theme .md-btn svg {
			color: var(--themeColorText);
        }

		.preview-container {
            display: flex;
            justify-content: left;
            margin: 0px;
        }

		.md-btn-logobox {    
			position: relative;
			display:flex;   
			width:100%;
        }

		

		.md-btn-logo {            
            display: flex;
			margin-top:0px;
			margin-right:10px;
			width:auto;
			position: relative;
			font-size:13px;
			padding:10px 15px;
            background: var(--themeColor);
            border-radius: 25px;
            cursor: pointer;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
            transition: all 0.3s ease;
        }

		.dark-theme .md-btn-logo {            
            background: var(--themeColor);
        }

		.md-btn-logo:hover {            
            border-radius: 12px;
        }
		.md-btn-logo:active {            
			transform: scale(0.9);
        }

		.md-btn-logo p {
			display: inline-block;
			font-size:13px;
			color: #ffffff;
        }
		.dark-theme .md-btn-logo p {
			font-size:13px;
			color: var(--themeColorText);
        }

		.md-btn-logo svg {	 
			height:18px;            
			width:18px;
			margin-right:4px;
			color: #ffffff;
        }
		.dark-theme .md-btn-logo svg {
			color: var(--themeColorText);
        }

		.md-btnr {            
            display: inline-block;
            position: relative;
			font-size:13px;
			padding:10px 15px;
			margin-left:5px;
            background: var(--themeColor);
            border-radius: 25px;
            cursor: pointer;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
            transition: all 0.3s ease;
        }

		.dark-theme .md-btnr {            
            background: var(--themeColor);
        }

		.md-btnr:hover {            
            border-radius: 12px;
        }
		.md-btnr:active {            
			transform: scale(0.9);
        }

		.md-btnr p {
			display: inline-block;
			font-size:13px;
			color: #ffffff;
        }
		.dark-theme .md-btnr p {
			font-size:13px;
			color: var(--themeColorText);
        }

		.md-btnr svg {
			display: inline-block;
			height:13px;            
			width:13px;
			margin-right:3px;
			color: #ffffff;
			transform: scale(1.2) translateY(1px);
        }
		.dark-theme .md-btnr svg {
			color: var(--themeColorText);
        }

		.md-btnq {            
            display: inline-block;
            position: relative;
			//width: 100px;
			font-size:13px;
			padding:10px 15px;
			margin-left:5px;
            background: var(--themeColor);
            border-radius: 25px;
            cursor: pointer;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
            transition: all 0.3s ease;
        }

		.dark-theme .md-btnq {            
            background: var(--themeColor);
        }

		.md-btnq:hover {            
            border-radius: 12px;
        }
		.md-btnq:active {            
			transform: scale(0.9);
        }

		.md-btnq p {
			display: inline-block;
			font-size:13px;
			color: #ffffff;
			transform: translateY(0.5px);
        }
		.dark-theme .md-btnq p {
			font-size:13px;
			color: var(--themeColorText);
        }

		.md-btnq div {
			display: inline-block;
        }

		.md-btnq div svg {
			display: inline-block;
			height:13px;            
			width:13px;
			margin-right:3px;
			color: #ffffff;
			transform: scale(1.1) translateY(2px);
        }
		.dark-theme .md-btnq svg {
			color: var(--themeColorText);
        }

		.md-btnc-box {
			display: grid;
			grid-template-columns: repeat(5, 1fr);
            gap: 1.5px;
		}
		/*@media (max-width: 800px) {
            .md-btnc-box {
                grid-template-columns: repeat(8, 1fr);
            }
        }
		@media (max-width: 480px) {
            .md-btnc-box {
                grid-template-columns: repeat(6, 1fr);
            }
        }
		@media (max-width: 320px) {
            .md-btnc-box {
                grid-template-columns: repeat(5, 1fr);
            }
        }*/

		.md-btnc {            
            display: inline-block;
            position: relative;
			font-size:10px;
			width: 32.5px;
			height:32.5px;
			padding:10.5px 10.5px;
            background: var(--themeColor);
            //border-radius: 25px;
            cursor: pointer;
			align-items: center;
            justify-content: center;
			text-align: center;
			border-radius: 0px;
			-webkit-tap-highlight-color: transparent;
            transition: all 0.3s ease;
        }

		.dark-theme .md-btnc {            
            background: var(--themeColor);
        }

		.md-btnc p {
			display: none;
			font-size:0px;
        }

		.md-btnc svg {
			display: inline-block;
			opacity: 0;
			height:11.5px;            
			width:11.5px;
			color: #ffffff;
			transform: scale(0);
			transition: all 0.2s ease;
        }
		/*.dark-theme .md-btnc svg {
			color: #000000;
        }*/

		.md-btnc.active svg {            
			opacity: 1;
            transform: scale(1.6);
        }

		.md-btn-second {            
            background: none;
			color: var(--themeColor);
			border: 1px #888 solid;
            transition: all 0.3s ease;
        }
		.dark-theme .md-btn-second {     
			background: none;
            color: var(--themeColor);
			border: 1px #888 solid;
        }

		.md-btn-second p {
			display: inline-block;
			font-size:13px;
			color: var(--themeColor);
        }
		.dark-theme .md-btn-second p {
			font-size:13px;
			color: var(--themeColor);
        }

		.md-btn-second svg {
			display: inline-block;
			height:13px;            
			width:13px;
			margin-right:3px;
			color: var(--themeColor);
			transform: scale(1.2) translateY(1px);
        }
		.dark-theme .md-btn-second svg {
			color: var(--themeColor);
        }

		.preview-container {
            display: flex;
            justify-content: left;
            margin: 0px;
        }

        .preview-box {
            width: 180px;
            height: 115px;
            border: none;
			background-color: rgba(135, 135, 135, 0.09);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-size: cover;
            background-position: center;
			transition: all 0.3s ease;
        }

		.file-input {
            display: none;
        }

		@media (max-width: 600px) {
            .preview-box {
            	width: 80px;
            	height: 115px;
        	}
        }

		.custom-select-container {
            position: relative;
            margin-top: 10px;
        }
        
        .custom-select {
			position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;           
			position: absolute;
            left: 7px;
            top: 50%;
            transform: translateY(-50%);
			margin-top:-5px;
            z-index: 3;
			height: 40px;
			width: 40px;			
            outline: none;
            color: #666;
            font-size: 14px;
            padding: 12px;
            appearance: none;
            background: rgba(135, 135, 135, 0);
			border-radius: 25px;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
			overflow:hidden;
			transition: all 0.2s ease;
        }
		    .dark-theme .custom-select {
			color: #ccc;
        }
.custom-select svg {
            transform: scale(1);
            transition: all 0.2s ease;
        }
        
        .custom-select:hover {
			color: var(--themeColor);
			background: color-mix(in srgb, var(--themeColor) 7%, transparent);
        }
		.dark-theme .custom-select:hover {
			color: var(--themeColor);
			background: color-mix(in srgb, var(--themeColor) 7%, transparent);
        }
.custom-select:hover svg {
            transform: scale(1.05);
        }
        .custom-select.active {
			border-radius: 25px;
			color: var(--themeColor);
			background: color-mix(in srgb, var(--themeColor) 7%, transparent);
			border-color: rgba(135, 135, 135, 0);
        }
		.dark-theme .custom-select.active {
			border-radius: 25px;
			color: var(--themeColor);
			background: color-mix(in srgb, var(--themeColor) 7%, transparent);
			border-color: rgba(135, 135, 135, 0);
        }
        .custom-select.active svg {
            transform: scale(1.05);
        }
        .select-text {
            flex: 1;
        }
        
        .custom-options {
            position: absolute;
			display: flex;
			flex-direction: column;
            top: calc(100% + 8px);
            left: 0;
            width: 150px;
            gap: 4px;
			background-color: rgba(255, 255, 255, 0.65);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);	
            border-radius: 25px;
            box-shadow: 0 10px 32px rgba(0, 0, 0, 0.15);
            padding: 4px;
            z-index: 3;
            max-height: 0px;
            overflow: hidden;
            opacity: 0;
			transform: translateY(-10px) translateX(10px) perspective(800px) rotateX(-80deg) scale(0.8);
    		transform-origin: top;
			pointer-events: none;
            //transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);			
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.05);
        }

		.dark-theme .custom-options {
			background-color: rgba(35, 35, 35, 0.60);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.20);		
        }
		.custom-options2 {
			left: auto;
            right: 0;
			background-color: rgba(255, 255, 255, 1);
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);	
			transform: translateY(-10px) translateX(10px) perspective(800px) rotateX(-80deg) scale(0.8);	
        }
		.dark-theme .custom-options2 {
			left: auto;
			background-color: rgba(35, 35, 35, 1);
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.10);		
        }
        .custom-options3 {
			width: auto;
			padding: 12px;
			transform: translateY(-10px) translateX(16px) perspective(800px) rotateX(-80deg) scale(0.8);
        }
		.custom-options4 {
			left: 0;
            right: auto;
			background-color: rgba(255, 255, 255, 1);
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);	
			transform: translateY(-10px) translateX(-10px) perspective(800px) rotateX(-80deg) scale(0.8);	
        }
		.dark-theme .custom-options4 {
			left: 0;
			right: auto;
			background-color: rgba(35, 35, 35, 1);
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.10);		
        }
		
        .custom-options.active {
            max-height: 400px;
            opacity: 1;
			pointer-events: auto;
			transform: translateY(0px) translateX(20px) perspective(800px) rotateX(0deg) scale(1);
        }

		.custom-options2.active {
            max-height: 400px;
            opacity: 1;
			pointer-events: auto;
			transform: translateY(0px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
        }

		.custom-options3.active {
            max-height: 400px;
            opacity: 1;
			pointer-events: auto;
			transform: translateY(0px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
        }
		.custom-options4.active {
            max-height: 400px;
            opacity: 1;
			pointer-events: auto;
			transform: translateY(0px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
        }
        
        .custom-option {
            padding: 12px 16px;
			border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: #404040;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
			-webkit-tap-highlight-color: transparent;
        }

		.dark-theme .custom-option {
            color: #eee;
        }
		.custom-option:first-child {
  			border-radius: 21px 21px 5px 5px;
		}
		.custom-option:last-child {
  			border-radius: 5px 5px 21px 21px;
		}

		.custom-option div {
			transform: scaleY(1);
			transition: all 0.2s ease;
        }
        
        .custom-option:hover {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
            color: var(--themeColor);
        }

		.dark-theme .custom-option:hover {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
            color: var(--themeColor);
        }
		.custom-option:active {
			transform: scale(0.96, 0.9);
        }
		.custom-option:active div {
			transform: scaleY(1.08);
			transition: all 0.2s ease;
        }
		.custom-option:active svg {
			transform: scaleY(1.08);
			transition: all 0.2s ease;
        }
        .custom-option svg {
			display: inline-block;
			height:15px;            
			width:15px;
			margin-right:8px;
			transform: scaleY(1);
			transition: all 0.2s ease;
        }
        
        .custom-option.selected {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
            color: var(--themeColor);
            font-weight: 600;
        }

		.dark-theme .custom-option.selected {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
            color: var(--themeColor);
            font-weight: 600;
        }

		.select-icon {
    		width: 19px;
    		height: 19px;
    		display: flex;
    		align-items: center;
    		justify-content: center;
		}

		.select-icon svg {
    		width: 100%;
    		height: 100%;
    		fill: currentColor;
		}

		@media (max-width: 600px) {

		.custom-options {
            width: 132px;
            gap: 4px;
            border-radius: 25px;	
        }
		.custom-options.active {
            max-height: 340px;
            //opacity: 1;
			//transform: translateY(0px);
        }
		.custom-option {
            padding: 10px 14px;
			border-radius: 5px;
            font-size: 14px;
        }
		.custom-option:first-child {
  			border-radius: 21px 21px 5px 5px;
		}
		.custom-option:last-child {
  			border-radius: 5px 5px 21px 21px;
		}
		.custom-option svg {
			height:13px;            
			width:13px;
			margin-right:8px;
        }
		}
		.custom-options3 {
			width: auto;
			padding: 12px;
        }

		.low-custom-options {
			background-color: white;
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);	
		}
		.dark-theme .low-custom-options {
			background-color: #303030;
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);	
		}
		
		.lite-custom-options {
			transform: translateY(-10px) translateX(20px) perspective(800px) rotateX(0deg) scale(1);
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);	
		}
		.dark-theme .lite-custom-options {
			transform: translateY(-10px) translateX(20px) perspective(800px) rotateX(0deg) scale(1);
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);	
		}

		.lite-custom-options2 {
			transform: translateY(-10px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);	
		}
		.dark-theme .lite-custom-options2 {
			transform: translateY(-10px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);	
		}

		.lite-custom-options.active {
            max-height: 400px;
            opacity: 1;
			transform: translateY(0px) translateX(20px) perspective(800px) rotateX(0deg) scale(1);
        }
		.dark-theme .lite-custom-options.active {
            max-height: 400px;
            opacity: 1;
			transform: translateY(0px) translateX(20px) perspective(800px) rotateX(0deg) scale(1);
        }
		.lite-custom-options2.active {
            max-height: 400px;
            opacity: 1;
			transform: translateY(0px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
        }
		.dark-theme .lite-custom-options2.active {
            max-height: 400px;
            opacity: 1;
			transform: translateY(0px) translateX(0px) perspective(800px) rotateX(0deg) scale(1);
        }

		.popup {
            position: absolute;
            left: 0px;
			bottom: calc(100% + 10px);
            width: 400px;
			height: calc(70vh - 170px);
			max-height: 470px;
			padding: 13px 22px;
            background-color: rgba(255, 255, 255, 1);
            border-radius: 25px;
            box-shadow: 0 10px 32px rgba(0, 0, 0, 0.15);
            z-index: 10000;
			-webkit-tap-highlight-color: transparent;
            outline: none;
            text-decoration: none;
            overflow: auto;
			scrollbar-width: none;
            opacity: 0;
			pointer-events: none;
			transform: translateY(48px) translateX(-30px) scale(0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);			
        }
		.dark-theme .popup {
            background-color: rgba(45, 45, 45, 1);
        }		
		
		.popup.active {
			/*bottom: calc(100% + 10px);
			height: calc(70vh - 170px);
			padding: 13px 22px;*/
			pointer-events: auto;
            opacity: 1;
			transform: translateY(0px) translateX(0px) scale(1);
        }

		.popup .modal-title-mini {
			margin-left: 0px;
			margin-top: 18px;
			margin-bottom: 8px;
        }

		@media (max-width: 600px) {
            .popup {
				position: absolute;
            	left: 0px;
				bottom: calc(100% + 10px);
				width: 90%;
				height: calc(80vh - 170px);
				max-height: 470px;
				min-height: 200px;
        	}
        }
        @media (max-height: 380px) and (min-width: 600px) {
            .popup {
				left: auto;
                right: 25px;
				width: 60%;
                bottom: -110px;
				height: calc(100vh - 70px);
				max-height: 400px;
				min-height: 120px;
                transform: translateY(0px) translateX(-200px) scale(0.6);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.175);			
        }
        	}
        
		.section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .dark-theme .section {
            background: #1e1e1e;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .section-title {
            margin-top: 0;
            margin-bottom: 15px;
            color: #333;
        }
        
        .dark-theme .section-title {
            color: #f0f0f0;
        }
        
        .collection-item {           
            width: 100%;
            height: 100%;			
            aspect-ratio: 1/1.24;
            align-items: center;
            text-align: center;
            padding: 0px;
            transition: all 0.3s ease;
            position: relative;
        }
		.bar-item {           
            width: 100%;
            height: 100%;			
            aspect-ratio: 1/1.28;
            align-items: center;
            text-align: center;
            padding: 0px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .collection-item .shortcut-icon {
            display: flex;
            width: 100%;
            aspect-ratio: 1/1;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 18px;
            border-radius: 18px;			
            background-color: rgba(255, 255, 255, 0.6);
			-webkit-backdrop-filter: none;	
			backdrop-filter: none;					
            transition: all 0.3s ease;
            font-size: 24px;
            font-weight: bold;
            line-height: 1;
            color: #555555;
			box-shadow:inset 0 0 0 0.8px rgba(150, 150, 150, 0);
        }

		.dark-theme .collection-item .shortcut-icon {
            background: rgba(0, 0, 0, 0.22);
            transition: all 0.3s ease;
            color: #bbbbbb;
			box-shadow:inset 0 0 0 0.8px rgba(0, 0, 0, 0);
        }

        .bar-item .shortcut-icon {
            display: flex;
            width: 100%;
            aspect-ratio: 1/1;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 18px;
            border-radius: 18px;			
            background-color: rgba(248, 248, 248, 0.65);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);					
            transition: all 0.3s ease;
            font-size: 24px;
            font-weight: bold;
            line-height: 1;
            color: #4a4a4a;
			box-shadow:inset 0 0 0 0.8px rgba(150, 150, 150, 0);
        }
        
        .dark-theme .bar-item .shortcut-icon {
            background-color: rgba(35, 35, 35, 0.60);
            transition: all 0.3s ease;
            color: #cccccc;
			box-shadow:inset 0 0 0 0.8px rgba(0, 0, 0, 0);
        }

        .collection-item .shortcut-icon:hover, 
        .bar-item .shortcut-icon:hover {
            box-shadow:inset 0 0 0 0.8px var(--themeColorShadow);
        }
		.dark-theme .collection-item .shortcut-icon:hover, 
        .dark-theme .bar-item .shortcut-icon:hover {
            box-shadow:inset 0 0 0 0.8px var(--themeColorShadow);
        }

		.collection-item .shortcut-icon:active,
		.bar-item .shortcut-icon:active {
			box-shadow:inset 0 0 0 3px var(--themeColorShadow);            
			transform: scale(0.94);
        }
		.dark-theme .collection-item .shortcut-icon:active,
		.dark-theme .bar-item .shortcut-icon:active {
			box-shadow:inset 0 0 0 3px var(--themeColorShadow);            
			transform: scale(0.94);
        }

		.shortcut-svg svg {
			width:30px;
			height:30px;
		}

		.collection-item p {
            //font-size:13px;
            margin-top:3px;
            color: #333333;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .collection-item p, .bar-item p {
            //font-size:13px;
            margin-top:3px;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .dark-theme .collection-item p, 
        .dark-theme .bar-item p {
            color: #eeeeee;
        }	
        
        .add-shortcut {
            cursor: pointer;
			-webkit-tap-highlight-color: transparent;
            outline: none;
        }
        
        .add-shortcut .shortcut-icon {
            background-color: rgba(255, 255, 255, 0.7);
			-webkit-backdrop-filter: none;	
			backdrop-filter: none;
            color: #555555;
			font-size: 24px;
        }
        
        .dark-theme .add-shortcut .shortcut-icon {
            background: rgba(0, 0, 0, 0.2);
			-webkit-backdrop-filter: none;	
			backdrop-filter: none;
            color: #bbbbbb;
        }
        
        .add-shortcut p {
            color: #333333;
        }
        
        .dark-theme .add-shortcut p {
            color: #eeeeee;
        }

		.bar-item,
        .collection-item {
                aspect-ratio: 1/1.3;
            }

		@media (max-width: 440px) {
			.bar-item img {
            	padding: 18px;
        	}
			.collection-item img {
            	padding: 18px;
        	}
			.bar-item {           			
				aspect-ratio: 1/1.3;
        	}
			.collection-item {           			
				aspect-ratio: 1/1.3;
        	}
			.bar-item p,
			.dark-theme  .bar-item p,
			.barbox-normal .bar-item p,
			.dark-theme .barbox-normal .bar-item  .bar-item p,
			.collection-item p,
			.dark-theme  .collection-item p {
				font-size:12px;
				transition: all 0.3s ease;
			}
        }
		@media (max-width: 395px) {
            .bar-item {           			
				aspect-ratio: 1/1.37;
        	}
			.collection-item {           			
				aspect-ratio: 1/1.37;
        	}
			.bar-item p,
			.dark-theme  .bar-item p,
			.barbox-normal .bar-item p,
			.dark-theme .barbox-normal .bar-item  .bar-item p,
			.collection-item p,
			.dark-theme  .collection-item p {
				font-size:11.5px;
				transition: all 0.3s ease;
			}
			.shortcut-icon,
			.add-shortcut .shortcut-icon,
			.add-shortcut .shortcut-icon,
			.bar-item .shortcut-icon,
			.dark-theme .bar-item .shortcut-icon,
			.collection-item .shortcut-icon,
			.dark-theme .collection-item .shortcut-icon {
				padding: 14px;
				font-size:20px;
				transition: all 0.3s ease;
			}
        }
        
        .context-menu {
            position: absolute;
			display: flex;
			flex-direction: column;
            z-index: 1001;
            min-width: 150px;
			position: absolute;
            top: calc(100% + 8px);
            left: 0;
            width: 150px;
            background-color: rgba(255, 255, 255, 0.65);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);	
            border-radius: 25px;
            box-shadow: 0 10px 32px rgba(0, 0, 0, 0.15);
            padding: 4px;
			gap: 4px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1);	
			animation: context-menu 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.05) forwards;
			//transform-origin: top;
        }

		//@keyframes context-menu { from { max-height: 0px; overflow: hidden; opacity: 0; transform: perspective(800px) rotateX(-80deg); transform-origin: top; pointer-events: none;	transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.05); } to { max-height: 400px; opacity: 1; pointer-events: auto; transform: perspective(800px) rotateX(0deg)} }

		@keyframes context-menu { from { opacity: 0; } to { opacity: 1; } }
        
        .dark-theme .context-menu {
            background-color: rgba(35, 35, 35, 0.60);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.20);		
        }
        
        .context-menu-item {
            padding: 12px 6px 12px 16px;
			border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: #404040;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
			-webkit-tap-highlight-color: transparent;
        }
		.dark-theme .context-menu-item {
            color: #eee;
        }
        
        .context-menu-item:hover {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
            color: var(--themeColor);
        }
        
        .dark-theme .context-menu-item:hover {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
            color: var(--themeColor);
        }

		.context-menu-item svg {
			display: inline-block;
			height:15px;            
			width:15px;
			margin-right:8px;
			transform: scale(1) translateY(0.2px);
			transition: all 0.2s ease;
        }

		.context-menu-item:first-child {
  			border-radius: 21px 21px 5px 5px;
		}
		.context-menu-item:last-child {
  			border-radius: 5px 5px 21px 21px;
		}

		.context-menu-item p {
			transform: scaleY(1);
			transition: all 0.2s ease;
        }

		.context-menu-item:active {
			transform: scale(0.96, 0.9);
        }
		.context-menu-item:active p {
			transform: scaleY(1.08);
			transition: all 0.2s ease;
        }
		.context-menu-item:active svg {
			transform: scaleY(1.08) translateY(0.2px);
			transition: all 0.2s ease;
        }

		@media (max-width: 600px) {

		.context-menu {
            width: 132px;
			min-width: 132px;
            gap: 4px;
            border-radius: 25px;	
        }
		.context-menu-item {
            padding: 10px 4px 10px 14px;
			border-radius: 5px;
            font-size: 14px;
        }
		.context-menu-item:first-child {
  			border-radius: 21px 21px 5px 5px;
		}
		.context-menu-item:last-child {
  			border-radius: 5px 5px 21px 21px;
		}
		.context-menu-item svg {
			height:13px;            
			width:13px;
			margin-right:8px;
        }
		}

		.low-context-menu {
			background-color: white;
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);	
		}
		.dark-theme .low-context-menu {
			background-color: #303030;
			-webkit-backdrop-filter: blur(0px) saturate(0%);
			backdrop-filter: blur(0px) saturate(0%);	
		}
		

        .shortcutmodal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
        }

		.dark-theme .shortcutmodal {
            background: rgba(0,0,0,0.25);
        }

        .shortcutmodal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .shortcutmodal-content {
            background: white;
            border-radius: 25px;
            padding: 23px 25px 25px 25px;
            width: 90%;
            max-width: 400px;
            //transform: translateY(15px);
			transform: translateY(35px) perspective(800px) rotateX(-80deg) scale(0.5);
            box-shadow: 0 8px 40px rgba(0,0,0,0.2);
            //transition: all 0.25s ease;
			transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1);
        }

        .shortcutmodal.active .shortcutmodal-content {
            //transform: translateY(0);
			transform: translateY(0px) perspective(800px) rotateX(0deg) scale(1);
        }
        
        .dark-theme .shortcutmodal-content {
            background: #232323;
			box-shadow: 0 8px 40px rgba(0,0,0,0.4);
        }

		.liteshortcutmodal-content {
			transform: translateY(15px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
		}
		.dark-theme .liteshortcutmodal-content {
			transform: translateY(15px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
		}
		.shortcutmodal.active .liteshortcutmodal-content {
			transform: translateY(0px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
		}
		.shortcutmodal.active .dark-theme .liteshortcutmodal-content {
			transform: translateY(0px) perspective(0px) rotateX(0deg) scale(1);
			transition: all 0.25s ease;
		}

		.lowshortcutmodal-content {
			background-color: rgba(255, 255, 255, 1);
			-webkit-backdrop-filter: blur(0px) saturate(100%);
			backdrop-filter: blur(0px) saturate(100%);	
		}
		.dark-theme .lowshortcutmodal-content {
			background-color: rgba(35, 35, 35, 1);
			-webkit-backdrop-filter: blur(0px) saturate(100%);
			backdrop-filter: blur(0px) saturate(100%);	
		}
		.shortcutmodal.active .lowshortcutmodal-content {
			background-color: rgba(255, 255, 255, 1);
			-webkit-backdrop-filter: blur(0px) saturate(100%);
			backdrop-filter: blur(0px) saturate(100%);	
		}
		.dark-theme .shortcutmodal.active .lowshortcutmodal-content {
			background-color: rgba(35, 35, 35, 1);
			-webkit-backdrop-filter: blur(0px) saturate(100%);
			backdrop-filter: blur(0px) saturate(100%);	
		}
        
        .shortcutmodal-title {
            margin-top: 0;
            margin-bottom: 20px;
			color: var(--themeColor);
        }
        
        .dark-theme .shortcutmodal-title {
			color: var(--themeColor);
        }

		.shortcutmodal-title svg {
			display: inline-block;
			height:18px;            
			width:18px;
			margin-right:7px;
			transform: scale(1) translateY(2px);
        }
		.shortcutmodal-title p {
			display: inline-block;
			font-size:18px;
			font-weight:500;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
			font-size: 14px;
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #555;
        }
        
        .dark-theme .form-group label {
            color: #ccc;
        }
        
        .form-group input {
            width: 100%;
            padding: 11px;
            border: 1px solid #f5f5f5;
            border-radius: 16px;
			min-height: 46px;
			background: #f5f5f5;
            font-size: 15px;
            box-sizing: border-box;
			-webkit-tap-highlight-color: transparent;
            outline: none;
			transition: all 0.2s ease;
        }
        
        .dark-theme .form-group input {
            background: #2d2d2d;
            border-color: #2d2d2d;
            color: #f0f0f0;
        }

		.form-group input:focus {
			border-color: var(--themeColor);
  			box-shadow: none;
        }

		.dark-theme .form-group input:focus {
			border-color: var(--themeColor);
  			box-shadow: none;
        }

		.form-group textarea {
            width: 100%;
			height:150px;
            padding: 11px;
            border: 1px solid #f5f5f5;
            border-radius: 16px;
			background: #f5f5f5;
			font-family: inherit;
            font-size: 15px;
            box-sizing: border-box;
			-webkit-tap-highlight-color: transparent;
            outline: none;
			resize: none;
			transition: all 0.2s ease;
        }
        
        .dark-theme .form-group textarea {
            background: #2d2d2d;
            border-color: #2d2d2d;
            color: #f0f0f0;
        }

		.form-group textarea:focus {
			border-color: var(--themeColor);
  			box-shadow: none;
        }

		.dark-theme .form-group textarea:focus {
			border-color: var(--themeColor);
  			box-shadow: none;
        }

		@media (max-height: 320px) {
            .form-group textarea {
                height:120px;
            }
        }
		@media (max-height: 290px) {
            .form-group textarea {
                height:100px;
            }
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
		.modal-actions .md-btn {
            margin-right: 0px;
			margin-top: 0px;
        }

		/* 自定义弹窗样式 */
    	.custom-modal-content {
      		width: 80%;
      		max-width: 360px;
    	}

		.usage-container {
            padding: 0px;
        }
        
        .usage-info {
            display: flex;
            //justify-content: space-between;
			align-items: center;
            margin-bottom: 10px;
            font-size: 0.9rem;
			gap: 5px;
			color: #333333;
        }
		.dark-theme .usage-info {
            font-size: 0.9rem;
			color: #f0f0f0;
        }
		.usage-info span:last-child {
    		margin-left: auto;
		}
        
        .usage-bar {
            width: 100%;
            height: 16px;
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
			//margin-bottom: 4px;
        }
		.dark-theme .usage-bar {
            background: #181818;
        }
        
        .used-space {
            height: 100%;
            border-radius: 12px;
			background-color: var(--themeColor);
            transition: all 0.3s ease;
        }
		.dark-theme .used-space {
			background-color: var(--themeColor);
        }


		/* 固定便签区域 */
        .pinned-notes {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10;
			transform: translateX(0px);
			transition: all 0.2s ease;
        }
		.pinned-notes:hover {
            transform: translateX(0px);
        }
        
        .pinned-note {
			background-color: rgba(248, 248, 248, 0.65);
			-webkit-backdrop-filter: blur(20px) saturate(200%);
			backdrop-filter: blur(20px) saturate(200%);	
            border-radius: 18px;
            padding: 12px 12px 11px 12px;
            width: 200px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary-color);
            cursor: pointer;
			-webkit-tap-highlight-color: transparent;
			transform: translateX(0px);
			color: #333333;
            transition: all 0.2s ease;
        }
		.dark-theme .pinned-note {
			color: #f0f0f0;
			background-color: rgba(30, 30, 30, 0.60);
        }
        
        .pinned-note:hover {
            transform: scale(1.03);
        }
		.pinned-note:active {
            transform: scale(0.97);
        }
        
        .pinned-note h4 {
            font-size: 14px;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .pinned-note p {
            font-size: 12px;
            height: 34px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
			text-overflow: ellipsis;
            -webkit-box-orient: vertical;
        }
        
        .pinned-note .pinned-time {
            font-size: 10px;
            color: #888;
            margin-top: 5px;
            text-align: right;
        }
        
        /* 主布局 */
        .notecontainer {
            display: flex;
            width: 100%;
            height: 100%;
			padding:66px 10px 10px 10px;
        }

		.modal-body-note {
            padding: 0px 14px 14px 14px;
            overflow-y: auto;
			height: 100%;
			scrollbar-width: none;
        }
        
        /* 左侧便签列表 */
        .sidebar {
            width: 200px;
            background: rgba(150,150,150,0);
            border-right: 1px solid var(--border-color);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 0px 7px 0px 0px;
        }

		.btn-new {            
            position: relative;
			display:flex;
			font-size:13px;
			width: 100%;
			padding:10px 15px;
			margin-right:7px;
			margin-bottom:7px;
            background: var(--themeColor);
            border-radius: 25px;
            cursor: pointer;
			align-items: center;
            justify-content: center;
			text-align: center;
			-webkit-tap-highlight-color: transparent;
            transition: all 0.3s ease;
        }

		.dark-theme .btn-new {            
            background: var(--themeColor);
        }

		.btn-new:hover {            
            border-radius: 12px;
        }
		.btn-new:active {            
			transform: scale(0.9);
        }

		.btn-new span {
			font-size:13px;
			color: #ffffff;
        }
		.dark-theme .btn-new span {
			font-size:13px;
			color: var(--themeColorText);
        }

		.btn-new svg {
			color: #ffffff;
        }
		.dark-theme .btn-new svg {
			color: var(--themeColorText);
        }


        
        .notes-list {
            overflow-y: auto;
            flex: 1;
            position: relative;
			border-radius:15px;
			margin-right:7px;
        }
        
        .note-item {
            padding: 15px 15px 13px 15px;
            cursor: pointer;
			background: rgba(255, 255, 255, 0.6);         
            position: relative;
			margin-bottom:7px;
			border-radius:15px;
			-webkit-tap-highlight-color: transparent;
			transition: all 0.2s ease;
        }
		.dark-theme .note-item {
			background: rgba(0, 0, 0, 0.22);
        }
        
        .note-item:hover {
            box-shadow:inset 0 0 0 0.8px var(--themeColorShadow);
        }

		.dark-theme .note-item:hover {
            box-shadow:inset 0 0 0 0.8px var(--themeColorShadow);
        }
	
        
        .note-item.selected {
            box-shadow:inset 0 0 0 0.8px var(--themeColor);
        }
		
		.dark-theme .note-item.selected {
            box-shadow:inset 0 0 0 0.8px var(--themeColor);
        }
	
        
        .note-title {
            font-weight: 500;
            font-size: 16px;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .note-content {
            font-size: 14px;
            color: #666;
            height: 40px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

		.dark-theme .note-content {
            color: #bbb;
        }
        
        .note-time {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }

		.pinned {
			position:absolute;
			top:6px;
			right:6px;
			color:var(--themeColor);
			font-size:12px;
			width: 15px;
			height: 15px;
			transform: rotate(45deg);
		}
        
        /* 右侧编辑区域 */
        .editor {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.7);
            height: 100%;
			border-radius:15px;
        }

		.dark-theme .editor {
			background: rgba(0, 0, 0, 0.3);
        }
        
        .editor-header {
            padding: 15px 20px 5px 20px;
            border: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .note-title-input {
            font-size: 18px;
            border: none;
			background: none;
            font-weight: 600;
            padding: 0px;
            width: 72%;
			height: 100%;
            color: #333333;
			box-shadow: none;
        }
		.dark-theme .note-title-input {
            color: #f0f0f0;
			box-shadow: none;
        }

		.note-title-input:focus {
            outline: none;
			box-shadow: none;
        }
        
        .editor-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
			margin-right:-6px;
            transition: all 0.2s;
            background: none;
			color: var(--themeColor);
            border: 1px solid var(--border-color);
        }
		.dark-theme .action-btn {
			color: var(--themeColor);
        }
		.action-btn svg {
            width: 20px;
            height: 20px;
        }

		.pin-btn:hover {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
        }
        
        .pin-btn.active {
            background-color: var(--themeColor);
			color: var(--themeColorText);
        }
        
        .delete-btn:hover {
            background-color: color-mix(in srgb, var(--themeColor) 7%, transparent);
        }
        
        .editor-body {
            flex: 1;
            padding: 5px 20px 0px 20px;
			margin-bottom: 0px;
        }
        
        .note-content-input {
            width: 100%;
            height: 100%;
            padding: 0px;
            border: none;
            resize: none;
            font-size: 16px;
            line-height: 1.6;
			background: none;
            color: #333333;
            font-family: inherit;
			box-shadow: none;
        }
		.dark-theme .note-content-input {
            color: #f0f0f0;
			box-shadow: none;
        }
        
        .note-content-input:focus {
            outline: none;
			box-shadow: none;
        }

		.placeholder {
            position: relative;
            color: #aaa;
            font-size: 16px;
			transform: translateY(15px);
        }

		@media (max-width: 600px) {
            .modal-body-note {
                padding: 0px 5px 5px 5px;
            }
			.sidebar {
            	width: 130px;
        	}
			.note-item {
            	padding: 13px 13px 11px 13px;
        	}
            .editor-body {
            	flex: 1;
            	padding: 10px 15px 0px 15px;
        	}
			.editor-header {
            	padding: 12px 15px 0px 15px;
        	}
            .placeholder {
			    transform: translateY(6px);
            }
			.note-title {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .note-content {
            font-size: 12px;
			height: 34px;
        }
		.note-time {
            font-size: 11px;
			margin-top: 4px;
        }
		.pinned {
			position:absolute;
			top:6px;
			right:6px;
			color:var(--themeColor);
			width: 13px;
			height: 13px;
		}
		.note-title-input {
            font-size: 15px;
            font-weight: 600;
        }
		.note-content-input {
            font-size: 13px;
            line-height: 1.6;
        }
		.action-btn {
            width: 24px;
            height: 24px;
			margin-right:-6px;
            border: 1px solid var(--border-color);
        }
		.action-btn svg {
            width: 16px;
            height: 16px;
        }
        }

		@media (max-width: 600px) {
            .logo-container {
                top: calc(50vh - 250px);
            }
			.search-container {
				top: calc(50vh - 150px);
        	}
			.search-container2 {
				top: calc(50vh - 100px);
        	}
        }

		@media (max-height: 500px) and (max-width: 600px) {
            .logo-container {
                top: calc(50vh - 250px);
            }
			.search-container {
				top: calc(50vh - 170px);
        	}
			.search-container2 {
				top: calc(50vh - 120px);
        	}
			.footer {
            	opacity:0;
				font-size: 0px;
				padding: 0px;
        	}
			.pinned-notes {
				transform: translateX(-200px);
        	}
        }

        @media (max-height: 380px) and (min-width: 600px) {
            .logo-container {
                top: calc(50vh - 230px);
            }
			
			.footer {
            	opacity:1;
				font-size: 13px;
				padding: 4px;
        	}
			.pinned-note {
				transform: translateX(0px);
        	}
			body {
				overflow: auto;
			}
        }
        @media (max-height: 150px) and (min-width: 600px) {
			.logo-container {
                top: calc(50vh - 190px);
            }
			.search-container {
				top: calc(50vh - 100px);
        	}
			.search-container2 {
				top: calc(50vh - 50px);
        	}
			.footer {
            	opacity:0;
				font-size: 0px;
				padding: 0px;
        	}
			.pinned-note {
				transform: translateX(-200px);
        	}
			body {
				overflow: auto;
			}
        }
        @media (max-height: 405px) and (max-width: 600px) {
            .logo-container {
                top: calc(50vh - 250px);
            }
			.search-container {
				top: calc(50vh - 180px);
        	}
			.search-container2 {
				top: calc(50vh - 130px);
        	}
			.footer {
            	opacity:0;
				font-size: 0px;
				padding: 0px;
        	}
			.pinned-note {
				transform: translateX(-200px);
        	}
			body {
				overflow: auto;
			}
        }


    </style>
</head>
<body>
	<div id="pageBackground" class="background"></div>
    <div class="header">
		<div class="header-box" id="header-box">
			<svg xmlns="http://www.w3.org/2000/svg" id="themeToggle" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M7.455 2.004a.75.75 0 0 1 .26.77 7 7 0 0 0 9.958 7.967.75.75 0 0 1 1.067.853A8.5 8.5 0 1 1 6.647 1.921a.75.75 0 0 1 .808.083Z" clip-rule="evenodd"/></svg>
			<svg xmlns="http://www.w3.org/2000/svg" id="noteModalBtn" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M3.5 2A1.5 1.5 0 0 0 2 3.5V15a3 3 0 1 0 6 0V3.5A1.5 1.5 0 0 0 6.5 2h-3Zm11.753 6.99L9.5 14.743V6.257l1.51-1.51a1.5 1.5 0 0 1 2.122 0l2.121 2.121a1.5 1.5 0 0 1 0 2.122ZM8.364 18H16.5a1.5 1.5 0 0 0 1.5-1.5v-3a1.5 1.5 0 0 0-1.5-1.5h-2.136l-6 6ZM5 16a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd"/></svg>
			<svg xmlns="http://www.w3.org/2000/svg" id="openModalBtn" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm8 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm-3-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm7 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd"/></svg>
		</div>
    </div>

    <div class="main">
        <div class="logo-container" id="logo-container">
            <p src="momotanlight.png" alt="Momotan" class="logo" id="logo">Momotan</p>
        </div>
        
        <div class="search-container">
			
            <form class="search-form" id="searchForm">
				<div class="custom-select-container">
                    <div class="custom-select" id="customSelect" tabindex="2">
                        <div class="select-icon"></div>
        <div class="select-text" style="display: none;">必应</div>
                    </div>
                </div>
				
                <input tabindex="1" type="text" class="search-input" id="searchInput" data-lang="search-input" placeholder="搜索…" autocomplete="off" autofocus>
				<span class="clear-button" id="clearButton" tabindex="0">
    				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        				<line x1="18" y1="7" x2="7" y2="18"></line>
        				<line x1="7" y1="7" x2="18" y2="18"></line>
    				</svg>
				</span>
                <button type="submit" class="search-button" tabindex="0">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
                <!-- 联想建议框和历史记录框 -->
                <div class="suggestions-box" id="suggestionsBox"></div>
            </form>
			<div class="custom-options" id="customOptions">
                        <div class="custom-option" data-value="metaso" tabindex="0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><polyline points="2,20 8.5,4 15,20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><line x1="15.5" y1="4" x2="15.5" y2="4" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><line x1="17.9" y1="10" x2="22" y2="20" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <div class="select-text" data-lang="metaso">秘塔 AI</div>
                        </div>
                        <div class="custom-option" data-value="baidu" tabindex="0">
<svg xmlns="http://www.w3.org/2000/svg" width="2295" height="2500" viewBox="0 0 23.868 26"><path d="M3.613 13.701c2.827-.608 2.442-3.986 2.357-4.725-.138-1.139-1.477-3.128-3.296-2.971C.386 6.21.052 9.515.052 9.515c-.309 1.528.74 4.793 3.561 4.186zm3.002 5.875c-.083.238-.268.846-.107 1.375.315 1.187 1.346 1.24 1.346 1.24h1.48v-3.619H7.749c-.713.213-1.057.767-1.134 1.004zM8.86 8.035c1.562 0 2.823-1.797 2.823-4.019C11.683 1.796 10.421 0 8.86 0 7.301 0 6.036 1.796 6.036 4.016c0 2.222 1.265 4.019 2.824 4.019zm6.724.265c2.087.271 3.429-1.956 3.695-3.644.272-1.686-1.074-3.644-2.552-3.98-1.48-.339-3.329 2.032-3.497 3.578-.2 1.89.271 3.778 2.354 4.046zm5.114 9.923s-3.229-2.498-5.113-5.198c-2.555-3.981-6.185-2.361-7.399-.337-1.209 2.024-3.093 3.305-3.36 3.644-.271.334-3.9 2.293-3.095 5.871.806 3.576 3.635 3.508 3.635 3.508s2.085.205 4.504-.336c2.42-.537 4.503.134 4.503.134s5.652 1.893 7.199-1.751c1.545-3.645-.874-5.535-.874-5.535zm-9.671 5.423H7.352c-1.587-.316-2.219-1.4-2.299-1.584-.078-.188-.528-1.059-.29-2.539.686-2.219 2.642-2.379 2.642-2.379h1.956V14.74l1.666.025v8.881zm6.844-.025h-4.229c-1.639-.423-1.716-1.587-1.716-1.587v-4.677l1.716-.027v4.203c.104.447.661.529.661.529h1.742v-4.705h1.825v6.264zm5.986-12.486c0-.808-.671-3.239-3.159-3.239-2.492 0-2.825 2.295-2.825 3.917 0 1.548.131 3.71 3.227 3.641 3.096-.068 2.757-3.507 2.757-4.319z" fill="currentColor" /></svg>
                            <div class="select-text" data-lang="baidu">百度</div>
                        </div>
                        <div class="custom-option" data-value="bing" tabindex="0">
<svg viewBox="-32 0 320 320" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path d="M95.055,82.908 L127.636,153.555 L175.78,175.332 L2.125,266.695 L73.279,203.267 L73.279,22.449 L0,0 L0,268.932 L72.83,319.986 L256,210.88 L256,132.227 L95.055,82.908" fill="currentColor"></path></g></svg>
                            <div class="select-text" data-lang="bing">必应</div>
                        </div>
                        <div class="custom-option" data-value="google" tabindex="0">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><path d="M12 10v4.5h6.47c-.5 2.7-3 4.74-6.47 4.74-3.9 0-7.1-3.3-7.1-7.25S8.1 4.75 12 4.75c1.8 0 3.35.6 4.6 1.8l3.4-3.4C18 1.2 15.24 0 12 0 5.4 0 0 5.4 0 12s5.4 12 12 12c7 0 11.5-4.9 11.5-11.7 0-.8-.1-1.54-.2-2.3H12z"/></svg>
                            <div class="select-text" data-lang="google">谷歌</div>
                        </div>
                        <div class="custom-option" data-value="duckduckgo" tabindex="0">
<svg enable-background="new 0 0 515.91 728.5" id="Layer_1" version="1.1" viewBox="0 0 512.00003 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
    <g id="g4247" transform="matrix(0.33013561,0,0,0.33013561,-398,-910) scale(1.55)">
      <path d="m 1050.1466,1793.3435 c -3.778,-0.08 -7.3883,0.051 -10.8077,0.3463 -7.9259,0.6868 -22.8904,2.8667 -33.2546,4.8497 l -18.84414,3.6027 -11.08485,15.7958 c -6.09666,8.697 -11.44864,16.7987 -11.9162,17.9435 -0.52543,1.2856 8.79759,1.3639 24.38666,0.2771 41.93753,-2.9234 69.41673,-0.38 103.92013,9.6298 l 14.4102,4.2263 -13.3017,5.9581 c -21.3578,9.5926 -38.331,14.7136 -63.1142,19.1213 -22.4505,3.993 -31.29962,7.8931 -36.37201,15.9345 -1.27081,2.0142 -1.71882,4.3085 -0.97016,5.0576 0.74907,0.7486 11.16927,0.2264 23.13987,-1.1085 38.5825,-4.3023 80.5233,-5.2529 104.7514,-2.4249 29.8263,3.4812 36.042,5.6265 22.4469,7.7594 -22.7178,3.5644 -53.2942,13.0779 -72.1209,22.3775 -52.2109,25.7908 -84.90895,71.0312 -94.15151,130.3855 -3.39816,21.8228 -2.87186,69.617 1.0391,97.4774 7.80481,55.5991 31.12671,173.9225 61.31311,310.7912 9.681,43.896 25.4984,116.2245 35.1247,160.73 9.6265,44.5056 20.07,92.256 23.2088,106.1373 0.6139,2.7142 1.0384,4.5856 1.5935,7.0666 29.8311,18.7825 148.6221,53.033 301.092,0 -23.9031,-34.3276 -68.6566,-105.4905 -68.6566,-109.6014 0,-0.5354 10.2256,2.9732 22.7239,7.7594 30.6276,11.7285 62.0259,20.0961 72.1206,19.2599 7.1795,-0.5945 8.8384,-1.8804 12.6784,-9.5606 4.0482,-8.0969 4.4339,-13.3019 4.4339,-59.8581 0,-56.0723 -2.6492,-77.37 -10.9465,-87.0158 -4.2011,-4.8845 -5.9877,-5.4336 -13.1629,-4.0875 -13.5364,2.5396 -49.4679,22.2595 -76.7626,42.1224 -14.0225,10.2043 -25.8627,17.3889 -26.3265,16.0037 -2.0604,-6.1514 -8.0537,-10.2536 -14.9645,-10.2536 -6.4383,0 -7.8438,-1.0665 -10.8771,-8.3136 -5.8604,-14.0017 -18.446,-60.3946 -22.1003,-81.4736 -4.9035,-28.2818 -4.6713,-83.1362 0.3463,-83.1362 0.5178,0 5.6107,2.3655 11.3619,5.2653 20.4095,10.2898 72.8931,30.0429 94.7063,35.6792 48.8273,12.6167 76.1247,11.7586 140.0844,-4.4339 68.66,-17.3822 96.5769,-32.2642 96.5769,-51.4058 0,-3.5551 -2.1084,-7.6039 -5.2653,-10.1843 -4.8009,-3.9236 -7.6137,-4.1901 -31.8689,-2.9097 -14.632,0.7724 -37.5779,2.87 -50.9903,4.711 -86.7703,11.91 -113.0806,12.3351 -145.2114,2.1476 -32.7393,-10.3798 -47.9909,-20.1252 -55.2858,-35.1943 -2.4999,-5.1643 -4.5723,-12.4088 -4.5723,-16.1422 0,-11.7318 3.084,-12.5461 36.0257,-9.5607 70.9211,6.4274 73.1258,6.1663 134.6808,-13.7867 85.9415,-27.8579 157.6433,-60.6948 169.5287,-77.6633 12.637,-18.0418 -12.0523,-32.7002 -55.0085,-32.7002 -22.1225,0 -47.7405,6.0361 -118.3307,27.8506 -26.1117,8.0693 -47.8974,14.247 -48.427,13.7175 -0.5295,-0.5296 0.2106,-8.6053 1.6628,-17.9435 7.8542,-50.5216 -21.1138,-147.6786 -62.4215,-209.4343 -24.135,-36.0822 -53.0965,-57.5041 -94.2903,-69.7655 -16.5639,-4.9301 -18.8358,-6.3667 -34.571,-22.1003 -46.5594,-46.5547 -140.7107,-88.7434 -197.379,-89.9257 z m 300.3989,208.4644 c 14.0407,0.3145 27.0813,6.649 34.7785,17.4585 4.7212,6.6308 4.8372,7.0671 0.9007,5.4733 -17.9487,-7.2675 -24.4933,-8.4149 -42.261,-7.4822 -14.791,0.7763 -20.048,2.0152 -25.2871,5.8886 -5.5968,4.1382 -6.6509,4.3703 -6.6509,1.3165 0,-6.0452 14.0862,-18.1679 24.3173,-20.9226 4.725,-1.2724 9.522,-1.8368 14.2025,-1.7321 z m -262.0181,14.3411 c 11.7572,-0.3962 23.7036,2.8882 30.2062,8.6598 l 5.9583,5.2653 -7.4131,-2.4941 c -12.4396,-4.1587 -33.5013,-1.1379 -48.6347,6.9281 -16.0283,8.5433 -22.0524,14.5365 -25.9798,25.911 l -2.9099,8.5214 -1.5934,-6.3044 c -1.9114,-7.5579 1.782,-20.9068 7.898,-28.6822 5.5623,-7.0713 20.1123,-14.2722 34.4319,-16.9736 2.6236,-0.4948 5.3234,-0.74 8.0365,-0.8313 z m 281.4857,69.4188 c 9.5751,0 23.0416,8.5242 28.3355,17.9434 8.3062,14.7786 4.0214,31.0872 -11.2231,42.4689 -5.843,4.3622 -20.601,6.9167 -26.3265,4.5725 -14.8021,-6.06 -25.8936,-23.8404 -23.3475,-37.4113 2.6081,-13.9026 18.7193,-27.5735 32.5616,-27.5735 z m 15.6574,14.3409 c -1.5616,-0.057 -3.2408,0.2797 -4.9188,1.1778 -7.5514,4.0416 -4.2726,15.5189 4.4339,15.5189 1.9509,0 4.7721,-1.1696 6.235,-2.6327 5.7413,-5.7413 1.0168,-13.8115 -5.7501,-14.064 z m -271.232,3.7413 c 7.2936,-0.2734 10.6576,0.9824 18.2899,5.8887 6.7644,4.3486 11.8156,9.8453 14.9646,16.3501 5.6532,11.6786 5.8951,16.9605 1.3162,27.9201 -8.4141,20.1374 -28.1529,30.2987 -46.1406,23.8324 -10.5076,-3.7772 -20.9409,-13.2136 -25.0101,-22.7239 -9.6561,-22.5678 7.5988,-49.0796 33.1851,-51.0597 1.2258,-0.095 2.3528,-0.1684 3.3949,-0.2084 z m 16.5578,15.1723 c -9.5709,-0.1264 -13.835,12.8569 -5.7502,17.5279 4.2898,2.4789 11.9071,0.998 14.4104,-2.8405 3.3116,-5.0796 -2.301,-14.6041 -8.6602,-14.6874 z" fill="currentColor"/>
    </g>
  </svg>
                            <div class="select-text" data-lang="DDG">DDG</div>
                        </div>
                    </div>
        </div>
		<div class="search-container2" id="barSearchContainer">
			<div class="collectionbox barbox" id="bar"></div>
		</div>
    </div>
    
<!-- 更多 -->
	<!-- 右键菜单 -->
    <div class="context-menu" id="contextMenu" style="display: none;">
        <div class="context-menu-item" id="editShortcut">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
			<p data-lang="edit">编辑捷径</p>
		</div>
        <div class="context-menu-item" id="toggleHomeShortcut">
			<svg fill="currentColor" viewBox="0 0 16 16"><path d="M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z"></path></svg>
			<p id="toggleHomeShortcutText" data-lang="add-to-home">添加到主页</p>
		</div>
        <div class="context-menu-item" id="deleteShortcut">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
			<p data-lang="delete">删除捷径</p>
		</div>
		<div class="context-menu-item" id="moveBackward">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="21" y1="12" x2="3" y2="12"/><polyline points="10 19 3 12 10 5"/></svg>
			<p data-lang="move-forward">向前移动</p>
		</div>
        <div class="context-menu-item" id="moveForward">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><polyline points="14 5 21 12 14 19"/></svg>
			<p data-lang="move-backward">向后移动</p>
		</div>
    </div>
	<!-- 添加/编辑捷径模态框 -->
    <div class="shortcutmodal" id="shortcutModal">
        <div class="shortcutmodal-content">
            <h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg><p  id="modalTitle">添加捷径</p></h3>
            <div class="form-group">
                <label for="shortcutUrl" data-lang="shortcutUrl">捷径网址</label>
                <input type="text" id="shortcutUrl" data-lang="shortcutUrlplaceholder" placeholder="输入链接">
            </div>
            <div class="form-group">
                <label for="shortcutName" data-lang="shortcutName">捷径名称</label>
                <input type="text" id="shortcutName" data-lang="shortcutNameplaceholder" placeholder="输入名称 - 留空则自动获取">
            </div>
            
            <div class="modal-actions">
                <button class="md-btn md-btn-second" id="cancelBtn">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="5" x2="19" y2="19"/><line x1="5" y1="19" x2="19" y2="5"/></svg>
					<p data-lang="cancel">取消</p>
				</button>
                <button class="md-btn" id="saveBtn">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
					<p data-lang="save">保存</p>
				</button>
            </div>
        </div>
    </div>
	<!-- 导出数据模态框 -->
	<div id="exportModal" class="shortcutmodal">
  		<div class="shortcutmodal-content">
    		<h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 6.75a.75.75 0 0 1 1.5 0v2.546l.943-1.048a.75.75 0 0 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V8.75Z" clip-rule="evenodd"/></svg><p data-lang="export-shortcut-deta">导出捷径数据</p></h3>
			<div class="form-group">
    			<textarea id="exportData" readonly></textarea>
			</div>
			<div class="modal-actions">
    			<button class="md-btn md-btn-second" onclick="copyExportData()">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
					<p data-lang="copy">复制</p>
				</button>
    			<button class="md-btn" onclick="hideExportModal()">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="5" x2="19" y2="19"/><line x1="5" y1="19" x2="19" y2="5"/></svg>
					<p data-lang="close">关闭</p>
				</button>
			</div>
  		</div>
		</div>

	<!-- 导入数据模态框 -->
	<div id="importModal" class="shortcutmodal">
  		<div class="shortcutmodal-content">
    		<h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 11.25a.75.75 0 0 0 1.5 0v-2.546l.943 1.048a.75.75 0 1 0 1.114-1.004l-2.25-2.5a.75.75 0 0 0-1.114 0l-2.25 2.5a.75.75 0 1 0 1.114 1.004l.943-1.048v2.546Z" clip-rule="evenodd"/></svg><p data-lang="import-shortcut-deta">导入捷径数据</p></h3>
			<div class="form-group">
    			<textarea id="importData" data-lang="import-shortcut-placeholder" placeholder="请粘贴捷径数据，支持 Momotan 格式与 irminsul 格式"></textarea>
			</div>
			<div class="modal-actions">
    			<button class="md-btn md-btn-second" onclick="pasteImportData()">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>
					<p data-lang="paste">粘贴</p>
				</button>
    			<button class="md-btn" onclick="importData()">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
					<p data-lang="import">导入</p>
				</button>
			</div>
  		</div>
	</div>
	<!-- 导出便签模态框 -->
  <div id="notesExportModal" class="shortcutmodal">
    <div class="shortcutmodal-content">
      <h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 6.75a.75.75 0 0 1 1.5 0v2.546l.943-1.048a.75.75 0 0 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V8.75Z" clip-rule="evenodd"/></svg><p data-lang="export-note-deta">导出便签数据</p></h3>
      <div class="form-group">
        <textarea id="exportNotesData" readonly></textarea>
      </div>
      <div class="modal-actions">
        <button class="md-btn md-btn-second" id="copyExportNotesBtn">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
			<p data-lang="copy">复制</p>
		</button>
        <button class="md-btn" id="closeNotesExportModalBtn">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="5" x2="19" y2="19"/><line x1="5" y1="19" x2="19" y2="5"/></svg>
			<p data-lang="close">关闭</p>
		</button>
      </div>
    </div>
  </div>

  <!-- 导入便签模态框 -->
  <div id="notesImportModal" class="shortcutmodal">
    <div class="shortcutmodal-content">
      <h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 11.25a.75.75 0 0 0 1.5 0v-2.546l.943 1.048a.75.75 0 1 0 1.114-1.004l-2.25-2.5a.75.75 0 0 0-1.114 0l-2.25 2.5a.75.75 0 1 0 1.114 1.004l.943-1.048v2.546Z" clip-rule="evenodd"/></svg><p data-lang="import-note-deta">导入便签数据</p></h3>
      <div class="form-group">
        <textarea id="importNotesData" data-lang="import-note-placeholder" placeholder="请粘贴便签数据"></textarea>
      </div>
      <div class="modal-actions">
        <button class="md-btn md-btn-second" id="pasteImportNotesBtn">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>
			<p data-lang="paste">粘贴</p>
		</button>
        <button class="md-btn" id="importNotesDataBtn">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
			<p data-lang="import">导入</p>
		</button>
      </div>
    </div>
  </div>

  <!-- 登录模态框 -->
    <div class="shortcutmodal" id="userLoginModal">
        <div class="shortcutmodal-content">
            <h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"/></svg><p>登录</p></h3>
            <div class="form-group">
                <label for="userNameInput">用户名</label>
                <input type="text" id="userNameInput">
            </div>
            <div class="form-group">
                <label for="userPasswordInput">密码</label>
                <input type="text" id="userPasswordInput">
            </div>
            
            <div class="modal-actions">
                <button class="md-btn md-btn-second" id="userLoginCancelBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="5" x2="19" y2="19"/><line x1="5" y1="19" x2="19" y2="5"/></svg>
					<p>取消</p></button>
                <button class="md-btn" id="userLoginBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
					<p>登录</p></button>
            </div>
        </div>
    </div>

	<!-- 注册模态框 -->
    <div class="shortcutmodal" id="userRegisterModal">
        <div class="shortcutmodal-content">
            <h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M10 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM1.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 7 18a9.953 9.953 0 0 1-5.385-1.572ZM16.25 5.75a.75.75 0 0 0-1.5 0v2h-2a.75.75 0 0 0 0 1.5h2v2a.75.75 0 0 0 1.5 0v-2h2a.75.75 0 0 0 0-1.5h-2v-2Z"/></svg><p>注册</p></h3>
            <div class="form-group">
                <label for="userRegisterNameInput">用户名</label>
                <input type="text" id="userRegisterNameInput" placeholder="只能包含字母、数字和下划线">
            </div>
            <div class="form-group">
                <label for="userRegisterPasswordInput">密码</label>
                <input type="text" id="userRegisterPasswordInput" placeholder="不少于6位">
            </div>
			<div class="form-group">
                <label for="userRegisterPasswordInput">邀请码</label>
                <input type="text" id="userInvitationCodeInput" placeholder="选填">
            </div>
            
            <div class="modal-actions">
                <button class="md-btn md-btn-second" id="userRegisterCancelBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="5" x2="19" y2="19"/><line x1="5" y1="19" x2="19" y2="5"/></svg>
					<p>取消</p></button>
                <button class="md-btn" id="userRegisterBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
					<p>注册</p></button>
            </div>
        </div>
    </div>



	<!-- 自定义弹窗组件 -->
  <div id="customAlert" class="shortcutmodal">
    <div class="shortcutmodal-content custom-modal-content">
		<h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><p data-lang="tip">提示</p></h3>
      	<p id="alertMessage"></p>
	  	<div class="modal-actions">
        	<button id="alertConfirm" class="md-btn" style="margin-top:25px;">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
				<p data-lang="confirm">确定</p>
			</button>
		</div>
    </div>
  </div>

  <div id="customConfirmModal" class="shortcutmodal">
        <div class="shortcutmodal-content custom-modal-content">
			<h3 class="shortcutmodal-title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><p data-lang="tip">提示</p></h3>
            <p id="confirmMessage"></p>
        <div class="modal-actions">
            <button id="confirmCancelBtn" class="md-btn" style="margin-top:25px;">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="5" x2="19" y2="19"/><line x1="5" y1="19" x2="19" y2="5"/></svg>
				<p data-lang="cancel">取消</p>
			</button>
            <button id="confirmOkBtn" class="md-btn md-btn-second" style="margin-top:25px;">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
				<p data-lang="confirm">确定</p>
			</button>
        </div>
    </div>
</div>

    <div id="myModal" class="modal">
		<div class="modal-blur" id="modalBlur"></div>
        <div class="modal-content" id="myModalContent">
            <div class="modal-header" id="modalHeader">
                <span class="close" id="modalclose">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" transform="rotate(180, 0, 0)"><polyline points="9 5 16 12 9 19"/></svg>
                </span>
                <h2 class="modal-title" data-lang="title-more">更多</h2>
            </div>
            <div class="modal-body">
				<h2 class="modal-title-mini" style="margin-top: 12px;" data-lang="title-shortcuts">捷径</h2>
				<div class="collectionbox" id="collectionContainer"></div>
				
				<h2 class="modal-title-mini" id="viaTitile" style="display: none;">Via</h2>
				<div class="collectionbox" id="viaBox" style="display: none;">
					<a class="collections" href="v://bookmarks">
						<div class="collection-item">
							<div class="shortcut-icon shortcut-svg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg></div>
							<p>Via 书签</p>
						</div>
					</a>
					<a class="collections" href="v://history">
						<div class="collection-item">
							<div class="shortcut-icon shortcut-svg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
							<p>历史记录</p>
						</div>
					</a>
					<a class="collections" href="v://offline" target="_self">
						<div class="collection-item">
							<div class="shortcut-icon shortcut-svg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><path d="M3 9h18M9 21V9"></path></svg></div>
							<p>离线页面</p>
						</div>
					</a>
				</div>
				<!-- <h2 class="modal-title-mini">账号与同步</h2>
				<div class="setting-itemgroup">

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" id="userName">未登录</div>
                        <div class="item-description">云同步只会同步捷径与便签数据</div>
                    
					<div class="md-btn" id="userLogin">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"/></svg>
                    		<p>登录</p>
                	</div>
					<div class="md-btn md-btn-second" id="userRegister">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M10 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM1.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 7 18a9.953 9.953 0 0 1-5.385-1.572ZM16.25 5.75a.75.75 0 0 0-1.5 0v2h-2a.75.75 0 0 0 0 1.5h2v2a.75.75 0 0 0 1.5 0v-2h2a.75.75 0 0 0 0-1.5h-2v-2Z"/></svg>
                    		<p>注册</p>
                	</div>
					<div class="md-btn" id="userUpload" style="display: none;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M5.5 17a4.5 4.5 0 0 1-1.44-8.765 4.5 4.5 0 0 1 8.302-3.046 3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm3.75-2.75a.75.75 0 0 0 1.5 0V9.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0l-3.25 3.5a.75.75 0 1 0 1.1 1.02l1.95-2.1v4.59Z" clip-rule="evenodd"/></svg>
                    		<p>上传到云端</p>
                	</div>
					<div class="md-btn" id="userSynchronize" style="display: none;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M5.5 17a4.5 4.5 0 0 1-1.44-8.765 4.5 4.5 0 0 1 8.302-3.046 3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm5.25-9.25a.75.75 0 0 0-1.5 0v4.59l-1.95-2.1a.75.75 0 1 0-1.1 1.02l3.25 3.5a.75.75 0 0 0 1.1 0l3.25-3.5a.75.75 0 1 0-1.1-1.02l-1.95 2.1V7.75Z" clip-rule="evenodd"/></svg>
                    		<p>从云端同步</p>
                	</div>
					<div class="md-btn md-btn-second" id="userLogout" style="display: none;">
						<svg viewBox="0 0 16 16" fill="currentColor"><path d="M2 2.75C2 1.784 2.784 1 3.75 1h2.5a.75.75 0 0 1 0 1.5h-2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h2.5a.75.75 0 0 1 0 1.5h-2.5A1.75 1.75 0 0 1 2 13.25Zm10.44 4.5-1.97-1.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.97-1.97H6.75a.75.75 0 0 1 0-1.5Z"></path></svg>
                    		<p>退出登录</p>
                	</div>
					<div class="md-btn md-btn-second" id="userDelete" style="display: none;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                    		<p>删除账号</p>
                	</div>
					</div>
				</div>
                </div> -->

				<h2 class="modal-title-mini" data-lang="title-general-settings">常规设置</h2>
				<div class="setting-itemgroup">

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title1">语言 / Language</div>
                        <div class="item-description" data-lang="item-description1" style="display: none">Language</div>
                    </div>
					<div class="custom-select-container" style="margin-top: 0px;">
                    <div class="md-btnq" id="langSelect" tabindex="0">
                        <div class="select-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M7.75 2.75a.75.75 0 0 0-1.5 0v1.258a32.987 32.987 0 0 0-3.599.278.75.75 0 1 0 .198 1.487A31.545 31.545 0 0 1 8.7 5.545 19.381 19.381 0 0 1 7 9.56a19.418 19.418 0 0 1-1.002-2.05.75.75 0 0 0-1.384.577 20.935 20.935 0 0 0 1.492 2.91 19.613 19.613 0 0 1-3.828 4.154.75.75 0 1 0 .945 1.164A21.116 21.116 0 0 0 7 12.331c.095.132.192.262.29.391a.75.75 0 0 0 1.194-.91c-.204-.266-.4-.538-.59-.815a20.888 20.888 0 0 0 2.333-5.332c.31.031.618.068.924.108a.75.75 0 0 0 .198-1.487 32.832 32.832 0 0 0-3.599-.278V2.75Z"/><path fill-rule="evenodd" d="M13 8a.75.75 0 0 1 .671.415l4.25 8.5a.75.75 0 1 1-1.342.67L15.787 16h-5.573l-.793 1.585a.75.75 0 1 1-1.342-.67l4.25-8.5A.75.75 0 0 1 13 8Zm2.037 6.5L13 10.427 10.964 14.5h4.073Z" clip-rule="evenodd"/></svg></div>
        				<p class="select-text" data-lang="lang-select">简体中文</p>
                    </div>
					<div class="custom-options custom-options2" id="langOptions" style="z-index: 999">
                        <div class="custom-option lang-btn selected" data-lang="zh" tabindex="0">
                            <div class="select-text">简体中文</div>
                        </div>
						<div class="custom-option lang-btn" data-lang="zh-TW" tabindex="0">
                            <div class="select-text">繁體中文</div>
                        </div>
                        <div class="custom-option lang-btn" data-lang="en" tabindex="0">
                            <div class="select-text">English</div>
                        </div>
                        <div class="custom-option lang-btn" data-lang="ja" tabindex="0">
                            <div class="select-text">日本語</div>
                        </div>                        
                    </div>
                </div>
                </div>

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title2">搜索引擎选项</div>
                        <div class="item-description" data-lang="item-description2" style="display: none">也可点击搜索栏左侧图标来切换</div>
                    </div>
					<select class="engine-select" id="engineSelect" style="display: none;">
					<option value="metaso">秘塔 AI</option>
					<!--<option value="kimi">Kimi</option>-->
                    <option value="baidu">百度</option>
                    <option value="bing">必应</option>
                    <option value="google">谷歌</option>
                    <option value="duckduckgo">DDG</option>
                </select>
				<div class="custom-select-container" style="margin-top: 0px;">
                    <div class="md-btnq" id="customSelect2" tabindex="0">
                        <div class="select-icon"></div>
        				<p class="select-text">必应</p>
                    </div>
					<div class="custom-options custom-options2" id="customOptions2" style="z-index: 999">
                        <div class="custom-option" data-value="metaso" tabindex="0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><polyline points="2,20 8.5,4 15,20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><line x1="15.5" y1="4" x2="15.5" y2="4" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><line x1="17.9" y1="10" x2="22" y2="20" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <div class="select-text" data-lang="metaso">秘塔 AI</div>
                        </div>
                        <div class="custom-option" data-value="baidu" tabindex="0">
<svg xmlns="http://www.w3.org/2000/svg" width="2295" height="2500" viewBox="0 0 23.868 26"><path d="M3.613 13.701c2.827-.608 2.442-3.986 2.357-4.725-.138-1.139-1.477-3.128-3.296-2.971C.386 6.21.052 9.515.052 9.515c-.309 1.528.74 4.793 3.561 4.186zm3.002 5.875c-.083.238-.268.846-.107 1.375.315 1.187 1.346 1.24 1.346 1.24h1.48v-3.619H7.749c-.713.213-1.057.767-1.134 1.004zM8.86 8.035c1.562 0 2.823-1.797 2.823-4.019C11.683 1.796 10.421 0 8.86 0 7.301 0 6.036 1.796 6.036 4.016c0 2.222 1.265 4.019 2.824 4.019zm6.724.265c2.087.271 3.429-1.956 3.695-3.644.272-1.686-1.074-3.644-2.552-3.98-1.48-.339-3.329 2.032-3.497 3.578-.2 1.89.271 3.778 2.354 4.046zm5.114 9.923s-3.229-2.498-5.113-5.198c-2.555-3.981-6.185-2.361-7.399-.337-1.209 2.024-3.093 3.305-3.36 3.644-.271.334-3.9 2.293-3.095 5.871.806 3.576 3.635 3.508 3.635 3.508s2.085.205 4.504-.336c2.42-.537 4.503.134 4.503.134s5.652 1.893 7.199-1.751c1.545-3.645-.874-5.535-.874-5.535zm-9.671 5.423H7.352c-1.587-.316-2.219-1.4-2.299-1.584-.078-.188-.528-1.059-.29-2.539.686-2.219 2.642-2.379 2.642-2.379h1.956V14.74l1.666.025v8.881zm6.844-.025h-4.229c-1.639-.423-1.716-1.587-1.716-1.587v-4.677l1.716-.027v4.203c.104.447.661.529.661.529h1.742v-4.705h1.825v6.264zm5.986-12.486c0-.808-.671-3.239-3.159-3.239-2.492 0-2.825 2.295-2.825 3.917 0 1.548.131 3.71 3.227 3.641 3.096-.068 2.757-3.507 2.757-4.319z" fill="currentColor" /></svg>
                            <div class="select-text" data-lang="baidu">百度</div>
                        </div>
                        <div class="custom-option" data-value="bing" tabindex="0">
<svg viewBox="-32 0 320 320" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path d="M95.055,82.908 L127.636,153.555 L175.78,175.332 L2.125,266.695 L73.279,203.267 L73.279,22.449 L0,0 L0,268.932 L72.83,319.986 L256,210.88 L256,132.227 L95.055,82.908" fill="currentColor"></path></g></svg>
                            <div class="select-text" data-lang="bing">必应</div>
                        </div>
                        <div class="custom-option" data-value="google" tabindex="0">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><path d="M12 10v4.5h6.47c-.5 2.7-3 4.74-6.47 4.74-3.9 0-7.1-3.3-7.1-7.25S8.1 4.75 12 4.75c1.8 0 3.35.6 4.6 1.8l3.4-3.4C18 1.2 15.24 0 12 0 5.4 0 0 5.4 0 12s5.4 12 12 12c7 0 11.5-4.9 11.5-11.7 0-.8-.1-1.54-.2-2.3H12z"/></svg>
                            <div class="select-text" data-lang="google">谷歌</div>
                        </div>
                        <div class="custom-option" data-value="duckduckgo" tabindex="0">
<svg enable-background="new 0 0 515.91 728.5" id="Layer_1" version="1.1" viewBox="0 0 512.00003 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
    <g id="g4247" transform="matrix(0.33013561,0,0,0.33013561,-398,-910) scale(1.55)">
      <path d="m 1050.1466,1793.3435 c -3.778,-0.08 -7.3883,0.051 -10.8077,0.3463 -7.9259,0.6868 -22.8904,2.8667 -33.2546,4.8497 l -18.84414,3.6027 -11.08485,15.7958 c -6.09666,8.697 -11.44864,16.7987 -11.9162,17.9435 -0.52543,1.2856 8.79759,1.3639 24.38666,0.2771 41.93753,-2.9234 69.41673,-0.38 103.92013,9.6298 l 14.4102,4.2263 -13.3017,5.9581 c -21.3578,9.5926 -38.331,14.7136 -63.1142,19.1213 -22.4505,3.993 -31.29962,7.8931 -36.37201,15.9345 -1.27081,2.0142 -1.71882,4.3085 -0.97016,5.0576 0.74907,0.7486 11.16927,0.2264 23.13987,-1.1085 38.5825,-4.3023 80.5233,-5.2529 104.7514,-2.4249 29.8263,3.4812 36.042,5.6265 22.4469,7.7594 -22.7178,3.5644 -53.2942,13.0779 -72.1209,22.3775 -52.2109,25.7908 -84.90895,71.0312 -94.15151,130.3855 -3.39816,21.8228 -2.87186,69.617 1.0391,97.4774 7.80481,55.5991 31.12671,173.9225 61.31311,310.7912 9.681,43.896 25.4984,116.2245 35.1247,160.73 9.6265,44.5056 20.07,92.256 23.2088,106.1373 0.6139,2.7142 1.0384,4.5856 1.5935,7.0666 29.8311,18.7825 148.6221,53.033 301.092,0 -23.9031,-34.3276 -68.6566,-105.4905 -68.6566,-109.6014 0,-0.5354 10.2256,2.9732 22.7239,7.7594 30.6276,11.7285 62.0259,20.0961 72.1206,19.2599 7.1795,-0.5945 8.8384,-1.8804 12.6784,-9.5606 4.0482,-8.0969 4.4339,-13.3019 4.4339,-59.8581 0,-56.0723 -2.6492,-77.37 -10.9465,-87.0158 -4.2011,-4.8845 -5.9877,-5.4336 -13.1629,-4.0875 -13.5364,2.5396 -49.4679,22.2595 -76.7626,42.1224 -14.0225,10.2043 -25.8627,17.3889 -26.3265,16.0037 -2.0604,-6.1514 -8.0537,-10.2536 -14.9645,-10.2536 -6.4383,0 -7.8438,-1.0665 -10.8771,-8.3136 -5.8604,-14.0017 -18.446,-60.3946 -22.1003,-81.4736 -4.9035,-28.2818 -4.6713,-83.1362 0.3463,-83.1362 0.5178,0 5.6107,2.3655 11.3619,5.2653 20.4095,10.2898 72.8931,30.0429 94.7063,35.6792 48.8273,12.6167 76.1247,11.7586 140.0844,-4.4339 68.66,-17.3822 96.5769,-32.2642 96.5769,-51.4058 0,-3.5551 -2.1084,-7.6039 -5.2653,-10.1843 -4.8009,-3.9236 -7.6137,-4.1901 -31.8689,-2.9097 -14.632,0.7724 -37.5779,2.87 -50.9903,4.711 -86.7703,11.91 -113.0806,12.3351 -145.2114,2.1476 -32.7393,-10.3798 -47.9909,-20.1252 -55.2858,-35.1943 -2.4999,-5.1643 -4.5723,-12.4088 -4.5723,-16.1422 0,-11.7318 3.084,-12.5461 36.0257,-9.5607 70.9211,6.4274 73.1258,6.1663 134.6808,-13.7867 85.9415,-27.8579 157.6433,-60.6948 169.5287,-77.6633 12.637,-18.0418 -12.0523,-32.7002 -55.0085,-32.7002 -22.1225,0 -47.7405,6.0361 -118.3307,27.8506 -26.1117,8.0693 -47.8974,14.247 -48.427,13.7175 -0.5295,-0.5296 0.2106,-8.6053 1.6628,-17.9435 7.8542,-50.5216 -21.1138,-147.6786 -62.4215,-209.4343 -24.135,-36.0822 -53.0965,-57.5041 -94.2903,-69.7655 -16.5639,-4.9301 -18.8358,-6.3667 -34.571,-22.1003 -46.5594,-46.5547 -140.7107,-88.7434 -197.379,-89.9257 z m 300.3989,208.4644 c 14.0407,0.3145 27.0813,6.649 34.7785,17.4585 4.7212,6.6308 4.8372,7.0671 0.9007,5.4733 -17.9487,-7.2675 -24.4933,-8.4149 -42.261,-7.4822 -14.791,0.7763 -20.048,2.0152 -25.2871,5.8886 -5.5968,4.1382 -6.6509,4.3703 -6.6509,1.3165 0,-6.0452 14.0862,-18.1679 24.3173,-20.9226 4.725,-1.2724 9.522,-1.8368 14.2025,-1.7321 z m -262.0181,14.3411 c 11.7572,-0.3962 23.7036,2.8882 30.2062,8.6598 l 5.9583,5.2653 -7.4131,-2.4941 c -12.4396,-4.1587 -33.5013,-1.1379 -48.6347,6.9281 -16.0283,8.5433 -22.0524,14.5365 -25.9798,25.911 l -2.9099,8.5214 -1.5934,-6.3044 c -1.9114,-7.5579 1.782,-20.9068 7.898,-28.6822 5.5623,-7.0713 20.1123,-14.2722 34.4319,-16.9736 2.6236,-0.4948 5.3234,-0.74 8.0365,-0.8313 z m 281.4857,69.4188 c 9.5751,0 23.0416,8.5242 28.3355,17.9434 8.3062,14.7786 4.0214,31.0872 -11.2231,42.4689 -5.843,4.3622 -20.601,6.9167 -26.3265,4.5725 -14.8021,-6.06 -25.8936,-23.8404 -23.3475,-37.4113 2.6081,-13.9026 18.7193,-27.5735 32.5616,-27.5735 z m 15.6574,14.3409 c -1.5616,-0.057 -3.2408,0.2797 -4.9188,1.1778 -7.5514,4.0416 -4.2726,15.5189 4.4339,15.5189 1.9509,0 4.7721,-1.1696 6.235,-2.6327 5.7413,-5.7413 1.0168,-13.8115 -5.7501,-14.064 z m -271.232,3.7413 c 7.2936,-0.2734 10.6576,0.9824 18.2899,5.8887 6.7644,4.3486 11.8156,9.8453 14.9646,16.3501 5.6532,11.6786 5.8951,16.9605 1.3162,27.9201 -8.4141,20.1374 -28.1529,30.2987 -46.1406,23.8324 -10.5076,-3.7772 -20.9409,-13.2136 -25.0101,-22.7239 -9.6561,-22.5678 7.5988,-49.0796 33.1851,-51.0597 1.2258,-0.095 2.3528,-0.1684 3.3949,-0.2084 z m 16.5578,15.1723 c -9.5709,-0.1264 -13.835,12.8569 -5.7502,17.5279 4.2898,2.4789 11.9071,0.998 14.4104,-2.8405 3.3116,-5.0796 -2.301,-14.6041 -8.6602,-14.6874 z" fill="currentColor"/>
    </g>
  </svg>
                            <div class="select-text" data-lang="DDG">DDG</div>
                        </div>
                    </div>
                </div>
				
                </div>
				
                <div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title3">搜索建议与搜索历史记录</div>
                        <div class="item-description" data-lang="item-description3" style="display: none">包含搜索建议、最近搜索、网址识别</div>
                    </div>
					<div class="md-switch checked" id="suggestionbtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title4">在搜索栏下方显示捷径</div>
                        <div class="item-description" id="barState" data-lang="item-description4" style="display: none">网站捷径已隐藏</div>
                    </div>
					<div class="md-switch" id="barBtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title5">在每行显示更多捷径</div>
                        <div class="item-description" data-lang="item-description5" style="display: none">仅在窗口逻辑宽度 >640px 时生效</div>
                    </div>
					<div class="md-switch" id="barMoreBtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>	
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title6">点击 Logo 打开“更多”</div>
                        <div class="item-description" data-lang="item-description6" style="display: none">点击 Logo 打开“更多”，即使隐藏 Logo</div>
                    </div>
					<div class="md-switch checked" id="quickbtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item-title7">添加 Via 浏览器的页面按钮</div>
                        <div class="item-description" data-lang="item-description7" style="display: none">显示通往 Via 浏览器的一些页面的按钮</div>
                    </div>
					<div class="md-switch" id="viaBtn">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				</div>

				<h2 class="modal-title-mini" data-lang="title-appearance-settings">外观</h2>
				<div class="setting-itemgroup">

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title1">自定义壁纸</div>
						<div class="item-description" id="statusMessage" data-lang="item2-description1">上传 jpg、png、gif，不大于 3MB</div>
						<div class="item-description" data-lang="item2-description1-2">或使用必应壁纸、随机桃寝奇诺图</div>
						<div class="custom-select-container" style="margin-top: 0px; display: inline-block;">

						<div class="md-btn" id="uploadBtn" tabindex="0">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 8 12 3 17 8"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    		<p data-lang="upload">上传</p>
                		</div>

						<div class="custom-options custom-options4" id="fileAsk" style="z-index: 999">
							<div class="custom-option selected" tabindex="0">
                            	<div class="select-text" data-lang="img-choose">图片来源：</div>
                        	</div>
                        	<div class="custom-option" id="fileAskBtn1" tabindex="0">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                            	<div class="select-text" data-lang="file-manager">文件管理器</div>
                        	</div>
							<div class="custom-option" id="fileAskBtn2" tabindex="0">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1.5" y="3" width="21" height="18" rx="2" ry="2"/><circle cx="6.2" cy="7.8" r="1.5" stroke-width="1.5"/><polyline points="22.5 14 18 9 12 15 8 12 1.5 18"/></svg>
                            	<div class="select-text" data-lang="photo-album">相册</div>
                        	</div>                   
                    	</div>
						</div>

						<div class="md-btn md-btn-second" id="bingBtn" tabindex="0">
            				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                			<circle cx="12" cy="12" r="10"></circle>
                			<line x1="2" y1="12" x2="22" y2="12"></line>
                			<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            				</svg>
            				<p data-lang="bing">必应</p>
        				</div>

						<div class="custom-select-container" style="margin-top: 0px; display: inline-block;">
						<div class="md-btn md-btn-second" id="momotanApiBtn" tabindex="0">
            				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                			<circle cx="12" cy="12" r="10"></circle>
                			<line x1="2" y1="12" x2="22" y2="12"></line>
                			<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            				</svg>
            				<p data-lang="momonechinoi">桃寝奇诺</p>
        				</div>

						<div class="custom-options custom-options4" id="momotanApiAsk" style="z-index: 999">
							<div class="custom-option selected" tabindex="0">
                            	<div class="select-text" data-lang="momotan-choose1">随机图片比例:</div>
                        	</div>
                        	<div class="custom-option" id="momotanApiVertical" tabindex="0">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>
                            	<div class="select-text" data-lang="vertical">竖屏</div>
                        	</div>
							<div class="custom-option" id="momotanApiHorizontal" tabindex="0">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="8" y1="22" x2="16" y2="22"/></svg>
                            	<div class="select-text" data-lang="horizontal">横屏</div>
                        	</div>                   
                    	</div>
						</div>
						<div class="md-btn md-btn-second" id="resetBtn" tabindex="0">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                    		<p data-lang="reset">重置</p>
                		</div>
						<div class="status-message" id="statusMessage"></div>
						
                    </div>
					<div class="preview-container">
                    		<div class="preview-box" id="previewBox">
                        		<span style="color: #888; font-size: 14px;" data-lang="imgpreview">图片预览</span>
                    		</div>
                	</div>
					
					<input type="file" id="fileInput" class="file-input">
					<input type="file" id="fileInputimg" class="file-input" accept="image/*">
					
                </div>

				<div class="setting-item">
    				<div class="item-content">
        				<div class="item-title" data-lang="item2-title2">主题色</div>
        				<div class="item-description" data-lang="item2-description2" style="display: none">自定义网站的主题色</div>
    				</div>

					<div class="custom-select-container" style="margin-top: 0px;">
                    <div class="md-btnq" id="colorSelect" tabindex="0">
                        <div class="select-icon"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 10.5C8 11.3284 7.32843 12 6.5 12C5.67157 12 5 11.3284 5 10.5C5 9.67157 5.67157 9 6.5 9C7.32843 9 8 9.67157 8 10.5Z" fill="currentColor"/><path d="M10.5 8C11.3284 8 12 7.32843 12 6.5C12 5.67157 11.3284 5 10.5 5C9.67157 5 9 5.67157 9 6.5C9 7.32843 9.67157 8 10.5 8Z" fill="currentColor"/><path d="M17 6.5C17 7.32843 16.3284 8 15.5 8C14.6716 8 14 7.32843 14 6.5C14 5.67157 14.6716 5 15.5 5C16.3284 5 17 5.67157 17 6.5Z" fill="currentColor"/><path d="M7.5 17C8.32843 17 9 16.3284 9 15.5C9 14.6716 8.32843 14 7.5 14C6.67157 14 6 14.6716 6 15.5C6 16.3284 6.67157 17 7.5 17Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C17.9712 1 23 5.34921 23 11V11.0146C23 11.543 23.0001 12.4458 22.6825 13.4987C21.8502 16.2575 18.8203 16.9964 16.4948 16.4024C16.011 16.2788 15.5243 16.145 15.0568 16.0107C14.2512 15.7791 13.5177 16.4897 13.6661 17.2315L13.9837 18.8197L14.0983 19.5068C14.3953 21.289 13.0019 23.1015 11.0165 22.8498C7.65019 22.423 5.11981 21.1007 3.43595 19.1329C1.75722 17.171 1 14.6613 1 12ZM12 3C7.02944 3 3 7.02944 3 12C3 14.2854 3.64673 16.303 4.95555 17.8326C6.25924 19.3561 8.3 20.4894 11.2681 20.8657C11.7347 20.9249 12.2348 20.4915 12.1255 19.8356L12.0163 19.1803L11.7049 17.6237C11.2467 15.3325 13.4423 13.4657 15.6093 14.0885C16.0619 14.2186 16.529 14.3469 16.9897 14.4646C18.7757 14.9208 20.3744 14.2249 20.7677 12.921C20.997 12.161 21 11.5059 21 11C21 6.65079 17.0745 3 12 3Z" fill="currentColor"/></svg></div>
        				<p class="select-text" data-lang="color-select">自定义</p>
                    </div>
					<div class="custom-options custom-options2 custom-options3" id="colorOptions" style="z-index: 999">
                          <div class="md-btnc-box">
    				<div class="md-btnc" data-theme="magenta" style="background: #a74e66; border-top-left-radius: 14px;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>品红</p>
    				</div>
    				<div class="md-btnc" data-theme="rose" style="background: #b64859;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>玫红</p>
    				</div>
					<div class="md-btnc" data-theme="pink2" style="background: #cd6782;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>柔和粉</p>
    				</div>
					<div class="md-btnc" data-theme="orangepink" style="background: #db8889;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>橙粉</p>
    				</div>
					<div class="md-btnc" data-theme="tangerine" style="background: #D77162; border-top-right-radius: 14px;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>橘红</p>
    				</div>
					<div class="md-btnc" data-theme="orange" style="background: #dc995c;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>橘黄</p>
    				</div>
					<div class="md-btnc" data-theme="yellow" style="background: #D4B24D;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>黄色</p>
    				</div>
					<div class="md-btnc" data-theme="yellowgreen" style="background: #B5A852;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>黄绿</p>
    				</div>
					<div class="md-btnc" data-theme="grassgreen" style="background: #799845;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>草绿</p>
    				</div>
					<div class="md-btnc" data-theme="darkgreen" style="background: #537965;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>墨绿</p>
    				</div>
					<div class="md-btnc" data-theme="cyan" style="background: #53ac8b;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>青绿</p>
    				</div>
					<div class="md-btnc" data-theme="aquablue" style="background: #3da7b3;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>水蓝</p>
    				</div>
					<div class="md-btnc" data-theme="lightblue" style="background: #5697BE;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>天蓝</p>
    				</div>
					<div class="md-btnc" data-theme="blue" style="background: #4782cb;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>蓝色</p>
    				</div>
    				<div class="md-btnc" data-theme="ultramarine" style="background: #4454ba;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>群青</p>
    				</div>
					<div class="md-btnc" data-theme="navyblue" style="background: #5e6983;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>藏青</p>
    				</div>
    				<div class="md-btnc" data-theme="blueviolet" style="background: #8782b8;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>蓝紫</p>
    				</div>
					<div class="md-btnc" data-theme="purple" style="background: #966ec9;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>罗兰紫</p>
    				</div>
					<div class="md-btnc" data-theme="lavender" style="background: #ca87cd;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>粉紫</p>
    				</div>
					<div class="md-btnc" data-theme="pink" style="background: #c66e97;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>粉色</p>
    				</div>
					<div class="md-btnc" data-theme="kipfel" style="background: #9A7F60; border-bottom-left-radius: 14px;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>抹茶</p>
    				</div>
				    <div class="md-btnc" data-theme="brown2" style="background: #AD8874;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>浅棕</p>
    				</div>
					<div class="md-btnc" data-theme="brown" style="background: #765651;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>棕色</p>
    				</div>
					<div class="md-btnc" data-theme="grey" style="background: #6f6f6f;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>灰色</p>
    				</div>
					<div class="md-btnc" data-theme="black" style="background: #333333; border-bottom-right-radius: 14px;">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        				<p>黑色</p>
    				</div>
					</div>                    
                    </div>
                </div>



					
				</div>

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title3">深色模式</div>
                        <div class="item-description" data-lang="item2-description3" style="display: none">为网站应用深色主题</div>
                    </div>
					<div class="md-switch" id="themeToggle2" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title4">隐藏 Logo</div>
                        <div class="item-description" id="currentState" data-lang="item2-description4" style="display: none">这不会影响快捷操作</div>
                    </div>
					<div class="md-switch" id="logobtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title5">隐藏页脚信息</div>
                        <div class="item-description" id="footerState" data-lang="item2-description5" style="display: none">获得更简洁的页面</div>
                    </div>
					<div class="md-switch" id="footerbtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title6">深色模式背景遮罩</div>
                        <div class="item-description" id="darkBgState" data-lang="item2-description6" style="display: none">让深色模式下的背景图更柔和</div>
                    </div>
					<div class="md-switch checked" id="darkBgBtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title7">减弱动态效果</div>
                        <div class="item-description" data-lang="item2-description7" style="display: none">关闭部分动效以节省性能</div>
                    </div>
					<div class="md-switch" id="litebtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item2-title8">禁用模糊效果</div>
                        <div class="item-description" data-lang="item2-description8" style="display: none">关闭部分模糊效果以节省性能</div>
                    </div>
					<div class="md-switch" id="lowbtn" tabindex="0">
                    	<div class="md-switch-handle"></div>
                	</div>
                </div>
				</div>

				<h2 class="modal-title-mini" data-lang="data-management">数据管理</h2>
				<div class="setting-itemgroup">

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item3-title1">LocalStorage 用量</div>                   
					<div class="usage-container">
            			<div class="usage-info">
                			<span data-lang="item3-description1">已使用</span><span id="usageText"></span>
                			<span data-lang="item3-description1-2">共 5.00 MB</span>
            			</div>
            			<div class="usage-bar">
                			<div class="used-space" id="usedSpaceBar"></div>
            			</div>
        			</div>
					</div>
                </div>

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item3-title2">捷径数据</div>
                        <div class="item-description" data-lang="item3-description2" style="display: none">迁移、备份捷径数据</div>
                    </div>				
					<div class="md-btnr" id="exportBtn" tabindex="0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 6.75a.75.75 0 0 1 1.5 0v2.546l.943-1.048a.75.75 0 0 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V8.75Z" clip-rule="evenodd"/></svg>
                    		<p data-lang="export">导出</p>
                	</div>
					<div class="md-btnr md-btn-second" id="importBtn" tabindex="0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 11.25a.75.75 0 0 0 1.5 0v-2.546l.943 1.048a.75.75 0 1 0 1.114-1.004l-2.25-2.5a.75.75 0 0 0-1.114 0l-2.25 2.5a.75.75 0 1 0 1.114 1.004l.943-1.048v2.546Z" clip-rule="evenodd"/></svg>
                    		<p data-lang="import">导入</p>
                	</div>
                </div>

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item3-title3">便签数据</div>
                        <div class="item-description" data-lang="item3-description3" style="display: none">迁移、备份便签数据</div>
                    </div>
					<div class="md-btnr" id="exportNotesBtn" tabindex="0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 6.75a.75.75 0 0 1 1.5 0v2.546l.943-1.048a.75.75 0 0 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V8.75Z" clip-rule="evenodd"/></svg>
                    		<p data-lang="export">导出</p>
                	</div>
					<div class="md-btnr md-btn-second" id="importNotesBtn" tabindex="0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 11.25a.75.75 0 0 0 1.5 0v-2.546l.943 1.048a.75.75 0 1 0 1.114-1.004l-2.25-2.5a.75.75 0 0 0-1.114 0l-2.25 2.5a.75.75 0 1 0 1.114 1.004l.943-1.048v2.546Z" clip-rule="evenodd"/></svg>
                    		<p data-lang="import">导入</p>
                	</div>
                </div>

				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item3-description4">重置设置</div>
                        <div class="item-description" data-lang="item3-description4" style="display: none">删除所有数据并重置设置</div>					
                    </div>
					<div class="md-btnr md-btn-second" id="clearStorageBtn" tabindex="0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                    		<p data-lang="reset">重置</p>
                	</div>
                </div>
				</div>

				<h2 class="modal-title-mini" data-lang="developed-by-me">由我开发</h2>
                
				<div class="setting-itembox2">
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Momotan Note</div>
                        <div class="item-description" data-lang="item4-description1">本站的便签功能的专属页面</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://momotan.cc/note" target="_blank">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    		<p data-lang="open">打开</p>
                	</a>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Momotan Storage Explorer</div>
                        <div class="item-description" data-lang="item4-description2">[开源] 网站本地数据管理工具</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://momotan.cc/storage" target="_blank">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    		<p data-lang="open">打开</p>
                	</a>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Momotan SVG Editor</div>
                        <div class="item-description" data-lang="item4-description3">[开源] 自带图标库的SVG图标编辑器</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://momotan.cc/svg" target="_blank">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    		<p data-lang="open">打开</p>
                	</a>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Chinoi Fans</div>
                        <div class="item-description" data-lang="item4-description4">桃寝ちのい粉丝站</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://chinoi.momotan.cc/" target="_blank">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    		<p data-lang="open">打开</p>
                	</a>
                </div>
				</div>

				<h2 class="modal-title-mini" data-lang="about">关于</h2>
				<div class="setting-itembox">
                <div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item5-title1">开发</div>
                        <div class="item-description">Aphasia</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://github.com/kvetc/Momotan-Start" target="_blank">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" vertical-align="middle"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2c2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2a4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2 0 0 0-.1 3.2A4.6 4.6 0 0 0 4 9.5c0 4.6 2.7 5.7 5.5 6c-.6.6-.6 1.2-.5 2V21"/></svg>
                    		<p>Github</p>
                	</a>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item5-title2">版本</div>
                        <div class="item-description">1.0.93 release 26/1/29</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item5-title3">版权</div>
                        <div class="item-description">Copyright © 2026 Aphasia</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title" data-lang="item5-title4">联系我</div>
                        <div class="item-description">kvetc@outlook.com</div>
                    </div>
                </div>
				</div>
				
				<div class="setting-item setting-item-btn">
					<div class="md-btn-logobox">
						<div class="popup" id="popup">
                        <h2 class="modal-title-mini" style="margin-top: 14px;">深入了解</h2>
                <div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">技术</div>
                        <div class="item-description">本站完全基于原生 html，未使用任何外部库&框架，所有代码均为原创，包括这个模仿 Material Design 3 的 UI。为了界面的美观，特意加上了「盘古之白」（中文与西文、数字之间的空白间隙）。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">兼容性</div>
                        <div class="item-description">本站使用的部分特性所支持的最低浏览器内核版本：Chromium 111+ 、Firefox 113+ 、Safari 16.4+ ，可访问<a href="https://check.retiehe.com/" target="_blank" tabindex="-1">「热铁盒检查」</a>来查看你的浏览器版本。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">无在线服务</div>
                        <div class="item-description">本站不涉及内容的上传或下载，无账号系统，未使用 Cookies ，所有的数据均储存于本地浏览器的 localStorage 。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">可离线打开</div>
                        <div class="item-description">本站使用了 PWA 技术，一次加载后会把网页储存在本地，即使断网也能打开。这一特性也提供了它无与伦比的加载速度。</div>
                    </div>
                </div>
				<h2 class="modal-title-mini" style="margin-top: 14px;">版权信息</h2>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Momotan Start</div>
						<div class="item-description">一个 Material Design 3 风格的极简起始页 / A minimalist starting page in Material Design 3 style</div>
						<div class="item-description">开发 / Developer：Aphasia (kvetc@outlook.com)</div>
						<div class="item-description">版权 / Copyright：Copyright©2026, Aphasia</div>
						<div class="item-description">基于 MIT 协议开源 / Licensed under the MIT License</div>
						<div class="item-description">开源地址 / Open source address：<a href="https://github.com/kvetc/Momotan-Start" target="_blank">https://github.com/kvetc/Momotan-Start</a> </div>
                    </div>
                </div>

				<h2 class="modal-title-mini" style="margin-top: 14px;">MIT 协议 / MIT License</h2>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">MIT License</div>
						<div class="item-description">Copyright (c) 2026 Aphasia</div>
						<div class="item-description">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</div>
						<div class="item-description">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</div>
						<div class="item-description">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div>
                    </div>
                </div>

				<h2 class="modal-title-mini">第三方 SDK 清单</h2>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">百度搜索建议 API</div>
                        <div class="item-description">用途：输入搜索词时提供搜索建议</div>
						<div class="item-description">链接：<a href="https://www.baidu.com" target="_blank" tabindex="-1">https://www.baidu.com</a></div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Bing 搜索建议 API</div>
                        <div class="item-description">用途：输入搜索词时提供搜索建议</div>
						<div class="item-description">链接：<a href="https://api.bing.com" target="_blank" tabindex="-1">https://api.bing.com</a></div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Google 搜索建议 API</div>
                        <div class="item-description">用途：输入搜索词时提供搜索建议</div>
						<div class="item-description">链接：<a href="https://suggestqueries.google.com" target="_blank" tabindex="-1">https://suggestqueries.<wbr>google.com</a></div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">必应壁纸 API</div>
                        <div class="item-description">用途：获取必应每日壁纸</div>
						<div class="item-description">链接：<a href="https://github.com/shangzhenyang/bing-wallpaper" target="_blank" tabindex="-1">https://github.com/<wbr>shangzhenyang/<wbr>bing-wallpaper</a></div>
						<div class="item-description">&ensp;</div>
						<div class="item-title">MIT License</div>
						<div class="item-description">Copyright (c) 2023 Shangzhen Yang</div>
						<div class="item-description">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</div>
						<div class="item-description">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</div>
						<div class="item-description">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div>
                    </div>
                </div>

				<h2 class="modal-title-mini">感谢</h2>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">SxrDoor</div>
                        <div class="item-description">为本站提供了新版的更优秀的搜索建议接口</div>
                    </div>
				</div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">热铁盒网页托管</div>
                        <div class="item-description">本站由热铁盒网页托管驱动</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://host.retiehe.com/" target="_blank" tabindex="-1">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    		<p>打开</p>
                	</a>
                </div>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">Material Design 3</div>
                        <div class="item-description">本站部分参考的 UI 设计</div>
                    </div>
					<a class="md-btnr md-btn-second" href="https://m3.material.io/" target="_blank" tabindex="-1">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    		<p>打开</p>
                	</a>
                </div>           

				<h2 class="modal-title-mini">开发历程</h2>
				<div class="setting-item">
                    <div class="item-content">
                        <div class="item-title">2025.6.25 中午</div>
                        <div class="item-description">网站开工。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.25 晚上</div>
                        <div class="item-description">网站初版完成，完成搜索功能、切换搜索引擎、深浅色模式，采用 Material Design 3 的 UI 设计风格。版本号：1.0.4。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.26 凌晨</div>
                        <div class="item-description">网站域名注册，并完成解析。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.26 下午</div>
                        <div class="item-description">完成搜索建议、搜索历史纪录、自动识别网址功能。版本号：1.0.9。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.27 凌晨</div>
                        <div class="item-description">完成捷径功能、点击 Logo 打开“更多”。版本号：1.0.16。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.27 下午</div>
                        <div class="item-description">完成自定义背景、隐藏 Logo 功能。版本号：1.0.21。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.28 下午</div>
                        <div class="item-description">完成在主页显示捷径功能。版本号：1.0.24。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.29 上午</div>
                        <div class="item-description">将切换搜索引擎的浏览器原生选择框更新为网站自定义的新版选择框。版本号：1.0.29。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.29 下午</div>
                        <div class="item-description">UI 与动效大幅更新，跟进最新版本的 Material Design 3 的 UI 设计风格。版本号：1.0.32。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.30 下午</div>
                        <div class="item-description">调整“更多”页面的内容排布，新增“深入了解本站”。版本号：1.0.34。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.6.30 晚上</div>
                        <div class="item-description">启用 PWA，一次加载后会把网页储存在本地，即使断网也能打开。版本号：1.0.35。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.1 下午</div>
                        <div class="item-description">更换更好的搜索建议接口（由 SxrDoor 提供），微调开关按钮动画，简化选项，修复开关按钮相关 bug。版本号：1.0.36。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.6 晚上</div>
                        <div class="item-description">微调移动端横屏时“更多”页面的布局，新增自定义网页捷径。版本号：1.0.37。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.7 下午</div>
                        <div class="item-description">新增数据管理、导入导出捷径数据功能，微调捷径外观。版本号：1.0.38。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.8 下午</div>
                        <div class="item-description">新增右键菜单位置自适应，调整并统一弹窗样式。版本号：1.0.39。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.8 晚上</div>
                        <div class="item-description">新增添加捷径时自动补全链接协议头，自动补全名称，并检查链接格式。版本号：1.0.40。</div>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.9 凌晨</div>
                        <div class="item-description">优化添加捷径时自动补全名称的识别，优化添加捷径时的操作顺序，优化捷径较多时的流畅度。版本号：1.0.41。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.9 下午</div>
                        <div class="item-description">优化捷径的明度，优化添加捷径时自动补全名称的识别，导入捷径功能适配 irminsul 的捷径格式。版本号：1.0.42。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.10 晚上</div>
                        <div class="item-description">新增 LocalStorage 用量查询，新增便签功能。版本号：1.0.43。</div>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.11 凌晨</div>
                        <div class="item-description">新增 Momotan 便签编辑器，优化便签外观与功能。版本号：1.0.45。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.11 下午</div>
                        <div class="item-description">新增 LocalStorage 存储管理，优化便签外观与功能。版本号：1.0.46。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.7.12 下午</div>
                        <div class="item-description">一些错误修复与改进。版本号：1.0.47。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.8.13 晚上</div>
                        <div class="item-description">修改菜单图标与样式。版本号：1.0.48。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.8.25 下午</div>
                        <div class="item-description">优化菜单开闭时的背景模糊动画，优化移动端的菜单开闭动画。版本号：1.0.49。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.7 中午</div>
                        <div class="item-description">优化菜单开闭动画。版本号：1.0.51。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.19 凌晨</div>
                        <div class="item-description">调整按钮样式，对按钮主次进行分类。新增大量图标，优化文本提示。新增删除背景图片前确认。版本号：1.0.52。</div>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.19 上午</div>
                        <div class="item-description">新增搜索引擎、搜索历史记录图标。优化选择搜索引擎弹窗、右键菜单、搜索建议项在深色模式的效果。提升按钮可读性。版本号：1.0.53。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.19 下午</div>
                        <div class="item-description">优化流畅度，新增“减弱动态效果”选项。开放“快捷操作”、“输入时提供搜索建议”选项。版本号：1.0.54。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.20 下午</div>
                        <div class="item-description">优化深色模式加载时的流畅度，新增“更多”页面中的“搜索引擎选项”。更改搜索栏搜索引擎切换按钮为图标。壁纸偏好新增必应壁纸。版本号：1.0.55。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.20 晚上</div>
                        <div class="item-description">更改右上角按钮为更简洁的样式，更改毛玻璃模糊效果为更加通透的混色模糊。版本号：1.0.56。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.21 晚上</div>
                        <div class="item-description">新增一键清空搜索栏中内容的功能。微调固定便签的内边距，微调部分动效。版本号：1.0.57。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.22 晚上</div>
                        <div class="item-description">新增一些点按反馈。微调混色模糊效果，搜索引擎选择菜单和捷径右键菜单样式更新。版本号：1.0.58。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.23 晚上</div>
                        <div class="item-description">logo 换新，logo 可跟随深浅色模式更换颜色。微调捷径样式。更改“关于”样式。版本号：1.0.59。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.24 晚上</div>
                        <div class="item-description">新增捷径项、右上角按钮的点按反馈。新增第三方 SDK 清单。微调便签样式。版本号：1.0.60。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.27 凌晨</div>
                        <div class="item-description">新增 logo 点按反馈。新增自定义主题色。微调部分样式。修复 Firefox 下捷径可被拖动的问题。版本号：1.0.62。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.27 晚上</div>
                        <div class="item-description">新增“深色模式背景遮罩”、“在每行显示更多捷径”选项。增加主题色覆盖范围。搜索建议增加到 7 个，添加错误提示与 Fallback。微调便签样式。优化字体显示。版本号：1.0.64。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.28 下午</div>
                        <div class="item-description">优化移动端捷径和弹出菜单的样式。版本号：1.0.65。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.9.29 下午</div>
                        <div class="item-description">弹窗标题、便签操作按钮、便签固定标记跟随主题色。便签固定标记更改为图标。微调开关按钮的动画曲线。微调部分样式。版本号：1.0.66。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.3 凌晨</div>
                        <div class="item-description">上传图片时新增选择从文件管理器上传还是从相册上传，以解决部分手机系统无法在通过相册上传时方便的查找图片的问题。版本号：1.0.67。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.3 晚上</div>
                        <div class="item-description">自定义背景新增“随机桃寝图。版本号：1.0.68。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.5 上午</div>
                        <div class="item-description">全新 3D 卡片动效（打开“减弱动态效果”可关闭）。版本号：1.0.69。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.7 下午</div>
                        <div class="item-description">微调 3D 卡片动效。优化「盘古之白」。修复部分描述错误。版本号：1.0.70。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.8 凌晨</div>
                        <div class="item-description">统一卡片按钮样式。微调卡片外观和动效。新增“禁用模糊效果”选项。版本号：1.0.71。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.8 晚上</div>
                        <div class="item-description">适配 irminsul 新版捷径数据格式。版本号：1.0.72。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.9 凌晨</div>
                        <div class="item-description">新增多语言适配。修复某些情况下选择器被误点击的情况。版本号：1.0.73。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.9 晚上</div>
                        <div class="item-description">重写 logo 实现。在不使用自定义背景的时候，logo 也会跟随主题色。缓解右上角按钮在网站加载时闪烁的问题。更新主题色选择器的样式。新增 2 个主题色。版本号：1.0.74。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.10 上午</div>
                        <div class="item-description">优化主题色选择器的样式。新增 5 个主题色。微调选择搜索引擎按钮的触发范围。版本号：1.0.75。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.11 下午</div>
                        <div class="item-description">重写背景定位与主页元素定位，在移动端弹出键盘时实现连贯动画。固定在主页的捷径不会再影响主页布局。版本号：1.0.76。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.12 下午</div>
                        <div class="item-description">适配基础快捷键。在主页上按任意键聚焦到搜索栏，按 Esc 打开“更多”窗口，按 F1 打开“便签”窗口。在有窗口或弹窗打开时，按 Esc 关闭窗口或弹窗。版本号：1.0.77。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.10.12 晚上</div>
                        <div class="item-description">新增快捷键，按 F2 切换深浅色模式。无障碍优化，支持 Tab 选中按钮（下一个），Shift + Tab 选中按钮（上一个），空格键确认操作，Enter 键打开选定捷径，被选中的按钮会有高亮边框。上传背景图、选择随机图片比例的弹窗改为更简洁的选择器。版本号：1.0.78。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.11.3 晚上</div>
                        <div class="item-description">新增 Via 增强。修复部分错误。优化网址识别的外观和行为。版本号：1.0.80。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.11.4 中午</div>
                        <div class="item-description">适配浏览器原生返回按钮和移动端返回操作。修复 Via 增强未打开时也显示的问题。版本号：1.0.81。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.11.4 晚上</div>
                        <div class="item-description">修复 Enter 键无法搜索的问题。版本号：1.0.82。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.11.9 晚上</div>
                        <div class="item-description">优化搜索建议只有一行时的显示效果。版本号：1.0.83。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.11.12 晚上</div>
                        <div class="item-description">更新图标。版本号：1.0.84。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2025.12.7 凌晨</div>
                        <div class="item-description">优化右上角菜单按钮的颜色和阴影效果。为捷径右键菜单添加渐入动画。版本号：1.0.85。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2026.1.1 下午</div>
                        <div class="item-description">移除部分冗余代码。优化多语言。版本号：1.0.86。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2026.1.6 下午</div>
                        <div class="item-description">调整 UI 视觉设计。更新图标。修复 Via 增强设置项不支持多语言的问题。版本号：1.0.88。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2026.1.12 下午</div>
                        <div class="item-description">优化移动端页面动效。卡片标题栏新增渐进式模糊。修复“深入了解本站”卡片不会跟随滚动的问题。版本号：1.0.90。</div>
                    </div>
                </div>
				<div class="setting-item">
                    <div class="item-content">
						<div class="item-title">2026.1.29 下午</div>
                        <div class="item-description">优化禁用模糊效果时的遮罩效果。优化卡片视觉效果。版本号：1.0.93。</div>
                    </div>
                </div>
				
                </div>
                    <div class="md-btn-logo" id="popbutton" tabindex="0">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    							<circle cx="12" cy="12" r="10"/>
    							<line x1="12" y1="16" x2="12" y2="12"/>
    							<line x1="12" y1="8" x2="12.01" y2="8"/>
							</svg>
                    		<p data-lang="footbtn1">深入了解本站</p>
					</div>
					
					</div>
					<div class="md-btn-logobox">
                    <a class="md-btn-logo" href="https://icp.gov.moe/?keyword=20251027" target="_blank">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    						<path d="M12 3L4 6v8c0 5 4 8 8 8s8-3 8-8V6l-8-3z"/>
							</svg>
                    		<p data-lang="footbtn2">萌 ICP 备 20251027 号</p>
                	</a>
					</div>
					<div class="md-btn-logobox">
					<a class="md-btn-logo" href="https://travel.moe/go.html?travel=on" target="_blank">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
    						<circle cx="12" cy="12" r="5" fill="currentColor" />   
    						<path d="M12 2a10 10 0 0 1 8 16" stroke-dasharray="2,2" />
    						<path d="M12 22a10 10 0 0 1-8-16" stroke-dasharray="2,2" />
							</svg>
                    		<p data-lang="footbtn3">异次元之旅</p>
                	</a>
					</div>
                </div>
				
            </div>
        </div>
    </div>

	<!-- 固定在左上角的便签 -->
    <div class="pinned-notes" id="pinnedNotesContainer"></div>

	<div id="noteModal" class="modal">
		<div class="modal-blur" id="modalBlur2"></div>
		<div class="modal-content" id="noteModalContent">
		
			<div class="modal-header" id="modalHeader2">
                <span class="close" id="noteclose">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" transform="rotate(180, 0, 0)"><polyline points="9 5 16 12 9 19"/></svg>
                </span>
                <h2 class="modal-title" data-lang="note">便签</h2>
            </div>
	<div class="modal-body-note">
		
    
        <!-- 左侧便签列表区域 -->
	<div class="notecontainer">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="btn-new" id="newNoteBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    <span style="margin-left: 8px;" data-lang="new-note">新建便签</span>
                </div>
            </div>
            <div class="notes-list" id="notesList">
                <div class="placeholder" id="notesListPlaceholder" data-lang="notes-list">创建第一个便签</div>
            </div>
        </div>
        
        <!-- 右侧编辑区域 -->
        <div class="editor">
            <div class="editor-header" id="editorHeader" style="display: none;">
                <input type="text" class="note-title-input" id="noteTitleInput" data-lang="notes-title" placeholder="标题">
                <div class="editor-actions">
                    <button class="action-btn pin-btn" id="pinBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 17v5"></path>
                            <path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"></path>
                        </svg>
                    </button>
                    <button class="action-btn delete-btn" id="deleteBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="editor-body" id="editorBody">
                <div class="placeholder" data-lang="editor-placeholder" id="editorPlaceholder">请新建或选择一个便签</div>
                <textarea class="note-content-input" id="noteContentInput" style="display: none;" data-lang="note-content-input" placeholder="正文"></textarea>
            </div>
        </div>
		</div>
		</div>
	</div>
	</div>


    <div class="footer"  id="footer">
        <p>©2026 Aphasia&emsp;<a href="https://icp.gov.moe/?keyword=20251027" target="_blank" draggable="false" data-lang="footbtn2">萌 ICP 备 20251027 号</a></p>
    </div>

	<script>
    // 劫持原生alert/confirm
    	(function() {
      		// 保存原生方法
      		const nativeAlert = window.alert;
      		const nativeConfirm = window.confirm;

      		// 重写全局alert/confirm
      		function createCustomAlert(message) {
        		return new Promise((resolve) => {
          			const customAlert = document.getElementById('customAlert');
          				document.getElementById('alertMessage').textContent = message;
          				customAlert.classList.add('active');

          				document.getElementById('alertConfirm').onclick = () => {
            			customAlert.classList.remove('active');
            			resolve();
          			};
        		});
      		}

			window.alert = async function(message) {
        		await createCustomAlert(message);
      		};

			document.addEventListener('click', function(e) {
				if (e.target === customAlert) {
            	   customAlert.classList.remove('active');
            	}
        	});

	  		window.confirm = function(message) {
                return new Promise((resolve) => {
                    confirmMessage.textContent = message;
                    customConfirmModal.classList.add('active');
                    
                    confirmOkBtn.onclick = () => {
                        customConfirmModal.classList.remove('active');
                        resolve(true);
                    };
                    
                    confirmCancelBtn.onclick = () => {
                        customConfirmModal.classList.remove('active');
                        resolve(false);
                    };
                });
            };

	  		// 事件监听关闭alert/confirm弹窗
        	document.addEventListener('click', function(e) {
            	if (e.target === customConfirmModal) {
            		customConfirmModal.classList.remove('active');
            	}
        	});
    })();

	      	// 自定义confirm 修复了异步问题
        	document.getElementById('clearStorageBtn').addEventListener('click', async () => {
         	// 使用async/await处理异步
            	const choice = await i18nConfirm('确定要删除所有数据吗？此操作不可撤销。');
            	// 选择后处理
            		if (choice) {
                		localStorage.clear();
        				i18nAlert('已清除所有数据');
            		} else {
            	}
			});
  </script>

    <script>
        // 搜索引擎配置
        const engines = {
			//kimi: {
            //    name: "Kimi",
            //    url: "https://kimi.moonshot.cn/_prefill_chat?send_immediately=true&prefill_prompt=",
            //    suggest: "https://suggestion.baidu.com/su?wd={query}&cb={callback}",
            //    method: "jsonp"
            //},
			metaso: {
        name: "秘塔 AI",
        url: "https://metaso.cn/?q=",
        icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><polyline points="2,20 8.5,4 15,20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><line x1="15.5" y1="4" x2="15.5" y2="4" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><line x1="17.9" y1="10" x2="22" y2="20" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
        suggest: "https://www.baidu.com/sugrec?prod=pc&wd={query}&cb={callback}",
        method: "jsonp"
    },
    baidu: {
        name: "百度",
        url: "https://www.baidu.com/s?wd=",
        icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23.868 26" transform="scale(0.93)"><path d="M3.613 13.701c2.827-.608 2.442-3.986 2.357-4.725-.138-1.139-1.477-3.128-3.296-2.971C.386 6.21.052 9.515.052 9.515c-.309 1.528.74 4.793 3.561 4.186zm3.002 5.875c-.083.238-.268.846-.107 1.375.315 1.187 1.346 1.24 1.346 1.24h1.48v-3.619H7.749c-.713.213-1.057.767-1.134 1.004zM8.86 8.035c1.562 0 2.823-1.797 2.823-4.019C11.683 1.796 10.421 0 8.86 0C7.301 0 6.036 1.796 6.036 4.016c0 2.222 1.265 4.019 2.824 4.019zm6.724.265c2.087.271 3.429-1.956 3.695-3.644.272-1.686-1.074-3.644-2.552-3.98-1.48-.339-3.329 2.032-3.497 3.578-.2 1.89.271 3.778 2.354 4.046zm5.114 9.923s-3.229-2.498-5.113-5.198c-2.555-3.981-6.185-2.361-7.399-.337-1.209 2.024-3.093 3.305-3.36 3.644-.271.334-3.9 2.293-3.095 5.871.806 3.576 3.635 3.508 3.635 3.508s2.085.205 4.504-.336c2.42-.537 4.503.134 4.503.134s5.652 1.893 7.199-1.751c1.545-3.645-.874-5.535-.874-5.535zm-9.671 5.423H7.352c-1.587-.316-2.219-1.4-2.299-1.584-.078-.188-.528-1.059-.29-2.539.686-2.219 2.642-2.379 2.642-2.379h1.956V14.74l1.666.025v8.881zm6.844-.025h-4.229c-1.639-.423-1.716-1.587-1.716-1.587v-4.677l1.716-.027v4.203c.104.447.661.529.661.529h1.742v-4.705h1.825v6.264zm5.986-12.486c0-.808-.671-3.239-3.159-3.239-2.492 0-2.825 2.295-2.825 3.917 0 1.548.131 3.71 3.227 3.641 3.096-.068 2.757-3.507 2.757-4.319z" fill="currentColor"/></svg>`,
        suggest: "https://www.baidu.com/sugrec?prod=pc&wd={query}&cb={callback}",
        method: "jsonp"
    },
    bing: {
        name: "必应",
        url: "https://www.bing.com/search?q=",
        icon: `<svg viewBox="-32 0 320 320" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path d="M95.055,82.908 L127.636,153.555 L175.78,175.332 L2.125,266.695 L73.279,203.267 L73.279,22.449 L0,0 L0,268.932 L72.83,319.986 L256,210.88 L256,132.227 L95.055,82.908" fill="currentColor"></path></g></svg>`,
        //suggest: "https://www.baidu.com/sugrec?prod=pc&wd={query}&cb={callback}",
		suggest: "https://api.bing.com/qsonhs.aspx?type=cb&q={query}&cb={callback}",		
        method: "jsonp"
    },
    google: {
        name: "谷歌",
        url: "https://www.google.com/search?q=",
        icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><path d="M12 10v4.5h6.47c-.5 2.7-3 4.74-6.47 4.74-3.9 0-7.1-3.3-7.1-7.25S8.1 4.75 12 4.75c1.8 0 3.35.6 4.6 1.8l3.4-3.4C18 1.2 15.24 0 12 0 5.4 0 0 5.4 0 12s5.4 12 12 12c7 0 11.5-4.9 11.5-11.7 0-.8-.1-1.54-.2-2.3H12z"/></svg>`,
        suggest: "https://suggestqueries.google.com/complete/search?client=firefox&q={query}&callback={callback}",
        method: "jsonp"
    },
    duckduckgo: {
        name: "DDG",
        url: "https://duckduckgo.com/?q=",
        icon: `<svg enable-background="new 0 0 515.91 728.5" id="Layer_1" version="1.1" viewBox="0 0 512.00003 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="g4247" transform="matrix(0.33013561,0,0,0.33013561,-398,-910) scale(1.55)"><path d="m 1050.1466,1793.3435 c -3.778,-0.08 -7.3883,0.051 -10.8077,0.3463 -7.9259,0.6868 -22.8904,2.8667 -33.2546,4.8497 l -18.84414,3.6027 -11.08485,15.7958 c -6.09666,8.697 -11.44864,16.7987 -11.9162,17.9435 -0.52543,1.2856 8.79759,1.3639 24.38666,0.2771 41.93753,-2.9234 69.41673,-0.38 103.92013,9.6298 l 14.4102,4.2263 -13.3017,5.9581 c -21.3578,9.5926 -38.331,14.7136 -63.1142,19.1213 -22.4505,3.993 -31.29962,7.8931 -36.37201,15.9345 -1.27081,2.0142 -1.71882,4.3085 -0.97016,5.0576 0.74907,0.7486 11.16927,0.2264 23.13987,-1.1085 38.5825,-4.3023 80.5233,-5.2529 104.7514,-2.4249 29.8263,3.4812 36.042,5.6265 22.4469,7.7594 -22.7178,3.5644 -53.2942,13.0779 -72.1209,22.3775 -52.2109,25.7908 -84.90895,71.0312 -94.15151,130.3855 -3.39816,21.8228 -2.87186,69.617 1.0391,97.4774 7.80481,55.5991 31.12671,173.9225 61.31311,310.7912 9.681,43.896 25.4984,116.2245 35.1247,160.73 9.6265,44.5056 20.07,92.256 23.2088,106.1373 0.6139,2.7142 1.0384,4.5856 1.5935,7.0666 29.8311,18.7825 148.6221,53.033 301.092,0 -23.9031,-34.3276 -68.6566,-105.4905 -68.6566,-109.6014 0,-0.5354 10.2256,2.9732 22.7239,7.7594 30.6276,11.7285 62.0259,20.0961 72.1206,19.2599 7.1795,-0.5945 8.8384,-1.8804 12.6784,-9.5606 4.0482,-8.0969 4.4339,-13.3019 4.4339,-59.8581 0,-56.0723 -2.6492,-77.37 -10.9465,-87.0158 -4.2011,-4.8845 -5.9877,-5.4336 -13.1629,-4.0875 -13.5364,2.5396 -49.4679,22.2595 -76.7626,42.1224 -14.0225,10.2043 -25.8627,17.3889 -26.3265,16.0037 -2.0604,-6.1514 -8.0537,-10.2536 -14.9645,-10.2536 -6.4383,0 -7.8438,-1.0665 -10.8771,-8.3136 -5.8604,-14.0017 -18.446,-60.3946 -22.1003,-81.4736 -4.9035,-28.2818 -4.6713,-83.1362 0.3463,-83.1362 0.5178,0 5.6107,2.3655 11.3619,5.2653 20.4095,10.2898 72.8931,30.0429 94.7063,35.6792 48.8273,12.6167 76.1247,11.7586 140.0844,-4.4339 68.66,-17.3822 96.5769,-32.2642 96.5769,-51.4058 0,-3.5551 -2.1084,-7.6039 -5.2653,-10.1843 -4.8009,-3.9236 -7.6137,-4.1901 -31.8689,-2.9097 -14.632,0.7724 -37.5779,2.87 -50.9903,4.711 -86.7703,11.91 -113.0806,12.3351 -145.2114,2.1476 -32.7393,-10.3798 -47.9909,-20.1252 -55.2858,-35.1943 -2.4999,-5.1643 -4.5723,-12.4088 -4.5723,-16.1422 0,-11.7318 3.084,-12.5461 36.0257,-9.5607 70.9211,6.4274 73.1258,6.1663 134.6808,-13.7867 85.9415,-27.8579 157.6433,-60.6948 169.5287,-77.6633 12.637,-18.0418 -12.0523,-32.7002 -55.0085,-32.7002 -22.1225,0 -47.7405,6.0361 -118.3307,27.8506 -26.1117,8.0693 -47.8974,14.247 -48.427,13.7175 -0.5295,-0.5296 0.2106,-8.6053 1.6628,-17.9435 7.8542,-50.5216 -21.1138,-147.6786 -62.4215,-209.4343 -24.135,-36.0822 -53.0965,-57.5041 -94.2903,-69.7655 -16.5639,-4.9301 -18.8358,-6.3667 -34.571,-22.1003 -46.5594,-46.5547 -140.7107,-88.7434 -197.379,-89.9257 z m 300.3989,208.4644 c 14.0407,0.3145 27.0813,6.649 34.7785,17.4585 4.7212,6.6308 4.8372,7.0671 0.9007,5.4733 -17.9487,-7.2675 -24.4933,-8.4149 -42.261,-7.4822 -14.791,0.7763 -20.048,2.0152 -25.2871,5.8886 -5.5968,4.1382 -6.6509,4.3703 -6.6509,1.3165 0,-6.0452 14.0862,-18.1679 24.3173,-20.9226 4.725,-1.2724 9.522,-1.8368 14.2025,-1.7321 z m -262.0181,14.3411 c 11.7572,-0.3962 23.7036,2.8882 30.2062,8.6598 l 5.9583,5.2653 -7.4131,-2.4941 c -12.4396,-4.1587 -33.5013,-1.1379 -48.6347,6.9281 -16.0283,8.5433 -22.0524,14.5365 -25.9798,25.911 l -2.9099,8.5214 -1.5934,-6.3044 c -1.9114,-7.5579 1.782,-20.9068 7.898,-28.6822 5.5623,-7.0713 20.1123,-14.2722 34.4319,-16.9736 2.6236,-0.4948 5.3234,-0.74 8.0365,-0.8313 z m 281.4857,69.4188 c 9.5751,0 23.0416,8.5242 28.3355,17.9434 8.3062,14.7786 4.0214,31.0872 -11.2231,42.4689 -5.843,4.3622 -20.601,6.9167 -26.3265,4.5725 -14.8021,-6.06 -25.8936,-23.8404 -23.3475,-37.4113 2.6081,-13.9026 18.7193,-27.5735 32.5616,-27.5735 z m 15.6574,14.3409 c -1.5616,-0.057 -3.2408,0.2797 -4.9188,1.1778 -7.5514,4.0416 -4.2726,15.5189 4.4339,15.5189 1.9509,0 4.7721,-1.1696 6.235,-2.6327 5.7413,-5.7413 1.0168,-13.8115 -5.7501,-14.064 z m -271.232,3.7413 c 7.2936,-0.2734 10.6576,0.9824 18.2899,5.8887 6.7644,4.3486 11.8156,9.8453 14.9646,16.3501 5.6532,11.6786 5.8951,16.9605 1.3162,27.9201 -8.4141,20.1374 -28.1529,30.2987 -46.1406,23.8324 -10.5076,-3.7772 -20.9409,-13.2136 -25.0101,-22.7239 -9.6561,-22.5678 7.5988,-49.0796 33.1851,-51.0597 1.2258,-0.095 2.3528,-0.1684 3.3949,-0.2084 z m 16.5578,15.1723 c -9.5709,-0.1264 -13.835,12.8569 -5.7502,17.5279 4.2898,2.4789 11.9071,0.998 14.4104,-2.8405 3.3116,-5.0796 -2.301,-14.6041 -8.6602,-14.6874 z" fill="currentColor"/></g></svg>`,
        suggest: "https://suggestqueries.google.com/complete/search?client=firefox&q={query}&callback={callback}",
        method: "jsonp"
    }
        };

        // 获取元素
        const themeToggle = document.getElementById('themeToggle');
		
        const engineSelect = document.getElementById('engineSelect');
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');
        const logo = document.getElementById('logo');
        const suggestionsBox = document.getElementById('suggestionsBox');

		const themeToggle2 = document.getElementById('themeToggle2');

		const clearButton = document.getElementById('clearButton');
        
        // 用于存储联想请求计数器和定时器
        let suggestReqCounter = 0;
        let suggestionTimer = null;

        // 搜索历史记录
        const SEARCH_HISTORY_KEY = 'searchHistory';
        const MAX_HISTORY_ITEMS = 6;

        // 全局更新logo函数
function updateLogo() {
    const logo = document.getElementById('logo');
    const hasCustomBg = localStorage.getItem(BG_IMAGE_KEY) !== null;
	const barBox = document.getElementById('bar');
    
    if (hasCustomBg) {
        // 有自定义背景时使用透明logo
        logo.classList.add('tan') ;
		barBox.classList.remove('barbox-normal');
		headerbox.classList.add('header-box-img');
    } else {
        // 无自定义背景时根据主题切换logo
            logo.classList.remove('tan') ;
			barBox.classList.add('barbox-normal')
			headerbox.classList.remove('header-box-img');
    }
}


const colorSelect = document.getElementById('colorSelect');
const colorOptions = document.getElementById('colorOptions');

// 切换下拉框显示
            colorSelect.addEventListener('click', function() {
                colorOptions.classList.toggle('active');
                colorSelect.classList.toggle('active');
            });
 // 点击页面其他区域关闭下拉框
            document.addEventListener('click', function(e) {
                if (!colorSelect.contains(e.target) && !colorOptions.contains(e.target)) {
                    colorOptions.classList.remove('active');
                    colorSelect.classList.remove('active');
                }
            });

// 预定义主题色配置
const themeColors = {
	magenta: {
        light: {
            themeColor: '#a74e66',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(167, 78, 102, 0.8)'
        },
        dark: {
            themeColor: '#ffccd8',
            themeColorText: '#5a2230',
            themeColorShadow: 'rgba(255, 204, 216, 0.8)'
        }
    },
    rose: {
        light: {
            themeColor: '#b64859',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(182, 72, 89, 0.8)'
        },
        dark: {
            themeColor: '#ffbec7',
            themeColorText: '#62262f',
            themeColorShadow: 'rgba(255, 190, 199, 0.8)'
        }
    },
	pink2: {
        light: {
            themeColor: '#cd6782',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(205, 103, 130, 0.8)'
        },
        dark: {
            themeColor: '#ffc7d2',
            themeColorText: '#4d2630',
            themeColorShadow: 'rgba(255, 199, 210, 0.8)'
        }
    },
	orangepink: {
        light: {
            themeColor: '#db8889',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(219, 136, 137, 0.8)'
        },
        dark: {
            themeColor: '#f5d5d6',
            themeColorText: '#553d3d',
            themeColorShadow: 'rgba(245, 213, 214, 0.8)'
        }
    },
    tangerine: {
        light: {
            themeColor: '#D77162',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(215,113,98, 0.8)'
        },
        dark: {
            themeColor: '#FDDACD',
            themeColorText: '#512A25',
            themeColorShadow: 'rgba(253,218,205, 0.8)'
        }
    },
	orange: {
        light: {
            themeColor: '#dc995c',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(220, 153, 92, 0.8)'
        },
        dark: {
            themeColor: '#fad8b6',
            themeColorText: '#552f09',
            themeColorShadow: 'rgba(250, 216, 182, 0.8)'
        }
    },
	yellow: {
        light: {
            themeColor: '#D4B24D',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(212,178,77, 0.8)'
        },
        dark: {
            themeColor: '#fae0ad',
            themeColorText: '#5b451c',
            themeColorShadow: 'rgba(250, 224, 173, 0.8)'
        }
    },
    yellowgreen: {
        light: {
            themeColor: '#B5A852',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(181,168,82, 0.8)'
        },
        dark: {
            themeColor: '#F4E99C',
            themeColorText: '#473F06',
            themeColorShadow: 'rgba(244,233,156, 0.8)'
        }
    },
	grassgreen: {
        light: {
            themeColor: '#799845',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(121,152,69, 0.8)'
        },
        dark: {
            themeColor: '#E0F0C4',
            themeColorText: '#2e5000',
            themeColorShadow: 'rgba(224,240,196, 0.8)'
        }
    },
	darkgreen: {
        light: {
            themeColor: '#537965',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(83, 121, 101, 0.8)'
        },
        dark: {
            themeColor: '#c8edd9',
            themeColorText: '#30453a',
            themeColorShadow: 'rgba(200, 237, 217, 0.8)'
        }
    },
	cyan: {
        light: {
            themeColor: '#53ac8b',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(83, 172, 139, 0.8)'
        },
        dark: {
            themeColor: '#d0fbeb',
            themeColorText: '#2c5c4b',
            themeColorShadow: 'rgba(208, 251, 235, 0.8)'
        }
    },
	aquablue: {
        light: {
            themeColor: '#3da7b3',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(61, 167, 179, 0.8)'
        },
        dark: {
            themeColor: '#bbf8ff',
            themeColorText: '#193e41',
            themeColorShadow: 'rgba(187, 248, 255, 0.8)'
        }
    },
	lightblue: {
        light: {
            themeColor: '#5697BE',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(86,151,190, 0.8)'
        },
        dark: {
            themeColor: '#b2d7f2',
            themeColorText: '#163344',
            themeColorShadow: 'rgba(178, 215, 242, 0.8)'
        }
    },
	blue: {
        light: {
            themeColor: '#4782cb',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(71, 130, 203, 0.8)'
        },
        dark: {
            themeColor: '#c0d6f7',
            themeColorText: '#1a304b',
            themeColorShadow: 'rgba(192, 214, 247, 0.8)'
        }
    },
    ultramarine: {
        light: {
            themeColor: '#4454ba',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(68, 84, 186, 0.8)'
        },
        dark: {
            themeColor: '#bac3ff',
            themeColorText: '#07208a',
            themeColorShadow: 'rgba(186, 195, 255, 0.8)'
        }
    },
	navyblue: {
        light: {
            themeColor: '#5e6983',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(94, 105, 131, 0.8)'
        },
        dark: {
            themeColor: '#c4cfe9',
            themeColorText: '#323946',
            themeColorShadow: 'rgba(196, 207, 233, 0.8)'
        }
    },
    blueviolet: {
        light: {
            themeColor: '#8782b8',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(135, 130, 184, 0.8)'
        },
        dark: {
            themeColor: '#d0cbff',
            themeColorText: '#312e42',
            themeColorShadow: 'rgba(208, 203, 255, 0.8)'
        }
    },
	purple: {
        light: {
            themeColor: '#966ec9',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(150, 110, 201, 0.8)'
        },
        dark: {
            themeColor: '#debeff',
            themeColorText: '#330155',
            themeColorShadow: 'rgba(222, 190, 255, 0.8)'
        }
    },	
	lavender: {
        light: {
            themeColor: '#ca87cd',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(202, 135, 205, 0.8)'
        },
        dark: {
            themeColor: '#f5cbf7',
            themeColorText: '#502d52',
            themeColorShadow: 'rgba(245, 203, 247, 0.8)'
        }
    },
	pink: {
        light: {
            themeColor: '#c66e97',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(198, 110, 151, 0.8)'
        },
        dark: {
            themeColor: '#ffcde1',
            themeColorText: '#542239',
            themeColorShadow: 'rgba(255, 205, 225, 0.8)'
        }
    },
    kipfel: {
        light: {
            themeColor: '#9A7F60',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(154,127,96, 0.8)'
        },
        dark: {
            themeColor: '#E8DBCB',
            themeColorText: '#503E33',
            themeColorShadow: 'rgba(232,219,203, 0.8)'
        }
    },
    brown2: {
        light: {
            themeColor: '#AD8874',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(173,136,116, 0.8)'
        },
        dark: {
            themeColor: '#F1D9C6',
            themeColorText: '#503E33',
            themeColorShadow: 'rgba(241,217,198, 0.8)'
        }
    },
	brown: {
        light: {
            themeColor: '#765651',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(118, 86, 81, 0.8)'
        },
        dark: {
            themeColor: '#edcbc6',
            themeColorText: '#402d2b',
            themeColorShadow: 'rgba(237, 203, 198, 0.8)'
        }
    },
	grey: {
        light: {
            themeColor: '#6f6f6f',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(111, 111, 111, 0.8)'
        },
        dark: {
            themeColor: '#cfcfcf',
            themeColorText: '#3c3c3c',
            themeColorShadow: 'rgba(207, 207, 207, 0.8)'
        }
    },
	black: {
        light: {
            themeColor: '#333333',
            themeColorText: '#ffffff',
            themeColorShadow: 'rgba(51, 51, 51, 0.8)'
        },
        dark: {
            themeColor: '#ffffff',
            themeColorText: '#333333',
            themeColorShadow: 'rgba(255, 255, 255, 0.8)'
        }
    },
};

// 初始化主题色
function initThemeColor() {
    const savedThemeColor = localStorage.getItem('themeColor') || 'magenta'; // 默认品红
    applyThemeColor(savedThemeColor);
    // 激活对应的按钮
    document.querySelectorAll('.md-btnc').forEach(btn => {
        if (btn.getAttribute('data-theme') === savedThemeColor) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
}

// 应用主题色
function applyThemeColor(themeName) {
    const theme = themeColors[themeName];
    if (!theme) return;
    
    // 获取当前是否是深色模式
    const isDark = document.body.classList.contains('dark-theme');
    const mode = isDark ? 'dark' : 'light';
    
    // 获取根元素
    const root = document.documentElement;
    
    // 设置变量
    root.style.setProperty('--themeColor', theme[mode].themeColor);
    root.style.setProperty('--themeColorText', theme[mode].themeColorText);
    root.style.setProperty('--themeColorShadow', theme[mode].themeColorShadow);
    
    // 保存到localStorage
    localStorage.setItem('themeColor', themeName);
}

// 为颜色选择按钮添加事件监听
function setupThemeColorButtons() {
    document.querySelectorAll('.md-btnc').forEach(btn => {
        btn.addEventListener('click', function() {
            const themeName = this.getAttribute('data-theme');
            if (themeName && themeColors[themeName]) {
                applyThemeColor(themeName);
                // 更新按钮激活状态
                document.querySelectorAll('.md-btnc').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            }
        });
    });
}

// 初始化主题
function initTheme() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        themeToggle2.classList.toggle('checked');
    } else {
        document.body.classList.remove('dark-theme');
    }
    // 初始化时更新logo
    updateLogo();
	// 初始化主题色
	initThemeColor();
}

// 切换主题
function toggleTheme() {
    document.body.classList.toggle('dark-theme');
    if (document.body.classList.contains('dark-theme')) {
        localStorage.setItem('theme', 'dark');
        themeToggle2.classList.toggle('checked');
		initThemeColor();
    } else {
        localStorage.setItem('theme', 'light');
        themeToggle2.classList.remove('checked');
		initThemeColor();
    }
    // 主题切换后更新logo
    updateLogo();
	const savedThemeColor = localStorage.getItem('themeColor') || 'magenta'; // 默认品红
    applyThemeColor(savedThemeColor);
}

// 页面加载完成后设置主题色按钮
document.addEventListener('DOMContentLoaded', function() {
    // 设置主题色按钮事件
    setupThemeColorButtons();
    
    // 确保主题色在初始化时被应用
    initThemeColor();
});

		themeToggle.addEventListener('click', toggleTheme); 
		themeToggle2.addEventListener('click', toggleTheme); 

        // 初始化搜索引擎
        function initEngine() {
            const savedEngine = localStorage.getItem('engine') || 'bing';
            engineSelect.value = savedEngine;
        }
        
        // 显示/隐藏联想建议框
        function toggleSuggestions(show = true) {
			//const barSearchElement = document.getElementById('bar');
			//const barItem = barSearchElement.querySelectorAll('.bar-item');
			//const shortcutIcon = barSearchElement.querySelectorAll('.shortcut-icon');
            if (show) {
                suggestionsBox.classList.add('show');
				//barSearchElement.style.opacity = '0';
				//shortcutIcon.style.backdropFilter = 'blur(0px) saturate(100%)';
				//shortcutIcon.style.webkitBackdropFilter = 'blur(0px) saturate(100%)';
            } else {
                suggestionsBox.classList.remove('show');
				//barSearchElement.style.opacity = '1';
				//shortcutIcon.style.backdropFilter = 'blur(20px) saturate(200%)';
				//shortcutIcon.style.webkitBackdropFilter = 'blur(20px) saturate(200%)';
            }
        }
        
        // 显示搜索中状态
        function showSearching() {
            suggestionsBox.innerHTML = `
                <div class="searching">
                    <div class="spinner"></div>
                    <span>正在获取搜索建议...</span>
                </div>
            `;
            toggleSuggestions(true);
        }
        
        // 显示空结果状态
        function showEmpty() {
            suggestionsBox.innerHTML = `
                <div class="suggestion-empty" data-lang="showEmpty">没有相关搜索建议</div>
            `;
            toggleSuggestions(true);
        }
		function showError() {
            suggestionsBox.innerHTML = `
                <div class="suggestion-empty" data-lang="showError">解析搜索建议失败，正在 Fallback</div>
            `;
            toggleSuggestions(true);
        }
		function showTimeOut() {
            suggestionsBox.innerHTML = `
                <div class="suggestion-empty" data-lang="showTimeOut">请求超时，正在 Fallback</div>
            `;
            toggleSuggestions(true);
        }
		function showFallbackError() {
            suggestionsBox.innerHTML = `
                <div class="suggestion-empty" data-lang="showFallbackError">Fallback 失败，请检查网络</div>
            `;
            toggleSuggestions(true);
        }
        
        // 处理点击外部关闭联想框
        document.addEventListener('click', (e) => {
            if (!searchForm.contains(e.target)) {
                toggleSuggestions(false);
            }
        });

		function toggleClearButton() {
    		if (searchInput.value.trim() !== '') {
        		clearButton.classList.add('show');
    		} else {
        		clearButton.classList.remove('show');
    		}
		}

        // 检测是否为有效URL
        function isValidUrl(str) {
            try {
                // 基本URL检测
                let urlPattern = /^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;
                if (!urlPattern.test(str)) return false;
                
                // 如果没有协议头，加上测试
                let testUrl = str;
                if (!/^https?:\/\//i.test(str)) {
                    testUrl = 'http://' + str;
                }
                
                new URL(testUrl);
                return true;
            } catch (e) {
                return false;
            }
        }

        // 通过JSONP获取建议
        function jsonpSuggestions(url, currentReqId) {
    		return new Promise((resolve, reject) => {
        // 创建回调函数
        const callbackName = `jsonpCallback_${Date.now()}`;
        window[callbackName] = (data) => {
            // 检查是否为最新请求
            if (currentReqId !== suggestReqCounter) return;
            
            try {
                let suggestions = [];
                
                // 新的百度数据格式
                if (engineSelect.value === 'baidu') {
                    // 从g数组中提取q字段的值
                    suggestions = data.g ? data.g.map(item => item.q) : [];
                }
				// 处理必应数据格式
				else if (engineSelect.value === 'bing') {
                    suggestions = data.AS.Results.flatMap(item => item.Suggests?.map(s => s.Txt) || []);
                }
                // 处理谷歌数据格式
                else if (engineSelect.value === 'google' || engineSelect.value === 'duckduckgo') {
                    suggestions = data[1] || [];
                } else {
                    //suggestions = data.s || [];（旧的百度接口）
					suggestions = data.g ? data.g.map(item => item.q) : [];
                }
                
                displaySuggestions(suggestions);
                resolve();
            } catch (e) {
                console.error('解析搜索建议失败:', e);
				showError()
                //toggleSuggestions(false);

				 // 延迟500毫秒后进行fallback
                setTimeout(() => {
                    if (currentReqId === suggestReqCounter) {
                        fallbackSuggestions(searchInput.value.trim(), currentReqId)
                            .then(resolve)
                            .catch(reject);
                    }
                }, 500);
            }
            
            // 清理
            delete window[callbackName];
            //scriptTag.remove();
			if (scriptTag.parentNode) {
                scriptTag.remove();
            }
        };
        
        // 创建并添加script标签
        const scriptTag = document.createElement('script');
        scriptTag.src = url.replace('{callback}', callbackName);
        document.body.appendChild(scriptTag);
        
        // 超时处理
        const timeoutId = setTimeout(() => {
            if (window[callbackName]) {
                delete window[callbackName];
                if (scriptTag.parentNode) {
                    scriptTag.remove();
                }
                if (currentReqId === suggestReqCounter) {
                    showTimeOut();
                    
                    // 延迟500毫秒后进行fallback
                    setTimeout(() => {
                        if (currentReqId === suggestReqCounter) {
                            fallbackSuggestions(searchInput.value.trim(), currentReqId)
                                .then(resolve)
                                .catch(reject);
                        }
                    }, 500);
                }
                reject(new Error('请求超时'));
            }
        }, 2000);
		// 添加超时ID以便清理
        scriptTag.timeoutId = timeoutId;
    		});
		}

		// Fallback搜索建议函数
function fallbackSuggestions(query, currentReqId) {
    return new Promise((resolve, reject) => {
        // 创建回调函数
        const callbackName = `jsonpCallback_fallback_${Date.now()}`;
        window[callbackName] = (data) => {
            // 检查是否为最新请求
            if (currentReqId !== suggestReqCounter) return;
            
            try {
                const suggestions = data.s || [];
                displaySuggestions(suggestions);
                resolve();
            } catch (e) {
                console.error('Fallback失败:', e);
				showFallbackError();
                //toggleSuggestions(false);
                reject(e);
            }
            
            // 清理
            delete window[callbackName];
            if (scriptTag.parentNode) {
                scriptTag.remove();
            }
        };
        
        // 创建并添加script标签
        const fallbackUrl = `https://suggestion.baidu.com/su?wd=${encodeURIComponent(query)}&cb=${callbackName}`;
        const scriptTag = document.createElement('script');
        scriptTag.src = fallbackUrl;
        document.body.appendChild(scriptTag);
        
        // 超时处理
        const timeoutId = setTimeout(() => {
            if (window[callbackName]) {
                delete window[callbackName];
                if (scriptTag.parentNode) {
                    scriptTag.remove();
                }
                if (currentReqId === suggestReqCounter) {
                    //toggleSuggestions(false);
					showFallbackError();
                }
                reject(new Error('Fallback请求超时'));
            }
        }, 2500);
        
        // 添加超时ID以便清理
        scriptTag.timeoutId = timeoutId;
    });
}
        
        // 显示建议到下拉框
// 显示建议到下拉框
function displaySuggestions(suggestions) {
    const query = searchInput.value.trim();
    suggestionsBox.innerHTML = '';
    
    let hasSpecialItem = false;
    let maxRegularSuggestions = 7; // 正常情况显示7个
    
    // 首先检查输入是否是 "momotan"（不区分大小写）
    if (query.toLowerCase() === 'momotan') {
        const momotanItem = document.createElement('div');
        momotanItem.className = 'suggestion-item special-item';
        momotanItem.innerHTML = `
            <span class="suggestion-icon music-icon"></span>
            <span>✦ Momotan♡funk</span>
        `;
        
        momotanItem.addEventListener('click', () => {
            // 移除已存在的音乐卡片
            const existingCard = document.querySelector('.musiccard');
            if (existingCard) {
                existingCard.remove();
            }
            
            // 创建并添加音乐卡片
            const musicCard = document.createElement('div');
            musicCard.innerHTML = `
                <iframe class="musiccard" frameborder="no" border="0" marginwidth="0" marginheight="0" width=335 height=86 src="//music.163.com/outchain/player?type=2&id=2044553171&auto=1&height=66"></iframe>
            `;
            
            document.body.appendChild(musicCard);
            toggleSuggestions(false);
            // 注意：不添加到历史记录
        });
        
        suggestionsBox.appendChild(momotanItem);
        hasSpecialItem = true;
        maxRegularSuggestions = 6; // 有特殊项时只显示6个常规建议
    }
    // 其次检查输入是否是网址
    else if (isValidUrl(query)) {
        const visitUrl = /^https?:\/\//i.test(query) ? query : 'http://' + query;
        
        const visitItem = document.createElement('div');
        
        // 根据搜索建议数量决定样式
        if (suggestions && suggestions.length > 0) {
            visitItem.className = 'suggestion-item'; // 有搜索建议时使用普通样式
        } else {
            visitItem.className = 'suggestion-item visit-link'; // 无搜索建议时使用特殊样式
        }
        
        visitItem.innerHTML = `
            <span class="suggestion-icon link-icon"></span>
            <span data-lang="visit">✦ 访问：${query}</span>
        `;
        
        visitItem.addEventListener('click', () => {
            window.open(visitUrl, "_blank");
            toggleSuggestions(false);
            // 注意：不添加到历史记录
        });
        
        suggestionsBox.appendChild(visitItem);
        hasSpecialItem = true;
        maxRegularSuggestions = 6; // 有特殊项时只显示6个常规建议
    }
    
    // 修复：即使识别到网址，只要suggestions不为空，就显示搜索建议
    if (!suggestions || suggestions.length === 0) {
        if (!hasSpecialItem) {
            // 如果也没有特殊项，显示无结果
            showEmpty();
        }
        return;
    }
    
    // 显示常规建议（根据是否有特殊项决定显示数量）
    suggestions.slice(0, maxRegularSuggestions).forEach(suggestion => {
        const item = document.createElement('div');
        item.className = 'suggestion-item';
        item.innerHTML = `
            <span class="suggestion-icon"></span>
            <span>${suggestion}</span>
        `;
        
        item.addEventListener('click', () => {
            const engine = engineSelect.value;
            const searchUrl = engines[engine].url + encodeURIComponent(suggestion);
            window.open(searchUrl, '_blank');
            toggleSuggestions(false);
            addToSearchHistory(suggestion);
        });
        
        suggestionsBox.appendChild(item);
    });
    
    toggleSuggestions(true);
}

        // 搜索历史记录管理
        // 获取搜索历史记录
        function getSearchHistory() {
            const history = localStorage.getItem(SEARCH_HISTORY_KEY);
            return history ? JSON.parse(history) : [];
        }

        // 保存搜索历史记录
        function saveSearchHistory(history) {
            localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(history));
        }

        // 添加搜索历史记录
        function addToSearchHistory(query) {
            const history = getSearchHistory();
            // 移除重复项
            const newHistory = history.filter(item => item.toLowerCase() !== query.toLowerCase());
            // 添加到最前面
            newHistory.unshift(query);
            // 限制数量
            if (newHistory.length > MAX_HISTORY_ITEMS) {
                newHistory.pop();
            }
            saveSearchHistory(newHistory);
        }

        // 从历史记录中删除项目
        function removeFromHistory(index) {
            const history = getSearchHistory();
            history.splice(index, 1);
            saveSearchHistory(history);
            showHistory();
        }

        // 清除所有历史记录
        function clearHistory() {
            saveSearchHistory([]);
            toggleSuggestions(false);
        }

        // 显示搜索历史记录
        function showHistory() {
            const history = getSearchHistory();
            
            if (history.length === 0) {
                suggestionsBox.innerHTML = `
                    <div class="suggestion-empty">无搜索历史记录</div>
                `;
                toggleSuggestions(true);
                return;
            }
            
            suggestionsBox.innerHTML = '';
            
            // 添加历史记录标题
            const header = document.createElement('div');
            header.className = 'history-header';
            header.innerHTML = `
                <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span data-lang="recent-searches">最近搜索</span></span>
                <span class="history-clear" id="clearHistoryBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg><span data-lang="clear">清空</span></span>
            `;
            suggestionsBox.appendChild(header);
            
            // 添加历史记录项
            history.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-query">
                        <span class="suggestion-icon"></span>
                        <span>${item}</span>
                    </div>
                    <div class="history-delete">✕</div>
                `;
                
                // 点击历史记录进行搜索
                const queryElem = historyItem.querySelector('.history-query');
                queryElem.addEventListener('click', (e) => {
                    const query = item;
                    searchInput.value = query;
                    const engine = engineSelect.value;
                    const searchUrl = engines[engine].url + encodeURIComponent(query);
                    window.open(searchUrl, '_blank');
                    toggleSuggestions(false);
                    addToSearchHistory(query);
                });
                
                // 点击删除按钮
                const deleteBtn = historyItem.querySelector('.history-delete');
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeFromHistory(index);
                });
                
                suggestionsBox.appendChild(historyItem);
            });
            
            // 清空历史记录按钮
            const clearBtn = document.getElementById('clearHistoryBtn');
            clearBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                clearHistory();
            });
            
            toggleSuggestions(true);
        }
        
        // 获取搜索建议
        function getSuggestions() {
    const query = searchInput.value.trim();
    
    // 检查是否为网址或momotan，但仍然获取搜索建议
    const isUrl = isValidUrl(query);
    const isMomotan = query.toLowerCase() === 'momotan';
    
    if (query.length === 0) {
        // 只有当有历史记录时才显示
        if (getSearchHistory().length > 0) {
            showHistory();
        } else {
            toggleSuggestions(false);
        }
        return;
    }
    
    const engine = engineSelect.value;
    const engineData = engines[engine];
    
    // 如果没有建议API配置则直接返回
    if (!engineData.suggest) {
        // 但仍然要显示特殊项（网址或momotan）
        if (isUrl || isMomotan) {
            displaySuggestions([]);
        } else {
            toggleSuggestions(false);
        }
        return;
    }
    
    // 增加请求计数器并显示加载状态
    suggestReqCounter++;
    const currentReqId = suggestReqCounter;
    
    // 构建请求URL
    const suggestUrl = engineData.suggest.replace('{query}', encodeURIComponent(query));
    
    // 根据方法类型执行请求
    try {
        jsonpSuggestions(suggestUrl, currentReqId);
    } catch (e) {
        console.error('获取建议出错:', e);
        // 即使出错，也要显示特殊项（网址或momotan）
        if (isUrl || isMomotan) {
            displaySuggestions([]);
        } else {
            toggleSuggestions(false);
        }
    }
}
        
        // 防抖处理搜索建议
        function debounceSuggestions() {
            if (suggestionTimer) {
                clearTimeout(suggestionTimer);
            }
            
            suggestionTimer = setTimeout(() => {
                getSuggestions();
            }, 250);
        }

        // 处理搜索
        function handleSearch(e) {
            e.preventDefault();
            const query = searchInput.value.trim();
            if (query) {
                const engine = engineSelect.value;
                const searchUrl = engines[engine].url + encodeURIComponent(query);
                window.open(searchUrl, '_blank');
                toggleSuggestions(false);
                // 添加到历史记录
                addToSearchHistory(query);
            }
        }

        // 事件监听  
        engineSelect.addEventListener('change', function() {
            localStorage.setItem('engine', this.value);
            //updateLogo(this.value);
            debounceSuggestions();
        });
   
        searchForm.addEventListener('submit', handleSearch);
        searchInput.addEventListener('input', () => {
    		debounceSuggestions();
    		toggleClearButton();
		});
        searchInput.addEventListener('focus', () => {
            // 当输入框获得焦点时，如果内容为空且有历史记录则显示历史记录
            const query = searchInput.value.trim();
            if (query.length === 0 && getSearchHistory().length > 0) {
                showHistory();
            } else if (query.length > 0) {
                // 如果是网址，直接显示访问选项
                if (isValidUrl(query)) {
                    displaySuggestions([]);
                } else {
                    debounceSuggestions();
                }
            }
			toggleClearButton();
        });
		clearButton.addEventListener('click', () => {
    		searchInput.value = '';
    		toggleClearButton(); // 隐藏清空按钮
    		searchInput.focus(); // 焦点回到输入框
    		// 如果之前有联想建议框，则关闭
    		toggleSuggestions(false);
    		// 如果输入框为空，且有历史记录，则显示历史记录
    		if (getSearchHistory().length > 0) {
        		showHistory();
    		}
		});
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            initEngine();
            searchInput.focus();
			toggleClearButton();
        });

		// 更多窗口
		document.addEventListener('DOMContentLoaded', function() {
            var modal = document.getElementById("myModal");
			var modalBlur = document.getElementById("modalBlur");
            var btn = document.getElementById("openModalBtn");
			var btn2 = document.getElementById("logo");
            var span = document.getElementById("modalclose");
            
            btn.onclick = function() {
                modal.classList.add("active");
                //document.body.style.overflow = "hidden";
            }

			btn2.onclick = function() {
                modal.classList.add("active");
                //document.body.style.overflow = "hidden";
            }
            
            span.onclick = function() {
                modal.classList.remove("active");
                //document.body.style.overflow = "auto";
            }
            
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.classList.remove("active");
                    //document.body.style.overflow = "auto";
                }
            }
			window.onclick = function(event) {
                if (event.target == modalBlur) {
                    modal.classList.remove("active");
                    //document.body.style.overflow = "auto";
                }
            }
        });


		// 便签窗口
		document.addEventListener('DOMContentLoaded', function() {
            var notemodal = document.getElementById("noteModal");
			var modalBlur2 = document.getElementById("modalBlur2");
            var notebtn = document.getElementById("noteModalBtn");
			var notebtn2 = document.getElementById("pinnedNotesContainer");
            var notespan = document.getElementById("noteclose");
            
            notebtn.onclick = function() {
                notemodal.classList.add("active");
                //document.body.style.overflow = "hidden";
            }

			notebtn2.onclick = function() {
                notemodal.classList.add("active");
                //document.body.style.overflow = "hidden";
            }
            
            notespan.onclick = function() {
                notemodal.classList.remove("active");
                //document.body.style.overflow = "auto";
            }

			notemodal.addEventListener('click', (e) => {
                if (e.target === notemodal) {
                    notemodal.classList.remove('active');
					//document.body.style.overflow = "auto";
                }
            });
			notemodal.addEventListener('click', (e) => {
                if (e.target === modalBlur2) {
                    notemodal.classList.remove('active');
					//document.body.style.overflow = "auto";
                }
            });
        });

		//禁用图片拖拽
    	document.addEventListener('dragstart', function(e) {
            if (e.target.tagName === 'IMG') {
                e.preventDefault();
                return false;
            }
        });
		document.addEventListener('dragstart', function(e) {
   			if (e.target.tagName === 'A') {
       			e.preventDefault();
   			}
		});

    </script>
	<script>
// 获取元素
const uploadBtn = document.getElementById('uploadBtn');
const bingBtn = document.getElementById('bingBtn');
const momotanApiBtn = document.getElementById('momotanApiBtn');
const resetBtn = document.getElementById('resetBtn');
const fileInput = document.getElementById('fileInput');
const fileInputImg = document.getElementById('fileInputimg');
const previewBox = document.getElementById('previewBox');
const statusMessage = document.getElementById('statusMessage');
const headerbox = document.getElementById('header-box');
const fileAsk = document.getElementById('fileAsk');
const fileAskBtn1 = document.getElementById('fileAskBtn1');
const fileAskBtn2 = document.getElementById('fileAskBtn2');

const pageBackground = document.getElementById('pageBackground');

// 背景图片存储在localStorage的键名
const BG_IMAGE_KEY = 'customBackgroundImage';
// 默认没有背景图片
const DEFAULT_BACKGROUND = '';

// 页面加载时初始化背景
document.addEventListener('DOMContentLoaded', () => {
    // 从localStorage获取背景图片
    const bgImageData = localStorage.getItem(BG_IMAGE_KEY);	
    
    if (bgImageData) {
        // 如果存在背景图片数据，应用为背景
        setBackground(bgImageData);
        // 在预览区域显示缩略图
        previewBox.style.backgroundImage = `url(${bgImageData})`;
        previewBox.innerHTML = '';
    } else {
        // 没有自定义背景时，使用默认背景
        previewBox.style.backgroundImage = '';
        previewBox.innerHTML = '<span style="color: #999; font-size: 14px;">图片预览</span>';
    }
    updateLogo();
});

// 设置页面背景
function setBackground(imageData) {
    pageBackground.style.backgroundImage = `url(${imageData})`;
    updateLogo();
}

// 设置必应壁纸函数
async function setBingWallpaper() {
    try {
        showStatus('正在获取必应每日壁纸...');
        
        // 使用必应壁纸API
        const bingImageUrl = 'https://bing.shangzhenyang.com/api/1080p';
        
        // 清除之前保存的自定义壁纸
        localStorage.removeItem(BG_IMAGE_KEY);
        
        // 设置背景为必应壁纸
        pageBackground.style.backgroundImage = `url(${bingImageUrl})`;
        
        // 更新预览区域
        previewBox.style.backgroundImage = `url(${bingImageUrl})`;
        previewBox.innerHTML = '';
        
        // 显示成功信息
        showStatus('已成功设置必应每日壁纸');
        
        localStorage.setItem(BG_IMAGE_KEY, bingImageUrl);
        updateLogo();
    } catch (error) {
        console.error('获取必应壁纸失败:', error);
        showStatus('错误：获取必应壁纸失败', true);
    }
}

momotanApiBtn.addEventListener('click', showMomotanOrientationModal);

// 显示MomotanApi壁纸选择模态框
function showMomotanOrientationModal() {
    const momotanApiAsk = document.getElementById('momotanApiAsk');
    momotanApiAsk.classList.toggle("active");
    
    // 获取两个选择按钮
    const verticalBtn = document.getElementById('momotanApiVertical');
    const horizontalBtn = document.getElementById('momotanApiHorizontal');
    
    // 为竖屏按钮添加点击事件
    verticalBtn.addEventListener('click', function() {
        setMomotanWallpaper('wallpaper.php?orientation=vertical');
        momotanApiAsk.classList.remove("active");

		// 显示成功信息
        showStatus('已成功设置壁纸');
    });
    
    // 为横屏按钮添加点击事件
    horizontalBtn.addEventListener('click', function() {
        setMomotanWallpaper('wallpaper.php');
        momotanApiAsk.classList.remove("active");

		// 显示成功信息
        showStatus('已成功设置壁纸');
    });
}

// 设置MomotanApi壁纸函数
async function setMomotanWallpaper(momotanImageUrl) {
    try {
        showStatus('正在从 MomotanApi 获取壁纸...');
        
        // 清除之前保存的自定义壁纸
        localStorage.removeItem(BG_IMAGE_KEY);
        
        // 设置背景为MomotanApi壁纸
        pageBackground.style.backgroundImage = `url(${momotanImageUrl})`;
        
        // 更新预览区域
        previewBox.style.backgroundImage = `url(${momotanImageUrl})`;
        previewBox.innerHTML = '';
        
        localStorage.setItem(BG_IMAGE_KEY, momotanImageUrl);
        updateLogo();
    } catch (error) {
        console.error('获取壁纸失败:', error);
        showStatus('错误：获取壁纸失败', true);
    }
}

// 恢复默认背景
async function resetToDefault() {
    const choice = await i18nConfirm('确定要重置背景图片吗？此操作不可撤销。');
    if (choice) {
        // 移除背景图片
        pageBackground.style.backgroundImage = DEFAULT_BACKGROUND;
        // 清除localStorage中的背景图片
        localStorage.removeItem(BG_IMAGE_KEY);
        // 重置预览区域
        previewBox.style.backgroundImage = '';
        previewBox.innerHTML = '<span style="color: #999; font-size: 14px;">图片预览</span>';
        updateLogo();
    }
}

// 显示状态信息
function showStatus(message, isError = false) {
    statusMessage.textContent = message;
    statusMessage.style.color = isError ? '#e74c3c' : '#27ae60';
}

// 处理文件选择的通用函数
function handleFileSelect(file) {
    if (!file) {
        return;
    }
    
    // 验证文件类型
    if (!file.type.match('image.*')) {
        showStatus('错误：不受支持的文件格式', true);
        return;
    }
    
    // 验证文件大小（限制为3mb）
    if (file.size > 3 * 1024 * 1024) {
        showStatus('错误：图片大小不能超过3mb', true);
        return;
    }
    
    // 读取文件
    const reader = new FileReader();
    
    // 读取文件完成时回调
    reader.onload = (event) => {
        // 获取图片数据（Base64）
        const imageData = event.target.result;
        
        // 保存到localStorage
        localStorage.setItem(BG_IMAGE_KEY, imageData);
        
        // 设置背景
        setBackground(imageData);
        
        // 在预览区域显示缩略图
        previewBox.style.backgroundImage = `url(${imageData})`;
        previewBox.innerHTML = '';
        
        // 显示成功信息
        showStatus('背景图片已设置并保存');
        updateLogo();
    };
    
    // 读取文件出错时回调
    reader.onerror = () => {
        showStatus('错误：读取文件失败', true);
    };
    
    // 开始读取文件（DataURL格式）
    reader.readAsDataURL(file);
}

// 点击上传按钮 - 显示来源选择模态框
uploadBtn.addEventListener('click', () => {
    fileAsk.classList.toggle("active");
});

document.addEventListener('click', function(e) {
                if (!uploadBtn.contains(e.target) && !fileAsk.contains(e.target)) {
                    fileAsk.classList.remove('active');
                    uploadBtn.classList.remove('active');
                }
            });

document.addEventListener('click', function(e) {
                if (!momotanApiBtn.contains(e.target) && !momotanApiAsk.contains(e.target)) {
                    momotanApiAsk.classList.remove('active');
                    momotanApiBtn.classList.remove('active');
                }
            });
// 为模态框按钮添加事件
fileAskBtn1.addEventListener('click', () => {
    // 文件管理器
    fileAsk.classList.remove("active");
    fileInput.click();
});

fileAskBtn2.addEventListener('click', () => {
    // 相册
    fileAsk.classList.remove("active");
    fileInputImg.click();
});

// 文件选择发生变化时处理
fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    handleFileSelect(file);
    // 重置文件输入，允许重复上传同一文件
    fileInput.value = '';
});

fileInputImg.addEventListener('change', (e) => {
    const file = e.target.files[0];
    handleFileSelect(file);
    // 重置文件输入，允许重复上传同一文件
    fileInputImg.value = '';
});

// 为必应壁纸按钮添加点击事件
bingBtn.addEventListener('click', setBingWallpaper);

// 恢复默认按钮
resetBtn.addEventListener('click', resetToDefault);

// 关闭模态框
document.addEventListener('click', (e) => {
	if (e.target === fileAsk) {
    	fileAsk.classList.remove('active');
  	}
});
// 关闭模态框
document.addEventListener('click', (e) => {
	if (e.target === momotanApiAsk) {
    	momotanApiAsk.classList.remove('active');
   	}
});
</script>
	<script>       
        // 获取元素
        const toggleBtn = document.getElementById('logobtn');
        const toggleElement = document.getElementById('logo-container');
        
        // 初始状态
        let isVisible = true;
        
        // 初始化函数
        function initialize() {
			
            // 从localStorage加载保存的状态
            const savedState = localStorage.getItem('elementVisibility');
            
            // 如果存在保存的状态
            if (savedState !== null) {
                isVisible = (savedState === 'true');
                updateElementVisibility(isVisible);
            }
			// 初始化按钮状态
    			synctoggleBtnState();
        }

		// 同步按钮状态
		function synctoggleBtnState() {
    		if (toggleBtn) {
        	isVisible ? toggleBtn.classList.remove('checked') : toggleBtn.classList.add('checked');
    		}
		}
        
        // 更新元素可见性
        function updateElementVisibility(show) {
            // 更新透明度
            toggleElement.style.opacity = show ? 1 : 0;

			// 同步按钮状态
    		synctoggleBtnState();
            
            // 将状态保存到localStorage
            localStorage.setItem('elementVisibility', show.toString());
        }
        
        // 切换按钮点击事件处理
        toggleBtn.addEventListener('click', () => {
            // 切换状态
            isVisible = !isVisible;
            
            // 更新
            updateElementVisibility(isVisible);
        });
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', initialize);
    </script>
	<script>       
        // 获取元素
        const quickBtn = document.getElementById('quickbtn');
        //const logo = document.getElementById('logo');
        
        // 初始状态
        let logoQuick = true;
        
        // 初始化函数
        function quickinitialize() {
			
            // 从localStorage加载保存的状态
            const logosavedState = localStorage.getItem('logoQuickSetting');
            
            // 如果存在保存的状态
            if (logosavedState !== null) {
                // 状态值为字符串形式的布尔值，需要转换
                logoQuick = (logosavedState === 'true');
                updatelogoQuickSetting(logoQuick);
            }
			// 初始化按钮状态
    		syncquickBtnState();
        }

		// 同步按钮状态
		function syncquickBtnState() {
    		if (quickBtn) {
        		logoQuick ? quickBtn.classList.add('checked') : quickBtn.classList.remove('checked');
    		}
		}
        
        // 更新元素可见性
        function updatelogoQuickSetting(show) {
            // 更新透明度
            logo.style.pointerEvents = show ? "auto" : "none";

			// 同步按钮状态
    		syncquickBtnState();
            
            // 将状态保存到localStorage
            localStorage.setItem('logoQuickSetting', show.toString());
        }
        
        // 切换按钮点击事件处理
        quickBtn.addEventListener('click', () => {
            // 切换状态
            logoQuick = !logoQuick;
            
            // 更新UI和存储
            updatelogoQuickSetting(logoQuick);
        });
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', quickinitialize);
    </script>
	<script>       
        // 获取元素
        const suggestionBtn = document.getElementById('suggestionbtn');
        //const suggestionsBox = document.getElementById('suggestionsBox');
        
        // 初始状态
        let suggestionShow = true;
        
        // 初始化函数
        function suggestionShowSetting() {
			
            // 从localStorage加载保存的状态
            const suggestionsavedState = localStorage.getItem('suggestionShowSetting');
            
            // 如果存在保存的状态
            if (suggestionsavedState !== null) {
                // 状态值为字符串形式的布尔值，需要转换
                suggestionShow = (suggestionsavedState === 'true');
                updatesuggestionShowSetting(suggestionShow);
            }
			// 初始化按钮状态
    		syncsuggestionBtnState();
        }

		// 同步按钮状态
		function syncsuggestionBtnState() {
    		if (suggestionBtn) {
        		suggestionShow ? suggestionBtn.classList.add('checked') : suggestionBtn.classList.remove('checked');
    		}
		}
        
        // 更新元素可见性
        function updatesuggestionShowSetting(show) {
            // 更新透明度
            suggestionsBox.style.display = show ? "block" : "none";

			// 同步按钮状态
    		syncsuggestionBtnState();
            
            // 将状态保存到localStorage
            localStorage.setItem('suggestionShowSetting', show.toString());
        }
        
        // 切换按钮点击事件处理
        suggestionBtn.addEventListener('click', () => {
            // 切换状态
            suggestionShow = !suggestionShow;
            
            // 更新UI和存储
            updatesuggestionShowSetting(suggestionShow);
        });
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', suggestionShowSetting);
    </script>
	<script>       
        // 获取元素
		const viaBtn = document.getElementById('viaBtn');
		const viaTitile = document.getElementById('viaTitile');
		const viaBox = document.getElementById('viaBox');

		// 初始状态
		let viaVisible = true;

		// 初始化函数
		function viainitialize() {
    		// 从localStorage加载保存的状态
    		const viasavedState = localStorage.getItem('viaVisibility');
    
    		// 如果存在保存的状态
    		if (viasavedState !== null) {
    		    viaVisible = (viasavedState === 'true');
    		    updateviaVisibility();
    		}
    		// 初始化按钮状态
    		syncviaBtnState();
		}

		// 同步按钮状态
		function syncviaBtnState() {
    		if (viaBtn) {
        		viaVisible ? viaBtn.classList.remove('checked') : viaBtn.classList.add('checked');
    		}
		}

		// 更新可见性和状态文本
		function updateviaVisibility() {
    		// 更新显示状态
    		viaTitile.style.display = viaVisible ? 'none' : 'block';
			viaBox.style.display = viaVisible ? 'none' : 'grid';

			syncviaBtnState()
    
    		// 保存状态到 localStorage
    		localStorage.setItem('viaVisibility', viaVisible.toString());
		}

		// 点击事件处理
		viaBtn.addEventListener('click', () => {
   			// 切换状态
    		viaVisible = !viaVisible;
    		// 更新所有相关元素
    		updateviaVisibility();
		});

		// 初始化
		document.addEventListener('DOMContentLoaded', viainitialize);

		// 页面加载时初始化
		window.addEventListener('DOMContentLoaded', viainitialize);
    </script>
	<script>       
        // 获取元素
		const barBtn = document.getElementById('barBtn');
		const barElement = document.getElementById('bar');
		const barState = document.getElementById('barState');

		// 初始状态
		let barVisible = true;

		// 初始化函数
		function barinitialize() {
    		// 从localStorage加载保存的状态
    		const barsavedState = localStorage.getItem('barVisibility');
    
    		// 如果存在保存的状态
    		if (barsavedState !== null) {
    		    barVisible = (barsavedState === 'true');
    		    updatebarVisibility();
    		}
    		// 初始化按钮状态
    		syncbarBtnState();
		}

		// 同步按钮状态
		function syncbarBtnState() {
    		if (barBtn) {
        		barVisible ? barBtn.classList.remove('checked') : barBtn.classList.add('checked');
    		}
		}

		// 更新可见性和状态文本
		function updatebarVisibility() {
    		// 更新显示状态
    		barElement.style.display = barVisible ? 'none' : 'grid';
    
    		// 更新状态文本
    		barState.textContent = barVisible ? '网站捷径已隐藏' : '网站捷径已显示';
    
// 注册动态文本
    registerDynamicText('barStateText', () => {
        // 根据条件返回不同的翻译键
        return barVisible ? 'item-description4' : 'item-description4-2';
    }, (translatedText) => {
        // 更新按钮文本
        barState.textContent = translatedText;
    });


    		// 同步按钮状态
    		syncbarBtnState();
    
    		// 保存状态到 localStorage
    		localStorage.setItem('barVisibility', barVisible.toString());
		}

		// 点击事件处理
		barBtn.addEventListener('click', () => {
   			// 切换状态
    		barVisible = !barVisible;
    		// 更新所有相关元素
    		updatebarVisibility();
		});

		// 初始化
		document.addEventListener('DOMContentLoaded', barinitialize);

		// 页面加载时初始化
		window.addEventListener('DOMContentLoaded', barinitialize);
    </script>
	<script>       
        // 获取元素
		const barMoreBtn = document.getElementById('barMoreBtn');
		const barMoreElement = document.getElementById('bar');
		const collectionMoreContainer = document.getElementById('collectionContainer');
		const barSearchContainer = document.getElementById('barSearchContainer');

		// 初始状态
		let barMore = true;

		// 初始化函数
		function barMoreinitialize() {
    		// 从localStorage加载保存的状态
    		const barMoresavedState = localStorage.getItem('barMoreOn');
    
    		// 如果存在保存的状态
    		if (barMoresavedState !== null) {
    		    barMore = (barMoresavedState === 'true');
    		    updatebarMoreOn();
    		}
    		// 初始化按钮状态
    		syncbarBtnMoreState();
		}

		// 同步按钮状态
		function syncbarBtnMoreState() {
    		if (barMoreBtn) {
        		barMore ? barMoreBtn.classList.remove('checked') : barMoreBtn.classList.add('checked');
    		}
		}

		// 更新可见性和状态文本
		function updatebarMoreOn() {
    		// 更新显示状态
    		barMore ? barMoreElement.classList.remove('collectionbox-big') : barMoreElement.classList.add('collectionbox-big');
			barMore ? collectionMoreContainer.classList.remove('collectionbox-big2') : collectionMoreContainer.classList.add('collectionbox-big2');
			barMore ? barSearchContainer.classList.remove('search-container-big') : barSearchContainer.classList.add('search-container-big');
    		// 同步按钮状态
    		syncbarBtnMoreState();
    
    		// 保存状态到 localStorage
    		localStorage.setItem('barMoreOn', barMore.toString());
		}

		// 点击事件处理
		barMoreBtn.addEventListener('click', () => {
   			// 切换状态
    		barMore = !barMore;
    		// 更新所有相关元素
    		updatebarMoreOn();
		});

		// 初始化
		document.addEventListener('DOMContentLoaded', barMoreinitialize);

		// 页面加载时初始化
		window.addEventListener('DOMContentLoaded', barMoreinitialize);
    </script>
	<script>       
        // 获取元素
        const footerBtn = document.getElementById('footerbtn');
        const footerElement = document.getElementById('footer');
        
        // 初始状态
        let footerVisible = true;
        
        // 初始化函数
        function footerinitialize() {
			
            // 从localStorage加载保存的状态
            const footersavedState = localStorage.getItem('footerVisibility');
            
            // 如果存在保存的状态
            if (footersavedState !== null) {
                // 状态值为字符串形式的布尔值，需要转换
                footerVisible = (footersavedState === 'true');
                updatefooterVisibility(footerVisible);
            }
			// 初始化按钮状态
    		syncfooterBtnState();
        }

		// 同步按钮状态
		function syncfooterBtnState() {
    		if (footerBtn) {
        		footerVisible ? footerBtn.classList.remove('checked') : footerBtn.classList.add('checked');
    		}
		}
        
        // 更新元素可见性
        function updatefooterVisibility(show) {
            // 更新透明度
            footerElement.style.opacity = show ? 1 : 0;
			footerElement.style.pointerEvents = show ? 'auto' : 'none';

			// 同步按钮状态
    		syncfooterBtnState();
            
            // 将状态保存到localStorage
            localStorage.setItem('footerVisibility', show.toString());
        }
        
        // 切换按钮点击事件处理
        footerBtn.addEventListener('click', () => {
            // 切换状态
            footerVisible = !footerVisible;
            
            // 更新UI和存储
            updatefooterVisibility(footerVisible);
        });
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', footerinitialize);
    </script>
	<script>       
        // 获取元素
		const darkBgBtn = document.getElementById('darkBgBtn');
		// 初始状态
		let darkBg = true;

		// 初始化函数
		function darkBginitialize() {
    		// 从localStorage加载保存的状态
    		const darkBgsavedState = localStorage.getItem('darkBgOn');
    
    		// 如果存在保存的状态
    		if (darkBgsavedState !== null) {
    		    darkBg = (darkBgsavedState === 'true');
    		    updatedarkBgOn();
    		}
    		// 初始化按钮状态
    		syncbardarkBgBtnState();
		}

		// 同步按钮状态
		function syncbardarkBgBtnState() {
    		if (darkBgBtn) {
        		darkBg ? darkBgBtn.classList.add('checked') : darkBgBtn.classList.remove('checked');
    		}
		}

		// 更新可见性和状态文本
		function updatedarkBgOn() {
    		// 更新显示状态
    		darkBg ? document.body.classList.remove('dark-theme-no') : document.body.classList.add('dark-theme-no');
    		// 同步按钮状态
    		syncbardarkBgBtnState();
    
    		// 保存状态到 localStorage
    		localStorage.setItem('darkBgOn', darkBg.toString());
		}

		// 点击事件处理
		darkBgBtn.addEventListener('click', () => {
   			// 切换状态
    		darkBg = !darkBg;
    		// 更新所有相关元素
    		updatedarkBgOn();
		});

		// 初始化
		document.addEventListener('DOMContentLoaded', darkBginitialize);

		// 页面加载时初始化
		window.addEventListener('DOMContentLoaded', darkBginitialize);
    </script>
	<script>       
        // 获取元素
        const lowbtn = document.getElementById('lowbtn');
		const notemodal = document.getElementById("noteModal");
		const modal = document.getElementById("myModal");
		const modalContent = document.getElementById("myModalContent")
		const notemodalContent = document.getElementById("noteModalContent")
		const customOptions = document.getElementById('customOptions');
		const shortcutModalContents = document.querySelectorAll('.shortcutmodal-content');
		const modalBlur = document.getElementById("modalBlur");
		const modalBlur2 = document.getElementById("modalBlur2");
		const modalHeader = document.getElementById("modalHeader");
		const modalHeader2 = document.getElementById("modalHeader2");

        // 初始状态
        let lowModeOn = true;
        
        // 初始化函数
        function lowMode() {
			
            // 从localStorage加载保存的状态
            const lowModeSaved = localStorage.getItem('lowModeOn');
            
            // 如果存在保存的状态
            if (lowModeOn !== null) {
                // 状态值为字符串形式的布尔值，需要转换
                lowModeOn = (lowModeSaved === 'true');
                updatelowMode(lowModeOn);
            }
			// 初始化按钮状态
    		synclowbtnState();
        }

		// 同步按钮状态
		function synclowbtnState() {
    		if (lowbtn) {
        		lowModeOn ? lowbtn.classList.add('checked') : lowbtn.classList.remove('checked');
    		}
		}
        
        // 更新元素
        function updatelowMode(show) {
            show ? modalBlur.classList.add('low') : modalBlur.classList.remove('low');
			show ? modalBlur2.classList.add('low') : modalBlur2.classList.remove('low');
			show ? modalHeader.classList.add('modal-header-low') : modalHeader.classList.remove('modal-header-low');
			show ? modalHeader2.classList.add('modal-header-low') : modalHeader2.classList.remove('modal-header-low');
			show ? notemodal.classList.add('low') : notemodal.classList.remove('low');
			show ? modalContent.classList.add('lowmodal') : modalContent.classList.remove('lowmodal');
			show ? notemodalContent.classList.add('lowmodal') : notemodalContent.classList.remove('lowmodal');
			show ? customOptions.classList.add('low-custom-options') : customOptions.classList.remove('low-custom-options');
			show ? customOptions2.classList.add('low-custom-options') : customOptions2.classList.remove('low-custom-options');
			show ? contextMenu.classList.add('low-context-menu') : contextMenu.classList.remove('low-context-menu');
			show ? langOptions.classList.add('low-custom-options') : langOptions.classList.remove('low-custom-options');
			show ? colorOptions.classList.add('low-custom-options') : colorOptions.classList.remove('low-custom-options');
			show ? momotanApiAsk.classList.add('low-custom-options') : momotanApiAsk.classList.remove('low-custom-options');
			show ? fileAsk.classList.add('low-custom-options') : fileAsk.classList.remove('low-custom-options');

			shortcutModalContents.forEach(element => {
    			if (show) {
      				element.classList.add('lowshortcutmodal-content');
    			} else {
      				element.classList.remove('lowshortcutmodal-content');
    			}
  			});

			// 同步按钮状态
    		synclowbtnState();
            
            // 将状态保存到localStorage
            localStorage.setItem('lowModeOn', show.toString());
        }
        
        // 切换按钮点击事件处理
        lowbtn.addEventListener('click', () => {
            // 切换状态
            lowModeOn = !lowModeOn;
            
            // 更新UI和存储
            updatelowMode(lowModeOn);
        });
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', lowMode);
    </script>
	<script>       
        // 获取元素
        const litebtn = document.getElementById('litebtn');

        // 初始状态
        let liteModeOn = true;
        
        // 初始化函数
        function liteMode() {
			
            // 从localStorage加载保存的状态
            const liteModeSaved = localStorage.getItem('liteModeOn');
            
            // 如果存在保存的状态
            if (liteModeOn !== null) {
                // 状态值为字符串形式的布尔值，需要转换
                liteModeOn = (liteModeSaved === 'true');
                updateliteMode(liteModeOn);
            }
			// 初始化按钮状态
    		synclitebtnState();
        }

		// 同步按钮状态
		function synclitebtnState() {
    		if (litebtn) {
        		liteModeOn ? litebtn.classList.add('checked') : litebtn.classList.remove('checked');
    		}
		}
        
        // 更新元素
        function updateliteMode(show) {
			show ? modalContent.classList.add('litemodal') : modalContent.classList.remove('litemodal');
			show ? notemodalContent.classList.add('litemodal') : notemodalContent.classList.remove('litemodal');
			show ? customOptions.classList.add('lite-custom-options') : customOptions.classList.remove('lite-custom-options');
			show ? customOptions2.classList.add('lite-custom-options2') : customOptions2.classList.remove('lite-custom-options2');
			show ? colorOptions.classList.add('lite-custom-options2') : colorOptions.classList.remove('lite-custom-options2');
			show ? contextMenu.classList.add('lite-context-menu') : contextMenu.classList.remove('lite-context-menu');
			show ? langOptions.classList.add('lite-custom-options2') : langOptions.classList.remove('lite-custom-options2');
			show ? momotanApiAsk.classList.add('lite-custom-options2') : momotanApiAsk.classList.remove('lite-custom-options2');
			show ? fileAsk.classList.add('lite-custom-options2') : fileAsk.classList.remove('lite-custom-options2');

			shortcutModalContents.forEach(element => {
    			if (show) {
      				element.classList.add('liteshortcutmodal-content');
    			} else {
      				element.classList.remove('liteshortcutmodal-content');
    			}
  			});
			// 同步按钮状态
    		synclitebtnState();
            
            // 将状态保存到localStorage
            localStorage.setItem('liteModeOn', show.toString());
        }
        
        // 切换按钮点击事件处理
        litebtn.addEventListener('click', () => {
            // 切换状态
            liteModeOn = !liteModeOn;
            
            // 更新UI和存储
            updateliteMode(liteModeOn);
        });
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', liteMode);
    </script>
	<script>
		// 自定义选择器（用来取代原生的，同时又兼容原生的）
        document.addEventListener('DOMContentLoaded', function() {
            const nativeSelect = document.getElementById('engineSelect');
            const customSelect = document.getElementById('customSelect');
            const customOptions = document.getElementById('customOptions');
            const options = customOptions.querySelectorAll('.custom-option');

function initSelect() {
    const selectedValue = nativeSelect.value;
    const selectedOption = nativeSelect.options[nativeSelect.selectedIndex];
    const engine = engines[selectedValue];
    
    // 更新自定义选择器显示
    const selectIcon = customSelect.querySelector('.select-icon');
    const selectText = customSelect.querySelector('.select-text');
    
    // 设置图标
    if (selectIcon) {
        selectIcon.innerHTML = engine.icon;
    } else {
        // 如果图标容器不存在，创建它
        const iconDiv = document.createElement('div');
        iconDiv.className = 'select-icon';
        iconDiv.innerHTML = engine.icon;
        customSelect.insertBefore(iconDiv, selectText);
    }
    
    // 隐藏文字
    selectText.textContent = selectedOption.text;
    //selectText.style.display = 'none';
    
    // 更新选项选中状态
    options.forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.value === selectedValue) {
            option.classList.add('selected');
        }
    });
}
            
            // 切换下拉框显示
            customSelect.addEventListener('click', function() {
                customOptions.classList.toggle('active');
                customSelect.classList.toggle('active');
            });
            
            // 选择选项
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.dataset.value;
                    
                    // 更新原生select的值
                    nativeSelect.value = value;
                    
                    // 触发原生change事件
                    const event = new Event('change', { bubbles: true });
                    nativeSelect.dispatchEvent(event);
                    
                    // 更新自定义选择器显示
                    customSelect.querySelector('.select-text').textContent = this.querySelector('.select-text').textContent;
                    
                    // 更新选中状态
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // 关闭下拉框
                    customOptions.classList.remove('active');
                    customSelect.classList.remove('active');
                });
            });
            
            // 点击页面其他区域关闭下拉框
            document.addEventListener('click', function(e) {
                if (!customSelect.contains(e.target) && !customOptions.contains(e.target)) {
                    customOptions.classList.remove('active');
                    customSelect.classList.remove('active');
                }
            });
            
            // 监听原生select的变化（后续可能有其他功能要修改它的值）
            nativeSelect.addEventListener('change', function() {
                initSelect();
            });
            
            // 初始化
            initSelect();
        });
    </script>
<script>
		// 自定义选择器（用来取代原生的，同时又兼容原生的）
        document.addEventListener('DOMContentLoaded', function() {
            const nativeSelect = document.getElementById('engineSelect');
            const customSelect = document.getElementById('customSelect2');
            const customOptions = document.getElementById('customOptions2');
            const options = customOptions.querySelectorAll('.custom-option');
            
            // 初始化选择器
function initSelect() {
    const selectedValue = nativeSelect.value;
    const selectedOption = nativeSelect.options[nativeSelect.selectedIndex];
    const engine = engines[selectedValue];
    
    // 更新自定义选择器显示
    const selectIcon = customSelect.querySelector('.select-icon');
    const selectText = customSelect.querySelector('.select-text');
    
    // 设置图标
    if (selectIcon) {
        selectIcon.innerHTML = engine.icon;
    } else {
        // 如果图标容器不存在，创建它
        const iconDiv = document.createElement('div');
        iconDiv.className = 'select-icon';
        iconDiv.innerHTML = engine.icon;
        customSelect.insertBefore(iconDiv, selectText);
    }
    
    // 隐藏文字
    selectText.textContent = selectedOption.text;
    //selectText.style.display = 'none';
    
    // 更新选项选中状态
    options.forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.value === selectedValue) {
            option.classList.add('selected');
        }
    });
}
            
            // 切换下拉框显示
            customSelect.addEventListener('click', function() {
                customOptions.classList.toggle('active');
                customSelect.classList.toggle('active');
            });
            
            // 选择选项
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.dataset.value;
                    
                    // 更新原生select的值
                    nativeSelect.value = value;
                    
                    // 触发原生change事件
                    const event = new Event('change', { bubbles: true });
                    nativeSelect.dispatchEvent(event);
                    
                    // 更新自定义选择器显示
                    customSelect.querySelector('.select-text').textContent = this.querySelector('.select-text').textContent;
                    
                    // 更新选中状态
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // 关闭下拉框
                    customOptions.classList.remove('active');
                    customSelect.classList.remove('active');
                });
            });
            
            // 点击页面其他区域关闭下拉框
            document.addEventListener('click', function(e) {
                if (!customSelect.contains(e.target) && !customOptions.contains(e.target)) {
                    customOptions.classList.remove('active');
                    customSelect.classList.remove('active');
                }
            });
            
            // 监听原生select的变化
            nativeSelect.addEventListener('change', function() {
                initSelect();
            });
            
            // 初始化
            initSelect();
        });
    </script>
	<script>
		// 按钮弹窗
        document.addEventListener('DOMContentLoaded', function() {
            const popbutton = document.getElementById('popbutton');
            const popup = document.getElementById('popup');
            
            // 切换弹窗显示
            popbutton.addEventListener('click', function() {
                popup.classList.toggle('active');
            });           
            
            // 点击页面其他区域关闭弹窗
            document.addEventListener('click', function(e) {
                if (!popbutton.contains(e.target) && !popup.contains(e.target)) {
                    popup.classList.remove('active');
                }
            });
        });
    </script>

	<script>
        // 初始示例数据
        const initialShortcuts = [
            { id: 1, name: "翻译", url: "https://fanyi.baidu.com/", showOnHome: true },
            { id: 2, name: "搜图", url: "https://image.baidu.com/", showOnHome: true },
            { id: 3, name: "bilibili", url: "https://www.bilibili.com/", showOnHome: true },
            { id: 4, name: "云音乐", url: "https://music.163.com/", showOnHome: true },
            { id: 5, name: "QQ 邮箱", url: "https://mail.qq.com/", showOnHome: true },
            { id: 6, name: "Github", url: "https://github.com/", showOnHome: true },
			{ id: 7, name: "空投快传", url: "https://www.airportal.cn/", showOnHome: true }
        ];
        
        // 获取DOM元素
        const collectionContainer = document.getElementById('collectionContainer');
        const barContainer = document.getElementById('bar');
        const contextMenu = document.getElementById('contextMenu');
        const shortcutModal = document.getElementById('shortcutModal');
        const modalTitle = document.getElementById('modalTitle');
        const shortcutNameInput = document.getElementById('shortcutName');
        const shortcutUrlInput = document.getElementById('shortcutUrl');
        const saveBtn = document.getElementById('saveBtn');
        const cancelBtn = document.getElementById('cancelBtn');
		const exportModal = document.getElementById('exportModal');
		const importModal = document.getElementById('importModal');
		const exportBtn = document.getElementById('exportBtn');
		const importBtn = document.getElementById('importBtn');
        
        // 当前编辑的捷径ID
        let currentEditId = null;
        let activeShortcutId = null;
        
        // 从localStorage加载捷径或使用初始数据
        function loadShortcuts() {
            const saved = localStorage.getItem('shortcuts');
            return saved ? JSON.parse(saved) : [...initialShortcuts];
        }
        
        // 保存捷径到localStorage
        function saveShortcuts(shortcuts) {
            localStorage.setItem('shortcuts', JSON.stringify(shortcuts));
        }
        
        // 获取首字符（支持中文和英文）
        function getFirstChar(name) {
            // 如果是英文，取首字母大写
            if (/^[a-zA-Z]/.test(name)) {
                return name.charAt(0).toUpperCase();
            }
            // 否则取第一个字符
            return name.charAt(0);
        }
        
        // 创建捷径元素
        function createShortcutElement(shortcut, isHomeBar = false) {
            const container = document.createElement('a');
            container.className = 'collections';
            container.href = shortcut.url;
            container.target = '_blank';
            container.draggable = 'false';
            
            const item = document.createElement('div');
            item.className = isHomeBar ? 'bar-item' : 'collection-item';
            
            const icon = document.createElement('div');
            icon.className = 'shortcut-icon';
            icon.textContent = getFirstChar(shortcut.name);
            
            const nameElement = document.createElement('p');
            nameElement.textContent = shortcut.name;
            
            item.appendChild(icon);
            item.appendChild(nameElement);
            container.appendChild(item);
            
            // 添加上下文菜单事件
            container.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                showContextMenu(e, shortcut.id);
            });
            
            return container;
        }
        
        // 创建添加按钮
        function createAddButton() {
            const container = document.createElement('div');
            container.className = 'collections';
            
            const item = document.createElement('div');
            item.className = 'collection-item add-shortcut';
			item.id = 'addShortcutBtn';
            
            const icon = document.createElement('div');
            icon.className = 'shortcut-icon';
            icon.innerHTML = '+';
            
            const nameElement = document.createElement('p');
            nameElement.textContent = '添加捷径';
			nameElement.setAttribute('data-lang', 'add-shortcuts');
            
            item.appendChild(icon);
            item.appendChild(nameElement);
            container.appendChild(item);
            
            return container;
        }

		// 导出功能
		function showExportModal() {
  			const shortcuts = loadShortcuts();
  			document.getElementById('exportData').value = JSON.stringify(shortcuts, null, 2);
  			exportModal.classList.add('active');
		}

		function copyExportData() {
  			const data = document.getElementById('exportData');
  			data.select();
  			document.execCommand('copy');
  			hideExportModal();
		}

		// 导入功能
		function showImportModal() {
  			importModal.classList.add('active');
		}

		async function pasteImportData() {
  			document.getElementById('importData').focus();
  			document.execCommand('selectAll');
			// 读取剪贴板中的文本
            const copytext = await navigator.clipboard.readText();
            // 将文本设置到input中
            document.getElementById('importData').value = copytext;
		}

		function importData() {
  			try {
    			let importedData = JSON.parse(document.getElementById('importData').value);
    
    			// 识别世界树格式（包含meta和data）
    			 if (importedData && importedData.meta && importedData.data && typeof importedData.data === 'object' && !Array.isArray(importedData.data)) {
      // 转换格式：将对象转换为数组，使用键作为id
      importedData = Object.entries(importedData.data).map(([id, item]) => ({
        id: id,
        name: item.title,       // title 转换为 name
        url: item.url,
        showOnHome: true        // 默认显示在首页
      }));
    } 
    			// 识别Momota格式
    			else if (Array.isArray(importedData)) {
      				// 保持原格式，补充可能缺失的showOnHome
      				importedData = importedData.map(item => ({
        			...item,
        			showOnHome: item.showOnHome !== undefined ? item.showOnHome : true
      				}));
    			} 
    			else {
      				throw new Error("不支持的数据格式");
    			}

    			// 数据验证
    			if (!Array.isArray(importedData)) throw new Error("不支持的数据格式");
    				importedData.forEach(item => {
      					if (item.id == null || !item.name || !item.url) {
        					throw new Error("缺少部分必要数据");
      					}
    			});

    			saveShortcuts(importedData);
    			renderShortcuts();
    			hideImportModal();
    			i18nAlert(`导入成功，共导入 ${importedData.length} 条捷径`);
  			} catch (e) {
    			i18nAlert(`导入失败：${e.message}`);
  			}
		}
		exportBtn.onclick = showExportModal;
  		importBtn.onclick = showImportModal;
        
        // 渲染所有捷径
        function renderShortcuts() {
            const shortcuts = loadShortcuts();
            
            // 清空容器
            collectionContainer.innerHTML = '';
            barContainer.innerHTML = '';
            
            // 渲染所有捷径
            shortcuts.forEach(shortcut => {
                collectionContainer.appendChild(createShortcutElement(shortcut));
            });
            
            // 添加"添加"按钮
            collectionContainer.appendChild(createAddButton());
            
            // 渲染主页捷径
            shortcuts.filter(s => s.showOnHome).forEach(shortcut => {
                barContainer.appendChild(createShortcutElement(shortcut, true));
            });
            
            // 添加按钮事件
            document.getElementById('addShortcutBtn').addEventListener('click', showAddModal);
        }
        
        // 显示上下文菜单
        function showContextMenu(event, shortcutId) {
            const shortcuts = loadShortcuts();
            const shortcut = shortcuts.find(s => s.id === shortcutId);
            
            if (!shortcut) return;
            
            // 更新"添加到主页"文本
            const toggleButton = document.getElementById('toggleHomeShortcutText');
            //toggleButton.textContent = shortcut.showOnHome ? '从主页移除' : '添加到主页';
            
			// 注册动态文本
    registerDynamicText('toggleHomeShortcutText', () => {
        // 根据条件返回不同的翻译键
        return shortcut.showOnHome ? 'remove-from-home' : 'add-to-home';
    }, (translatedText) => {
        // 更新按钮文本
        toggleButton.textContent = translatedText;
    });

            // 显示菜单

			// 获取页面宽度
			const viewportWidth = document.documentElement.clientWidth;
			// 计算点击位置到屏幕右边缘的距离
			const distanceToRight = viewportWidth - event.clientX;

			if (distanceToRight <= 150) {
    			// 距离不足时左移菜单
    			contextMenu.style.left = `${event.pageX - 150}px`;
			} else {
    			// 正常显示在点击位置
    			contextMenu.style.left = `${event.pageX}px`;
			}

			// 获取页面高度
			const viewportHeight = document.documentElement.clientHeight;
			// 计算点击位置到屏幕下边缘的距离
			const distanceToBottom = viewportHeight - event.clientY;
			const distanceToTop = event.clientY;

			if (distanceToBottom <= 130 && distanceToTop >= 260) {
    			// 距离不足时上移菜单
    			contextMenu.style.top = `${event.pageY - 260}px`;
			} else if (distanceToBottom <= 260 && distanceToTop >= 130) {
    			// 距离不足时上移菜单
    			contextMenu.style.top = `${event.pageY - 130}px`;
			} else {
    			// 正常显示在点击位置
    			contextMenu.style.top = `${event.pageY}px`;
			}

			// 显示菜单
			contextMenu.style.display = 'flex';
            
            // 存储当前捷径ID
            currentEditId = shortcutId;

            
            // 添加菜单点击事件
            document.getElementById('editShortcut').onclick = () => showEditModal(shortcutId);
            document.getElementById('toggleHomeShortcut').onclick = () => toggleHomeShortcut(shortcutId);
            document.getElementById('moveBackward').onclick = () => moveShortcut(shortcutId, 'backward');
            document.getElementById('moveForward').onclick = () => moveShortcut(shortcutId, 'forward');

			// 删除捷径 自定义confirm 修复了异步问题
        	document.getElementById('deleteShortcut').addEventListener('click', async () => {
            	//const choice = await confirm('确定要删除这个捷径吗？');
				const choice = await i18nConfirm('确定要删除这个捷径吗？');
            		if (choice) {
                		const shortcuts = loadShortcuts();
                		const newShortcuts = shortcuts.filter(s => s.id !== shortcutId);
                		saveShortcuts(newShortcuts);
                		renderShortcuts();
            		} else {
            	}
				hideContextMenu();
			});
        }
        
        // 向前/向后移动捷径
        function moveShortcut(shortcutId, direction) {
            const shortcuts = loadShortcuts();
            const currentIndex = shortcuts.findIndex(s => s.id === shortcutId);
            
            if (currentIndex === -1) return;
            
            if (direction === 'backward' && currentIndex > 0) {
                // 向前移动（数组中的位置提前）
                [shortcuts[currentIndex], shortcuts[currentIndex - 1]] = [shortcuts[currentIndex - 1], shortcuts[currentIndex]];
            } else if (direction === 'forward' && currentIndex < shortcuts.length - 1) {
                // 向后移动（数组中的位置延后）
                [shortcuts[currentIndex], shortcuts[currentIndex + 1]] = [shortcuts[currentIndex + 1], shortcuts[currentIndex]];
            }
            
            saveShortcuts(shortcuts);
            renderShortcuts();
            hideContextMenu();
        }
        
        // 隐藏上下文菜单
        function hideContextMenu() {
            contextMenu.style.display = 'none';
        }
		
        
        // 显示添加模态框
        function showAddModal() {
            //modalTitle.textContent = '添加捷径';
			modalTitle.setAttribute('data-lang', 'add-shortcuts');
			translateElement(modalTitle, currentLang);
            shortcutNameInput.value = '';
            shortcutUrlInput.value = '';
            currentEditId = null;
            shortcutModal.classList.add('active');
        }
        
        // 显示编辑模态框
        function showEditModal(shortcutId) {
            const shortcuts = loadShortcuts();
            const shortcut = shortcuts.find(s => s.id === shortcutId);
            
            if (shortcut) {
                //modalTitle.textContent = '编辑捷径';
				modalTitle.setAttribute('data-lang', 'edit-shortcuts');
				translateElement(modalTitle, currentLang);
                shortcutNameInput.value = shortcut.name;
                shortcutUrlInput.value = shortcut.url;
                currentEditId = shortcutId;
                shortcutModal.classList.add('active');
            }
            
            hideContextMenu();
        }
        
        // 隐藏模态框
        function hideModal() {
            shortcutModal.classList.remove('active');
        }
		function hideExportModal() {
            exportModal.classList.remove('active');
        }
		function hideImportModal() {
            importModal.classList.remove('active');
        }
        
        // 添加或更新捷径
		function saveShortcut() {
    		let name = shortcutNameInput.value.trim();
    		let url = shortcutUrlInput.value.trim();
    
    		// 如果URL不以http://或https://开头，自动添加http://
    		if (url && !url.startsWith('http://') && !url.startsWith('https://')) {
        		url = 'https://' + url;
        		shortcutUrlInput.value = url; // 更新输入框的值
    		}

			// 检查URL是否包含"."或"localhost"
    		if (url && url.indexOf('.') === -1 && url.indexOf('localhost') === -1) {
        		i18nAlert('这不是一个链接');

        		return;
    		}
    
    		// 如果没有填写名称，自动从URL生成名称
    		if (!name && url) {
        		// 1. 移除协议部分
        		let domain = url.replace(/^(https?:\/\/)/, '');
        
        		// 2. 移除开头的www.
        		domain = domain.replace(/^www\./, '');
        
        		// 3. 移除路径参数和尾部斜杠
        		domain = domain.split('/')[0];

				// 4. 定义特例名称映射
        		const specialCases = {
            		'hut.ao': 'HuTao',
            		'vr.chat': 'VRChat',
					'mi.com': 'Xiaomi',
					'hyperos.mi.com': 'HyperOS',
					'huawei.com': 'HUAWEI',
					'harmonyos.com': 'HarmonyOS',
					'oppo.com': 'OPPO',
					'vivo.com': 'vivo',
					'vivo.com.cn': 'vivo',
					'deepseek.com': 'DeepSeek',
					'chat.deepseek.com': 'DeepSeek',
            		's.team': 'Steam'

            		// 更多特例
        		};
        
        		// 5. 检查是否为特例
        		if (specialCases.hasOwnProperty(domain)) {
            		name = specialCases[domain];
        		} else {
            	// 6. 常规处理：移除常见后缀
            	const suffixes = ['.com.cn', '.net.cn', '.org.cn', '.com', '.cn', '.net', '.org', '.cc', '.xyz', '.top', '.vip','.io','‌.edu‌','.gov','‌.us','.uk‌','.de‌','.tech‌','‌.app','‌.club‌','.info','.biz','.pro','.mil','.int','.jp','.fr','.au','.ca','.ao','.fun','.online','.xin','.me','.asia','.icu','.uno','.ltd','.art','.chat','.wang','.cyou','.life','.live','.biz','.group','.world','.click','.mobi','.website','.ren','.host','.center','.link','.shop','.store','.cloud','.hk','.work','.press','.co','.ink','.love','.space','.baby','.pw','.homes','.wiki','.plus','.games','.fan','.cool','.tv','.run','.city','.sale','.zone','.cafe','.team','.auto','.tw',];
            		for (const suffix of suffixes) {
                		if (domain.endsWith(suffix)) {
                    		domain = domain.slice(0, -suffix.length);
                    	break; // 找到第一个匹配后缀后退出
                		}
            		}
            
            	// 7. 分词与首字母大写处理
            	name = domain
                .split('.')
                .reverse()
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');
        		}
        
        		shortcutNameInput.value = name; // 更新名称输入框
    		}
    
    		// 验证必填字段
    		if (!name || !url) {
        		//alert('请填写捷径网址');
				i18nAlert('请填写捷径网址');
        		return;
    		}
    
    		// 保存或更新捷径
    		const shortcuts = loadShortcuts();
    
    		if (currentEditId) {
        		// 更新现有捷径
        		const index = shortcuts.findIndex(s => s.id === currentEditId);
        		if (index !== -1) {
        		    shortcuts[index].name = name;
        		    shortcuts[index].url = url;
        		}
    		} else {
        		// 添加新捷径
        		const newId = Math.max(...shortcuts.map(s => s.id), 0) + 1;
        		shortcuts.push({
            		id: newId,
            		name: name,
            		url: url,
            		showOnHome: true
        		});
    		}
    
    		saveShortcuts(shortcuts);
    		renderShortcuts();
    		hideModal();
		}
        
        // 切换主页显示状态
        function toggleHomeShortcut(shortcutId) {
            const shortcuts = loadShortcuts();
            const index = shortcuts.findIndex(s => s.id === shortcutId);
            
            if (index !== -1) {
                shortcuts[index].showOnHome = !shortcuts[index].showOnHome;
                saveShortcuts(shortcuts);
                renderShortcuts();
            }
            
            hideContextMenu();
        }
        
        
        
        
        // 初始化
        function init() {
            
            // 渲染捷径
            renderShortcuts();
            
            // 事件监听
            document.addEventListener('click', hideContextMenu);
            saveBtn.addEventListener('click', saveShortcut);
            cancelBtn.addEventListener('click', hideModal);
            themeToggle.addEventListener('click', toggleTheme);
            
            // 关闭模态框
            shortcutModal.addEventListener('click', (e) => {
                if (e.target === shortcutModal) {
                    hideModal();
                }
            });

			exportModal.addEventListener('click', (e) => {
                if (e.target === exportModal) {
                    hideExportModal();
                }
            });
			importModal.addEventListener('click', (e) => {
                if (e.target === importModal) {
                    hideImportModal();
                }
            });
        }
        
        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', init);
    </script>
	<script>
		// 阻止 contextmenu 事件（右键）
		document.addEventListener('contextmenu', e => e.preventDefault());
    </script>

	<script>
        const usedSpaceBar = document.getElementById('usedSpaceBar');
        const usageText = document.getElementById('usageText');
        
        // 总容量5MB转换为字节
        const MAX_STORAGE_BYTES = 5 * 1024 * 1024;
        
        // 计算localStorage当前占用空间
        function calculateStorageUsage() {
            let totalBytes = 0;
            
            // 遍历所有
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                
                // 每个字符在存储中占的字节
                totalBytes += (key.length + value.length) * 1.2;
            }
            
            return totalBytes;
        }
        
        // 更新UI显示存储情况
        function updateStorageDisplay() {
            const usedBytes = calculateStorageUsage();
            
            // 转换为KB/MB显示
            let displayText;
            if (usedBytes < 1024) {
                displayText = `${usedBytes} B`;
            } else if (usedBytes < 1024 * 1024) {
                displayText = `${(usedBytes / 1024).toFixed(2)} KB`;
            } else {
                displayText = `${(usedBytes / (1024 * 1024)).toFixed(2)} MB`;
            }
            
            const percentage = (usedBytes / MAX_STORAGE_BYTES) * 100;
            usedSpaceBar.style.width = `${percentage}%`;
            usageText.textContent = `${displayText}`;
        }
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', function() {
            updateStorageDisplay();
            
            // 每3秒更新一次
            setInterval(updateStorageDisplay, 3000);
        });
    </script>

	<script>
        // 数据模型
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let currentNoteId = null;

        // DOM元素
        const notesList = document.getElementById('notesList');
        const notesListPlaceholder = document.getElementById('notesListPlaceholder');
        const editorHeader = document.getElementById('editorHeader');
        const editorPlaceholder = document.getElementById('editorPlaceholder');
        const noteTitleInput = document.getElementById('noteTitleInput');
        const noteContentInput = document.getElementById('noteContentInput');
        const newNoteBtn = document.getElementById('newNoteBtn');
        const pinBtn = document.getElementById('pinBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        const pinnedNotesContainer = document.getElementById('pinnedNotesContainer');

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            renderNotesList();
            renderPinnedNotes();
            setupEventListeners();
        });

        // 设置事件监听
        function setupEventListeners() {
            newNoteBtn.addEventListener('click', createNewNote);
            pinBtn.addEventListener('click', togglePinNote);
            

// 自定义confirm 修复了异步问题
        	deleteBtn.addEventListener('click', async () => {
         	// 使用async/await处理异步
            	const choice = await i18nConfirm('确定要删除这个便签吗？');
            	// 选择后处理
            		if (choice) {
              if (!currentNoteId) return;
            
                notes = notes.filter(note => note.id !== currentNoteId);
                saveToLocalStorage();
                
                // 清除编辑器
                currentNoteId = null;
                editorHeader.style.display = 'none';
                noteTitleInput.value = '';
                noteContentInput.value = '';
                editorPlaceholder.style.display = 'block';
                noteContentInput.style.display = 'none';
                
                renderNotesList();
                renderPinnedNotes();
                
                if (notes.length === 0) {
                    notesListPlaceholder.style.display = 'block';
                }
            		} else {
            	}
			});

noteTitleInput.addEventListener('input', saveNote);            
            noteContentInput.addEventListener('input', saveNote);
            
            // 防抖，减少频繁保存
            let saveTimeout;
            noteContentInput.addEventListener('input', function() {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(saveNote, 500);
            });
        }

        // 创建新便签
        function createNewNote() {
            const newNote = {
                id: Date.now().toString(), // 使用时间戳作为唯一ID
                title: '',
                content: '',
                pinned: false,
                timestamp: new Date().toISOString()
            };
            
            notes.unshift(newNote);
            saveToLocalStorage();
            renderNotesList();
            selectNote(newNote.id);

            // 聚焦到内容输入区
            noteContentInput.focus();
        }

        // 选择便签进行编辑
        function selectNote(noteId) {
            currentNoteId = noteId;
            const note = notes.find(note => note.id === noteId);
            
            // 更新UI
            document.querySelectorAll('.note-item').forEach(item => {
                item.classList.toggle('selected', item.dataset.id === noteId);
            });
            
            // 显示编辑器
            editorHeader.style.display = 'flex';
            editorPlaceholder.style.display = 'none';
            noteContentInput.style.display = 'block';
            
            // 填充内容
            noteTitleInput.value = note.title || '';
            noteContentInput.value = note.content || '';
            
            // 更新固定按钮状态
            pinBtn.classList.toggle('active', note.pinned);
            
            // 聚焦到内容输入区
            // noteContentInput.focus();
        }

        // 保存便签
        function saveNote() {
            if (!currentNoteId) return;
            
            const noteIndex = notes.findIndex(note => note.id === currentNoteId);
            if (noteIndex === -1) return;
            
            notes[noteIndex].title = noteTitleInput.value;
            notes[noteIndex].content = noteContentInput.value;
            notes[noteIndex].timestamp = new Date().toISOString();
            
            saveToLocalStorage();
            renderNotesList();
            renderPinnedNotes();
        }

        // 固定/取消固定便签
        function togglePinNote() {
            if (!currentNoteId) return;
            
            const noteIndex = notes.findIndex(note => note.id === currentNoteId);
            if (noteIndex === -1) return;
            
            notes[noteIndex].pinned = !notes[noteIndex].pinned;
            // notes[noteIndex].timestamp = new Date().toISOString();
            
            pinBtn.classList.toggle('active');
            
            saveToLocalStorage();
            renderNotesList();
            renderPinnedNotes();
        }

        // 渲染便签列表
        function renderNotesList() {
            // 清除现有列表
            notesList.innerHTML = '';
            
            if (notes.length === 0) {
                notesListPlaceholder.style.display = 'block';
                return;
            }
            
            notesListPlaceholder.style.display = 'none';
            
            // 排序：固定便签在前，按时间倒序
            const sortedNotes = [...notes].sort((a, b) => {
                if (a.pinned && !b.pinned) return -1;
                if (!a.pinned && b.pinned) return 1;
                return new Date(b.timestamp) - new Date(a.timestamp);
            });
            
            sortedNotes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = 'note-item';
                noteElement.dataset.id = note.id;
                
                const formattedTime = formatDate(new Date(note.timestamp));
                
                noteElement.innerHTML = `
                    <div class="note-title">${note.title || '无标题'}</div>
                    <div class="note-content">${note.content || ''}</div>
                    <div class="note-time">${formattedTime}</div>
                    ${note.pinned ? '<div class="pinned"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 17v5"></path><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"></path></svg></div>' : ''}
                `;
                
                noteElement.addEventListener('click', () => selectNote(note.id));
                
                notesList.appendChild(noteElement);
            });
            
            // 如果当前便签仍然存在，保持选中状态
            if (currentNoteId && notes.find(note => note.id === currentNoteId)) {
                selectNote(currentNoteId);
            }
        }

        // 渲染固定便签
        function renderPinnedNotes() {
            pinnedNotesContainer.innerHTML = '';
            
            const pinnedNotes = notes.filter(note => note.pinned);
            
            if (pinnedNotes.length === 0) return;
            
            pinnedNotes.forEach(note => {
                const pinnedNoteElement = document.createElement('div');
                pinnedNoteElement.className = 'pinned-note';
                pinnedNoteElement.dataset.id = note.id;
                
                const formattedTime = formatDate(new Date(note.timestamp));
                
                pinnedNoteElement.innerHTML = `
                    <h4>${note.title || '无标题'}</h4>
                    <p>${note.content || ''}</p>
                    <div class="pinned-time">${formattedTime}</div>
                `;
                
                pinnedNoteElement.addEventListener('click', () => selectNote(note.id));
                
                pinnedNotesContainer.appendChild(pinnedNoteElement);
            });
        }

        // 保存到LocalStorage
        function saveToLocalStorage() {
            localStorage.setItem('notes', JSON.stringify(notes));
        }

        // 格式化日期时间
        function formatDate(date) {
            const now = new Date();
            const diff = Math.floor((now - date) / (1000 * 60)); // 分钟差
            
            // 显示最近编辑时间不同格式
            if (diff < 1) return '刚刚';
            if (diff < 60) return `${diff}分钟前`;
            
            const diffHours = Math.floor(diff / 60);
            if (diffHours < 24) return `${diffHours}小时前`;
            
            const diffDays = Math.floor(diffHours / 24);
            if (diffDays < 7) return `${diffDays}天前`;
            
            return date.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

		// 导入导出功能的DOM元素
const exportNotesBtn = document.getElementById('exportNotesBtn');
const importNotesBtn = document.getElementById('importNotesBtn');
const notesExportModal = document.getElementById('notesExportModal');
const notesImportModal = document.getElementById('notesImportModal');
const exportNotesDataTextarea = document.getElementById('exportNotesData');
const importNotesDataTextarea = document.getElementById('importNotesData');
const copyExportNotesBtn = document.getElementById('copyExportNotesBtn');
const closeNotesExportModalBtn = document.getElementById('closeNotesExportModalBtn');
const pasteImportNotesBtn = document.getElementById('pasteImportNotesBtn');
const importNotesDataBtn = document.getElementById('importNotesDataBtn');

// 添加按钮事件监听器
exportNotesBtn.addEventListener('click', showNotesExportModal);
importNotesBtn.addEventListener('click', showNotesImportModal);
copyExportNotesBtn.addEventListener('click', copyExportNotesData);
closeNotesExportModalBtn.addEventListener('click', hideNotesExportModal);
pasteImportNotesBtn.addEventListener('click', pasteNotesImportData);
importNotesDataBtn.addEventListener('click', importNotesData);

// 显示导出模态框
function showNotesExportModal() {
  const notesData = JSON.parse(localStorage.getItem('notes')) || [];
  
  // 美化JSON输出
  const jsonData = JSON.stringify(notesData, null, 2);
  
  exportNotesDataTextarea.value = jsonData;
  notesExportModal.classList.add('active');
}

// 隐藏导出模态框
function hideNotesExportModal() {
  notesExportModal.classList.remove('active');
}

// 复制导出的便签数据
function copyExportNotesData() {
  exportNotesDataTextarea.select();
  document.execCommand('copy');
  hideNotesExportModal();
  
  // 显示复制成功提示
  const prevToast = document.querySelector('.toast-message');
  if (prevToast) prevToast.remove();
  
  const toast = document.createElement('div');
  toast.className = 'toast-message';
  toast.textContent = '已复制';
  document.body.appendChild(toast);
  
  setTimeout(() => {
    toast.style.opacity = '0';
    setTimeout(() => toast.remove(), 300);
  }, 2000);
}

// 显示导入模态框
function showNotesImportModal() {
  importNotesDataTextarea.value = '';
  notesImportModal.classList.add('active');
  importNotesDataTextarea.focus();
}

// 粘贴导入数据
async function pasteNotesImportData() {
  try {
    const text = await navigator.clipboard.readText();
    importNotesDataTextarea.value = text;
    
    // 滚动到文本框底部
    importNotesDataTextarea.scrollTop = importNotesDataTextarea.scrollHeight;
  } catch (err) {
    i18nAlert('无法访问剪贴板，请手动粘贴数据');
  }
}

// 导入便签数据
function importNotesData() {
  try {
    // 获取输入的数据
    const dataStr = importNotesDataTextarea.value.trim();
    
    if (!dataStr) {
      i18nAlert('请输入要导入的便签数据');
      return;
    }
    
    // 解析JSON
    let importedNotes = JSON.parse(dataStr);
    
    // 验证格式 - 支持多种可能的格式
    if (Array.isArray(importedNotes)) {
      // 简单数组格式
      importedNotes = importedNotes.map(note => ({
        ...note,
        // 确保新ID不会冲突
        id: note.id ? note.id.toString() : Date.now().toString(),
      }));
    } else {
      throw new Error("不支持的便签数据格式");
    }
    
    // 验证每个便签对象
    const currentNotes = JSON.parse(localStorage.getItem('notes')) || [];
    
    // 合并新便签（替换重复ID，保留新便签）
    let addedCount = 0;
    let updatedCount = 0;
    
    importedNotes.forEach(newNote => {
      // 生成时间戳如果缺失
      if (!newNote.timestamp) {
        newNote.timestamp = new Date().toISOString();
      }
      
      // 修复标题和内容如果缺失
      if (newNote.title === undefined) newNote.title = '';
      if (newNote.content === undefined) newNote.content = '';
      
      const existingIndex = currentNotes.findIndex(n => n.id === newNote.id);
      
      if (existingIndex !== -1) {
        // 更新现有便签
        currentNotes[existingIndex] = {
          ...currentNotes[existingIndex],
          ...newNote
        };
        updatedCount++;
      } else {
        // 添加新便签
        currentNotes.push(newNote);
        addedCount++;
      }
    });
    
    // 保存到LocalStorage
    localStorage.setItem('notes', JSON.stringify(currentNotes));
    
    // 更新应用状态
    notes = currentNotes;
    saveToLocalStorage();
    renderNotesList();
    renderPinnedNotes();
    
    // 关闭模态框
    notesImportModal.classList.remove('active');
    
    // 显示成功消息
    let message = '导入成功，';
    if (addedCount > 0) message += ` 新增了 ${addedCount} 个便签`;
    if (updatedCount > 0) message += ` 更新了 ${updatedCount} 个便签`;
    
    i18nAlert(message);
    
  } catch (e) {
    i18nAlert(`导入失败：${e.message}`);
  }
}

// 关闭模态框
document.addEventListener('click', (e) => {
  if (e.target === notesExportModal) {
    hideNotesExportModal();
  } else if (e.target === notesImportModal) {
    notesImportModal.classList.remove('active');
  }
});
    </script>

<script>
// 多语言词典
const translations = {
    zh: {
		"lang-select": "简体中文",
        "search-input": "搜索…",
        "metaso": "秘塔 AI",
        "baidu": "百度",
        "bing": "必应",
        "google": "谷歌",
        "DDG": "DDG",
        "edit": "编辑捷径",
        "add-to-home": "添加到主页",
		"remove-from-home": "从主页移除",
        "delete": "删除捷径",
        "move-forward": "向前移动",
        "move-backward": "向后移动",
		"recent-searches": "最近搜索",
		"clear": "清空",

		"shortcutUrl": "捷径网址",
		"shortcutUrlplaceholder": "输入链接",
		"shortcutName": "捷径名称",
		"shortcutNameplaceholder": "输入名称 - 留空则自动获取",
		"export-shortcut-deta": "导出捷径数据",
		"import-shortcut-deta": "导入捷径数据",
		"import-shortcut-placeholder": "请粘贴捷径数据，支持 Momotan 格式与 irminsul 格式",
		"export-note-deta": "导出便签数据",
		"import-note-deta": "导入便签数据",
		"import-note-placeholder": "请粘贴便签数据",
		"img-choose": "图片来源：",
		"file-manager": "文件管理器",
		"photo-album": "相册",
		"momotan-choose1": "随机图片比例:",
		//"momotan-choose2": "注：此 API 尚不稳定，如遇到图片无法加载、长时间不更新的情况，请 Ctrl + F5 ，或重置壁纸并再次设置。",
		//"momotan-choose3": "图片默认每 3 ~ 5 分钟更新，刷新时更换。",
		"vertical": "竖屏",
		"horizontal": "横屏",
		"cancel": "取消",
		"save": "保存",
		"copy": "复制",
		"close": "关闭",
		"paste": "粘贴",
		"import": "导入",
		"export": "导出",
		"open": "打开",
		"confirm": "确定",
		"tip": "提示",

		"title-more": "更多",
		"title-shortcuts": "捷径",
		"add-shortcuts": "添加捷径",
		"edit-shortcuts": "编辑捷径",
		"title-general-settings": "常规设置",
		"title-appearance-settings": "外观",
		"item-title1": "语言 / Language",
		"item-description1": "Language",
		"item-title2": "搜索引擎选项",
		"item-description2": "也可点击搜索栏左侧图标来切换",
		"item-title3": "搜索建议与搜索历史记录",
		"item-description3": "包含搜索建议、最近搜索、网址识别",
		"item-title4": "在搜索栏下方显示捷径",
		"item-description4": "网站捷径已隐藏",
		"item-description4-2": "网站捷径已显示",
		"item-title5": "在每行显示更多捷径",
		"item-description5": "仅在窗口逻辑宽度 >640px 时生效",
		"item-title6": "点击 Logo 打开“更多”",
		"item-description6": "点击 Logo 打开“更多”，即使隐藏 Logo",
		"item-title7": "添加 Via 浏览器的页面按钮",
		"item2-title1": "自定义壁纸",
		"item2-description1": "上传 jpg、png、gif，不大于 3MB",
		"item2-description1-2": "或使用必应壁纸、随机桃寝奇诺图",
		"upload": "上传",
		"momonechinoi": "桃寝奇诺",
		"reset": "重置",
		"imgpreview": "图片预览",
		"item2-title2": "主题色",
		"item2-description2": "自定义网站的主题色",
		"color-select": "自定义",
		"item2-title3": "深色模式",
		"item2-description3": "为网站应用深色主题",
		"item2-title4": "隐藏 Logo",
		"item2-description4": "这不会影响快捷操作",
		"item2-title5": "隐藏页脚信息",
		"item2-description5": "获得更简洁的页面",
		"item2-title6": "深色模式背景遮罩",
		"item2-description6": "让深色模式下的背景图更柔和",
		"item2-title7": "减弱动态效果",
		"item2-description7": "关闭部分动效以节省性能",
		"item2-title8": "禁用模糊效果",
		"item2-description8": "关闭部分模糊效果以节省性能",
		"data-management": "数据管理",
		"item3-title1": "LocalStorage 用量",
		"item3-description1": "已使用",
		"item3-description1-2": "共 5.00 MB",
		"item3-title2": "捷径数据",
		"item3-description2": "迁移、备份捷径数据",
		"item3-title3": "便签数据",
		"item3-description3": "迁移、备份便签数据",
		"item3-title4": "重置设置",
		"item3-description4": "删除所有数据并重置设置",
		"developed-by-me": "由我开发",
		"item4-description1": "本站的便签功能的专属页面",
		"item4-description2": "[开源] 网站本地数据管理工具",
		"item4-description3": "[开源] 自带图标库的SVG图标编辑器",
		"item4-description4": "桃寝ちのい粉丝站",
		"about": "关于",
		"item5-title1": "开发",
		"item5-title2": "版本",
		"item5-title3": "版权",
		"item5-title4": "联系我",

		"showEmpty": "没有相关搜索建议",
		"showError": "解析搜索建议失败，正在 Fallback",
		"showTimeOut": "请求超时，正在 Fallback",
		"showFallbackError": "Fallback 失败，请检查网络",

		"footbtn1": "深入了解本站",
		"footbtn2": "萌 ICP 备 20251027 号",
		"footbtn3": "异次元之旅",
		"note": "便签",
		"new-note": "新建便签",
		"notes-list": "创建第一个便签",
		"notes-title": "标题",
		"editor-placeholder": "请新建或选择一个便签",
		"note-content-input": "正文",

		
		"请填写捷径网址": "请填写捷径网址",
		"这不是一个链接": "这不是一个链接",
		"已清除所有数据": "已清除所有数据",
		//"导入成功": "导入成功，共导入 ${importedData.length} 条捷径",
		//"导入失败": "导入失败：${e.message}",
		//"message": "导入成功",
		"无法访问剪贴板，请手动粘贴数据": "无法访问剪贴板，请手动粘贴数据",
		"请输入要导入的便签数据": "请输入要导入的便签数据",

		"确定要删除这个捷径吗？": "确定要删除这个捷径吗？",
		"确定要删除这个便签吗？": "确定要删除这个便签吗？",
		"确定要重置背景图片吗？此操作不可撤销。": "确定要重置背景图片吗？此操作不可撤销。",
		"确定要删除所有数据吗？此操作不可撤销。": "确定要删除所有数据吗？此操作不可撤销。",
    },
    en: {
		"lang-select": "English",
        "search-input": "Search…",
        "metaso": "Metaso AI",
        "baidu": "Baidu",
        "bing": "Bing",
        "google": "Google",
        "DDG": "DDG",
        "edit": "Edit",
        "add-to-home": "Add to home",
		"remove-from-home": "Remove",
        "delete": "Delete",
        "move-forward": "Forward",
        "move-backward": "Backward",
		"recent-searches": "Recent Searches",
		"clear": "Clear",

	"shortcutUrl": "Shortcut URL",
    "shortcutUrlplaceholder": "Enter URL",
    "shortcutName": "Shortcut Name",
    "shortcutNameplaceholder": "Enter name - automatically get if left blank",
	"export-shortcut-deta": "Export Shortcut Data",
    "import-shortcut-deta": "Import Shortcut Data",
    "import-shortcut-placeholder": "Please paste shortcut data, supports Momotan format and irminsul format",
    "export-note-deta": "Export Note Data",
    "import-note-deta": "Import Note Data",
    "import-note-placeholder": "Please paste note data",
	"img-choose": "Image source:",
    "file-manager": "Files",
    "photo-album": "Image Library",
    "momotan-choose1": "Random image ratio:",
    //"momotan-choose2": "Note: This API is still unstable. If you encounter issues such as images failing to load or not updating for a long time, please press Ctrl + F5, or reset the wallpaper and set it again.",
    //"momotan-choose3": "Images are updated every 3 ~ 5 minutes by default, and change upon refresh.",
    "vertical": "Vertical",
    "horizontal": "Horizontal",
    "cancel": "Cancel",
    "save": "Save",
    "copy": "Copy",
    "close": "Close",
    "paste": "Paste",
    "import": "Import",
    "export": "Export",
    "open": "Open",
    "confirm": "OK",
    "tip": "Tip",

		"title-more": "More",
		"title-shortcuts": "Shortcuts",
		"add-shortcuts": "Add Shortcuts",
		"edit-shortcuts": "Edit Shortcuts",
		"title-general-settings": "General Settings",
		"title-appearance-settings": "Appearance Settings",
		"item-title1": "Language",
    	"item-description1": "Select Language",
    	"item-title2": "Search Engine Options",
    	"item-description2": "You can also click the icon on the left side of the search bar to switch",
    	"item-title3": "Search suggestions and search history",
    	"item-description3": "Includes search suggestions, recent searches, and URL recognition",
    	"item-title4": "Show shortcuts below the search bar",
    	"item-description4": "Website shortcut are hidden",
		"item-description4-2": "Website shortcut displayed",
    	"item-title5": "Show more shortcuts per row",
    	"item-description5": "Only takes effect when the window's logical width is >640px",
    	"item-title6": "Click the Logo to open 'More'",
    	"item-description6": "Click the Logo to open 'More', even if the Logo is hidden",
		"item-title7": "Add page button for Via browser",
		"item2-title1": "Custom Wallpaper",
		"item2-description1": "Upload jpg, png, gif, no larger than 3MB",
		"item2-description1-2": "Or use Bing daily image, random MomoneChinoi image.",
		"upload": "Upload",
		"momonechinoi": "MomoneChinoi",
		"reset": "Reset",
		"imgpreview": "Preview",
		"item2-title2": "Theme Color",
		"item2-description2": "Custom theme colors",
		"color-select": "Customize",
		"item2-title3": "Dark Mode",
		"item2-description3": "Apply dark theme to the website",
		"item2-title4": "Hide Logo",
		"item2-description4": "This does not affect quick actions",
		"item2-title5": "Hide Footer Information",
		"item2-description5": "Get a cleaner page",
		"item2-title6": "Dark Mode Background Mask",
		"item2-description6": "Make the background image softer in dark mode",
		"item2-title7": "Reduce Dynamic Effects",
		"item2-description7": "Turn off some animations to save performance",
		"item2-title8": "Disable Blur Effect",
		"item2-description8": "Turn off some blur effects to save performance",
		"data-management": "Data Management",
    	"item3-title1": "LocalStorage Usage",
    	"item3-description1": "Used",
    	"item3-description1-2": "of 5.00 MB total",
    	"item3-title2": "Shortcut Data",
    	"item3-description2": "Migrate, backup shortcut data",
    	"item3-title3": "Note Data",
    	"item3-description3": "Migrate, backup note data",
    	"item3-title4": "Reset Settings",
    	"item3-description4": "Delete all data and reset settings",
		"developed-by-me": "Developed by me",
    "item4-description1": "Dedicated page for this site's note feature",
    "item4-description2": "[Open Source] Website local data management tool",
    "item4-description3": "[Open Source] SVG icon editor with built-in icon library",
	"item4-description4": "Momone Chinoi's fan website",
    "about": "About",
    "item5-title1": "Developer",
    "item5-title2": "Version",
    "item5-title3": "Copyright",
    "item5-title4": "Contact Me",

		"visit": "✦ Visit the link",
		"showEmpty": "No relevant search suggestions",
    	"showError": "Failed to parse search suggestions, falling back",
    	"showTimeOut": "Request timed out, falling back",
    	"showFallbackError": "Fallback failed, please check your network",

		"footbtn1": "Learn more about this site",
    "footbtn2": "Moe ICP License No. 20251027",
    "footbtn3": "Travel",
    "note": "Note",
    "new-note": "New Note",
    "notes-list": "Create your first note",
    "notes-title": "Title",
    "editor-placeholder": "Please create or select a note",
    "note-content-input": "Content",
		
		"请填写捷径网址": "Please fill in the shortcut URL",
		"这不是一个链接": "This is not a link",
		"已清除所有数据": "All data has been cleared",
		//"导入成功": "Import successful",
    	//"导入失败": "Import failed",
		//"message": "Import successful",
    	"无法访问剪贴板，请手动粘贴数据": "Cannot access clipboard, please paste data manually",
    	"请输入要导入的便签数据": "Please enter the note data to import",		

		"确定要删除这个捷径吗？": "Are you sure you want to delete this shortcut?",
		"确定要删除这个便签吗？": "Are you sure you want to delete this note?",
    	"确定要重置背景图片吗？此操作不可撤销。": "Are you sure you want to reset the background image? This action cannot be undone.",
    	"确定要删除所有数据吗？此操作不可撤销。": "Are you sure you want to delete all data? This action cannot be undone.",
    },
    ja: {
		"lang-select": "日本語",
        "search-input": "検索…",
        "metaso": "Metaso AI",
        "baidu": "Baidu",
        "bing": "Bing",
        "google": "Google",
        "DDG": "DDG",
        "edit": "編集",
        "add-to-home": "表示",
		"remove-from-home": "除去じょきょ",
        "delete": "削除",
        "move-forward": "前方へ移動",
        "move-backward": "後方へ移動",
		"recent-searches": "最近の検索",
		"clear": "クリアランス",

	"shortcutUrl": "ショートカット URL",
    "shortcutUrlplaceholder": "URL を入力",
    "shortcutName": "ショートカット名",
    "shortcutNameplaceholder": "名前を入力 - 空白の場合は自動取得",
	"export-shortcut-deta": "ショートカットデータをエクスポート",
    "import-shortcut-deta": "ショートカットデータをインポート",
    "import-shortcut-placeholder": "ショートカットデータを貼り付けてください、Momotan 形式と irminsul 形式に対応",
    "export-note-deta": "ノートデータをエクスポート",
    "import-note-deta": "ノートデータをインポート",
    "import-note-placeholder": "ノートデータを貼り付けてください",
	"img-choose": "画像ソース：",
    "file-manager": "ファイル",
    "photo-album": "アルバム",
    "momotan-choose1": "ランダム画像スケール:",
    //"momotan-choose2": "注: この API はまだ不安定です。画像が読み込めない、長時間更新されないなどの問題が発生した場合は、Ctrl + F5 を押すか、壁紙をリセットして再度設定してください。",
    //"momotan-choose3": "画像はデフォルトで 3 ~ 5 分ごとに更新され、更新時に変更されます。",
    "vertical": "縦向き",
    "horizontal": "横向き",
    "cancel": "キャンセル",
    "save": "保存",
    "copy": "コピー",
    "close": "閉じる",
    "paste": "貼り付け",
    "import": "インポート",
    "export": "エクスポート",
    "open": "開く",
    "confirm": "確認",
    "tip": "ヒント",

		"title-more": "詳細",
		"title-shortcuts": "サイトの近道",
		"add-shortcuts": "近道の追加",
		"edit-shortcuts": "近道の編集",
		"title-general-settings": "全般設定",
		"title-appearance-settings": "外観",
		"item-title1": "言語",
    	"item-description1": "Language",
    	"item-title2": "検索エンジンオプション",
    	"item-description2": "検索バーの左側のアイコンをクリックして切り替えることもできます",
    	"item-title3": "推奨項目と検索履歴の検索",
    	"item-description3": "検索候補、最近の検索、URL 認識を含む",
    	"item-title4": "検索バーの下に近道を表示",
    	"item-description4": "近道は非表示",
		"item-description4-2": "近道が表示されました",
    	"item-title5": "行ごとにさらに多くのショートカットを表示",
    	"item-description5": "ウィンドウの論理幅が >640px の場合にのみ有効",
    	"item-title6": "ロゴをクリックして「詳細」を開く",
    	"item-description6": "ロゴを非表示にしていても、ロゴをクリックして「詳細」を開く",
		"item-title7": "Via ブラウザのページボタンを追加",
		"item2-title1": "カスタム壁紙",
		"item2-description1": "jpg、png、gif をアップロード、3MB 以下",
		"item2-description1-2": "または Bing の每日画像、ランダムな桃寝ちのい図を使用。",
		"upload": "アップロード",
		"momonechinoi": "桃寝ちのい",
		"reset": "リセット",
		"imgpreview": "画像プレビュー",
		"item2-title2": "テーマカラー",
		"item2-description2": "テーマカラーのカスタマイズ",
		"color-select": "カスタマイズ",
		"item2-title3": "ダークモード",
		"item2-description3": "ウェブサイトにダークテーマを適用",
		"item2-title4": "ロゴを非表示",
		"item2-description4": "これはクイック操作に影響しません",
		"item2-title5": "フッター情報を非表示",
		"item2-description5": "より簡潔なページを取得",
		"item2-title6": "ダークモード背景マスク",
		"item2-description6": "ダークモードでの背景画像をより柔らかくする",
		"item2-title7": "動的効果を弱める",
		"item2-description7": "パフォーマンスを節約するために一部のアニメーションをオフにする",
		"item2-title8": "ぼかし効果を無効化",
		"item2-description8": "パフォーマンスを節約するために一部のぼかし効果をオフにする",
		"data-management": "データ管理",
    	"item3-title1": "ローカルストレージ使用量",
    	"item3-description1": "使用済み",
    	"item3-description1-2": "合計 5.00 MB",
    	"item3-title2": "ショートカットデータ",
    	"item3-description2": "ショートカットデータの移行、バックアップ",
    	"item3-title3": "ノートデータ",
    	"item3-description3": "ノートデータの移行、バックアップ",
    	"item3-title4": "設定をリセット",
    	"item3-description4": "すべてのデータを削除して設定をリセット",
		"developed-by-me": "私が開発",
    "item4-description1": "当サイトのノート機能の専用ページ",
    "item4-description2": "[オープンソース] ウェブサイトローカルデータ管理ツール",
    "item4-description3": "[オープンソース] ビルトインアイコンライブラリ付きSVGアイコンエディタ",
	"item4-description4": "桃寝ちのいのファンサイト",
    "about": "について",
    "item5-title1": "開發者",
    "item5-title2": "バージョン",
    "item5-title3": "著作権",
    "item5-title4": "連絡先",

		"visit": "✦ アクセスリンク",
		"showEmpty": "関連する検索候補がありません",
    	"showError": "検索候補の解析に失敗しました、フォールバック中",
    	"showTimeOut": "リクエストがタイムアウトしました、フォールバック中",
    	"showFallbackError": "フォールバックに失敗しました、ネットワークを確認してください",

		"footbtn1": "当サイトについて詳しく",
    "footbtn2": "萌 ICP 備 20251027 号",
    "footbtn3": "異次元への旅",
    "note": "ノート",
    "new-note": "新規ノート",
    "notes-list": "最初のノートを作成",
    "notes-title": "タイトル",
    "editor-placeholder": "ノートを作成または選択してください",
    "note-content-input": "本文",

	"请填写捷径网址": "ショートカットURLを入力してください",
    "这不是一个链接": "これは有効なリンクではありません",
    "已清除所有数据": "すべてのデータが消去されました",
    //"导入成功": "インポート成功",
    //"导入失败": "インポート失敗",
    //"message": "インポート成功",
    "无法访问剪贴板，请手动粘贴数据": "クリップボードにアクセスできません、手動でデータを貼り付けてください",
    "请输入要导入的便签数据": "インポートするノートデータを入力してください",

    "确定要删除这个捷径吗？": "このショートカットを削除してもよろしいですか？",
	"确定要删除这个便签吗？": "このノートを削除してもよろしいですか？",
    "确定要重置背景图片吗？此操作不可撤销。": "背景画像をリセットしてもよろしいですか？この操作は取り消せません。",
    "确定要删除所有数据吗？此操作不可撤销。": "すべてのデータを削除してもよろしいですか？この操作は取り消せません。",
    },
    "zh-TW": {
		"lang-select": "繁體中文",
        "search-input": "搜尋…",
        "metaso": "秘塔 AI",
        "baidu": "百度",
        "bing": "必應",
        "google": "Google",
        "DDG": "DDG",
        "edit": "編輯捷徑",
        "add-to-home": "加入首頁",
		"remove-from-home": "從首頁移除",
        "delete": "删除捷徑",
        "move-forward": "向前移動",
        "move-backward": "向後移動",
		"recent-searches": "最近蒐索",
		"clear": "清空",

	"shortcutUrl": "捷徑網址",
    "shortcutUrlplaceholder": "輸入網址",
    "shortcutName": "捷徑名稱",
    "shortcutNameplaceholder": "輸入名稱 - 留空則自動獲取",
	"export-shortcut-deta": "匯出捷徑資料",
    "import-shortcut-deta": "匯入捷徑資料",
    "import-shortcut-placeholder": "請貼上捷徑資料，支援 Momotan 格式與 irminsul 格式",
    "export-note-deta": "匯出便籤資料",
    "import-note-deta": "匯入便籤資料",
    "import-note-placeholder": "請貼上便籤資料",
	"img-choose": "圖片來源：",
    "file-manager": "檔案管理器",
    "photo-album": "相簿",
    "momotan-choose1": "隨機圖片比例:",
    //"momotan-choose2": "註：此 API 尚不穩定，如遇到圖片無法載入、長時間不更新的情況，請按 Ctrl + F5 ，或重置桌布並再次設定。",
    //"momotan-choose3": "圖片預設每 3 ~ 5 分鐘更新，重新整理時更換。",
    "vertical": "豎屏",
    "horizontal": "橫屏",
    "cancel": "取消",
    "save": "儲存",
    "copy": "複製",
    "close": "關閉",
    "paste": "貼上",
    "import": "匯入",
    "export": "匯出",
    "open": "開啟",
    "confirm": "確定",
    "tip": "提示",

		"title-more": "更多",
		"title-shortcuts": "捷徑",
		"add-shortcuts": "添加捷徑",
		"edit-shortcuts": "編輯捷徑",
		"title-general-settings": "常規設定",
		"title-appearance-settings": "外觀",
		"item-title1": "語言",
		"item-description1": "Language",
		"item-title2": "搜尋引擎選項",
		"item-description2": "也可點擊搜尋列左側圖示來切換",
		"item-title3": "搜尋建議與搜尋歷史記錄",
		"item-description3": "包含搜尋建議、最近搜尋、網址識別",
		"item-title4": "在搜尋列下方顯示捷徑",
		"item-description4": "網站捷徑已隱藏",
		"item-description4-2": "網站捷徑已顯示",
		"item-title5": "在每行顯示更多捷徑",
		"item-description5": "僅在視窗邏輯寬度 >640px 時生效",
		"item-title6": "點擊 Logo 開啟「更多」",
		"item-description6": "點擊 Logo 開啟「更多」，即使隱藏 Logo",
		"item-title7": "添加 Via 瀏覽器的頁面按鈕",
		"item2-title1": "自訂壁紙",
		"item2-description1": "上傳 jpg、png、gif，不大於 3mb",
		"item2-description1-2": "或使用必應壁紙、隨機桃寢奇諾圖。",
		"upload": "上傳",
		"momonechinoi": "桃寢奇諾",
		"reset": "重置",
		"imgpreview": "圖片預覽",
		"item2-title2": "主題色",
		"item2-description2": "自定義網站的主題色",
		"color-select": "自定義",
		"item2-title3": "深色模式",
		"item2-description3": "為網站應用深色主題",
		"item2-title4": "隱藏 Logo",
		"item2-description4": "這不會影響快捷操作",
		"item2-title5": "隱藏頁腳資訊",
		"item2-description5": "獲得更簡潔的頁面",
		"item2-title6": "深色模式背景遮罩",
		"item2-description6": "讓深色模式下的背景圖更柔和",
		"item2-title7": "減弱動態效果",
		"item2-description7": "關閉部分動效以節省效能",
		"item2-title8": "禁用模糊效果",
		"item2-description8": "關閉部分模糊效果以節省效能",
		"data-management": "資料管理",
    	"item3-title1": "本地儲存用量",
    	"item3-description1": "已使用",
    	"item3-description1-2": "共 5.00 MB",
    	"item3-title2": "捷徑資料",
    	"item3-description2": "遷移、備份捷徑資料",
    	"item3-title3": "便籤資料",
    	"item3-description3": "遷移、備份便籤資料",
    	"item3-title4": "重設設定",
    	"item3-description4": "刪除所有資料並重設設定",
		"developed-by-me": "由我開發",
    "item4-description1": "本站便籤功能的專屬頁面",
    "item4-description2": "[開源] 網站本地資料管理工具",
    "item4-description3": "[開源] 自帶圖標庫的SVG圖標編輯器",
	"item4-description4": "桃寢ちのい粉絲站",
    "about": "關於",
    "item5-title1": "開發",
    "item5-title2": "版本",
    "item5-title3": "版權",
    "item5-title4": "聯絡我",

		"visit": "✦ 訪問連結",
		"showEmpty": "沒有相關搜尋建議",
    	"showError": "解析搜尋建議失敗，正在 Fallback",
    	"showTimeOut": "請求超時，正在 Fallback",
    	"showFallbackError": "Fallback 失敗，請檢查網路",

		"footbtn1": "深入了解本站",
    "footbtn2": "萌 ICP 備 20251027 號",
    "footbtn3": "異次元之旅",
    "note": "便籤",
    "new-note": "新增便籤",
    "notes-list": "建立第一個便籤",
    "notes-title": "標題",
    "editor-placeholder": "請新增或選擇一個便籤",
    "note-content-input": "正文",

	"请填写捷径网址": "請填寫捷徑網址",
    "这不是一个链接": "這不是一個有效連結",
    "已清除所有数据": "已清除所有資料",
    //"导入成功": "匯入成功",
    //"导入失败": "匯入失敗",
    //"message": "匯入成功",
    "无法访问剪贴板，请手动粘贴数据": "無法存取剪貼簿，請手動貼上資料",
    "请输入要导入的便签数据": "請輸入要匯入的便籤資料",

    "确定要删除这个捷径吗？": "確定要刪除這個捷徑嗎？",
	"确定要删除这个便签吗？": "確定要刪除這個便籤嗎？",
    "确定要重置背景图片吗？此操作不可撤销。": "確定要重置背景圖片嗎？此操作無法撤銷。",
    "确定要删除所有数据吗？此操作不可撤销。": "確定要刪除所有資料嗎？此操作無法撤銷。",
    }
};

// 多语言弹窗包装函数
const i18nAlert = (messageKey) => {
    const message = translations[currentLang]?.[messageKey] || messageKey;
    alert(message);
};

const i18nConfirm = (messageKey) => {
    const message = translations[currentLang]?.[messageKey] || messageKey;
    return confirm(message);
};

const langSelect = document.getElementById('langSelect');
const langOptions = document.getElementById('langOptions');

// 切换下拉框显示
            langSelect.addEventListener('click', function() {
                langOptions.classList.toggle('active');
                langSelect.classList.toggle('active');
            });
 // 点击页面其他区域关闭下拉框
            document.addEventListener('click', function(e) {
                if (!langSelect.contains(e.target) && !langOptions.contains(e.target)) {
                    langOptions.classList.remove('active');
                    langSelect.classList.remove('active');
                }
            });
// 当前语言
let currentLang = 'zh';

// 动态文本注册表
const dynamicTextRegistry = new Map();

// 注册动态文本元素
function registerDynamicText(elementId, getTextKey, updateCallback) {
    dynamicTextRegistry.set(elementId, {
        getTextKey,
        updateCallback
    });
    
    // 立即更新一次
    updateDynamicText(elementId);
}

// 更新单个动态文本元素
function updateDynamicText(elementId) {
    const registryItem = dynamicTextRegistry.get(elementId);
    if (registryItem && translations[currentLang]) {
        const textKey = registryItem.getTextKey();
        if (translations[currentLang][textKey]) {
            registryItem.updateCallback(translations[currentLang][textKey]);
        }
    }
}

// 更新所有动态文本元素
function updateAllDynamicTexts() {
    for (const [elementId] of dynamicTextRegistry) {
        updateDynamicText(elementId);
    }
}

// 获取浏览器语言并映射到支持的语言
function getBrowserLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    console.log("检测到浏览器语言:", browserLang);
    
    // 语言映射
    const languageMap = {
        'zh': 'zh',           // 简体中文
        'zh-CN': 'zh',        // 简体中文(中国)
        'zh-SG': 'zh',        // 简体中文(新加坡)
        'zh-TW': 'zh-TW',     // 繁体中文(台湾)
        'zh-HK': 'zh-TW',     // 繁体中文(香港)
        'zh-MO': 'zh-TW',     // 繁体中文(澳门)
        'en': 'en',           // 英语
        'en-US': 'en',        // 英语(美国)
        'en-GB': 'en',        // 英语(英国)
        'en-AU': 'en',        // 英语(澳大利亚)
        'ja': 'ja',           // 日语
        'ja-JP': 'ja'         // 日语(日本)
    };
    
    // 检查完整匹配
    if (languageMap[browserLang]) {
        return languageMap[browserLang];
    }
    
    // 检查前缀匹配
    const primaryLang = browserLang.split('-')[0];
    if (languageMap[primaryLang]) {
        return languageMap[primaryLang];
    }
    
    // 默认返回中文
    return 'zh';
}

// 保存语言选择到本地存储
function saveLanguageToLocalStorage(lang) {
    try {
        localStorage.setItem('preferredLanguage', lang);
        console.log("语言已保存到本地存储:", lang);
    } catch (e) {
        console.error("保存语言到本地存储失败:", e);
    }
}

// 从本地存储获取语言选择
function getLanguageFromLocalStorage() {
    try {
        return localStorage.getItem('preferredLanguage');
    } catch (e) {
        console.error("从本地存储获取语言失败:", e);
        return null;
    }
}

// 翻译单个元素
function translateElement(element, lang) {
    const key = element.getAttribute('data-lang');
    if (key && translations[lang] && translations[lang][key]) {
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            if (element.placeholder) {
                element.placeholder = translations[lang][key];
            }
        } else {
            element.textContent = translations[lang][key];
        }
    }
}

// 切换语言函数
function changeLanguage(lang) {
    if (!translations[lang]) {
        console.warn("不支持的语言:", lang);
        lang = 'zh'; // 默认使用中文
    }
    
    currentLang = lang;
    
    // 更新按钮状态
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('selected', btn.dataset.lang === lang);
    });

	// 关闭下拉框
    langOptions.classList.remove('active');
    langSelect.classList.remove('active');
    
    // 遍历所有带有data-lang属性的元素
    document.querySelectorAll('[data-lang]').forEach(element => {
        translateElement(element, lang);
    });

    // 更新所有动态文本元素
    updateAllDynamicTexts();

    // 更新文档语言属性
    document.documentElement.lang = lang;
    
    // 保存语言选择到本地存储
    saveLanguageToLocalStorage(lang);
}

// 初始化语言
function initLanguage() {
    // 首先尝试从本地存储获取语言设置
    const savedLanguage = getLanguageFromLocalStorage();
    
    if (savedLanguage) {
        console.log("使用保存的语言:", savedLanguage);
        changeLanguage(savedLanguage);
    } else {
        // 如果没有保存的语言设置，则使用浏览器语言
        const browserLanguage = getBrowserLanguage();
        console.log("使用浏览器语言:", browserLanguage);
        changeLanguage(browserLanguage);
    }
}

// 初始化语言切换按钮事件
document.querySelectorAll('.lang-btn').forEach(button => {
    button.addEventListener('click', () => {
        changeLanguage(button.dataset.lang);
    });
});

// 创建MutationObserver监听DOM变化
const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
            mutation.addedNodes.forEach((node) => {
                // 如果添加的是元素节点
                if (node.nodeType === 1) {
                    // 检查新节点本身是否有需要翻译的属性
                    if (node.hasAttribute('data-lang')) {
                        translateElement(node, currentLang);
                    }
                    
                    // 检查新节点的子节点中是否有需要翻译的元素
                    const translatableElements = node.querySelectorAll ? node.querySelectorAll('[data-lang]') : [];
                    translatableElements.forEach(element => {
                        translateElement(element, currentLang);
                    });
                }
            });
        }
    });
});

// 开始观察DOM变化
observer.observe(document.body, {
    childList: true,
    subtree: true
});

// 页面加载完成后初始化语言
document.addEventListener('DOMContentLoaded', initLanguage);
</script>


<script>
//无障碍与键盘优化

//F2切换深浅色
document.addEventListener('keydown', function(event) {
            // 检查按下的键是否是F2
            if (event.key === 'F2') {
                // 阻止默认行为
                event.preventDefault();
                toggleTheme();
            }
        });
// 为所有可聚焦元素添加事件监听
            const focusableElements = document.querySelectorAll('[tabindex]');
            
            focusableElements.forEach(element => {
                
                // 添加键盘事件
                element.addEventListener('keydown', function(e) {
                    // 支持Enter和Space键激活元素
                    if (e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });

//模态框与弹窗与搜索栏
document.addEventListener('keydown', function(event) {
  // 检查是否有模态框处于活动状态
  const modalIds = ['customAlert', 'customConfirmModal', 'shortcutModal', 'exportModal', 'importModal', 'notesExportModal', 'notesImportModal', 'myModal', 'noteModal'];
  const activeModal = modalIds.find(id => {
    const element = document.getElementById(id);
    return element && element.classList.contains('active');
  });

  // F1键 - 切换noteModal
  if (event.key === 'F1' || event.keyCode === 112) {
    event.preventDefault();
    
    // 如果有其他模态框处于活动状态，则不执行操作
    if (activeModal && activeModal !== 'noteModal') {
      return;
    }
    
    const noteModal = document.getElementById('noteModal');
    if (noteModal) {
      noteModal.classList.toggle('active');
	  hideContextMenu()
    }
    return;
  }
  
  // ESC键 - 移除活动模态框的active样式
  if (event.key === 'Escape' || event.keyCode === 27) {
    if (activeModal) {
      document.getElementById(activeModal).classList.remove('active');
	  hideContextMenu()
      event.preventDefault();
      return;
    }
    
    // 原有的ESC功能：切换菜单显示
    const menu = document.getElementById('myModal');
	//const contextMenu = document.getElementById('contextMenu');
    if (menu) {
      menu.classList.toggle('active');
	  hideContextMenu()
	  //contextMenu.style.display = 'none';
      event.preventDefault();
    }
    return;
  }
  
  // 如果有活动模态框，不执行任意键输入功能
  if (activeModal) {
    return;
  }
  
  // 如果已在输入框中，不处理
  if (['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {
    return;
  }
  
  // 处理字母、数字和空格键
  if (/^[a-zA-Z0-9 ]$/.test(event.key)) {
    event.preventDefault();
    const input = document.getElementById('searchInput');
    if (input) {
      input.focus();
    }
  }

});

// 监听浏览器返回按钮
window.addEventListener('popstate', function(event) {
  // 检查是否有模态框处于活动状态
  const modalIds = ['customAlert', 'customConfirmModal', 'shortcutModal', 'exportModal', 'importModal', 'notesExportModal', 'notesImportModal', 'myModal', 'noteModal'];
  const activeModal = modalIds.find(id => {
    const element = document.getElementById(id);
    return element && element.classList.contains('active');
  });

  if (activeModal) {
    // 关闭活动模态框
    document.getElementById(activeModal).classList.remove('active');
    hideContextMenu();
    
    // 阻止默认的返回行为
    history.pushState(null, null, document.URL);
    event.preventDefault();
    return;
  }
});

// 页面加载时添加历史记录，以便后续处理返回按钮
window.addEventListener('load', function() {
  history.pushState(null, null, document.URL);
});

// 监听hashchange，防止URL变化影响
window.addEventListener('hashchange', function() {
  const modalIds = ['customAlert', 'customConfirmModal', 'shortcutModal', 'exportModal', 'importModal', 'notesExportModal', 'notesImportModal', 'myModal', 'noteModal'];
  const activeModal = modalIds.find(id => {
    const element = document.getElementById(id);
    return element && element.classList.contains('active');
  });

  if (activeModal) {
    history.pushState(null, null, document.URL);
  }
});
</script>
	<script>
		// 注册 Service Worker
		if ('serviceWorker' in navigator) {
  			navigator.serviceWorker.register('/sw.js')
    		.then(registration => console.log('网页已缓存在本地，即使断网依然能打开'))
		}
    </script>
	<!--<script>
		navigator.serviceWorker.getRegistrations().then(registrations => {
  			for (let registration of registrations) {
    			registration.unregister();
  			}
		});
		caches.keys().then(cacheNames => {
  			return Promise.all(
    			cacheNames.map(cacheName => caches.delete(cacheName))
  			);
		});
    </script>-->
</body>
</html>